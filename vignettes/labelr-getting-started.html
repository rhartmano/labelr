<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Labelr - An Introduction</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Labelr - An Introduction</h1>



<div id="a-whirlwind-tour" class="section level2">
<h2>A Whirlwind Tour</h2>
<p>labelr is an experimental (“beta”) R package that supports creation
and use of multiple types of labels for data.frames and data.frame
variables (columns). This vignette provides an ad hoc introduction to
core and ancillary labelr functionalities and uses cases.</p>
</div>
<div id="types-of-labels" class="section level2">
<h2>Types of Labels</h2>
<p>labelr supports three core types of data.frame labels, the last of
which comes in three flavors:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Frame labels</strong> - Each data.frame may be given a
single “frame label” of 500 characters or fewer, which may describe key
general features or characteristics of the data set (e.g., source, date
produced or published, high-level contents).</p></li>
<li><p><strong>Name labels</strong> - Each variable may be given exactly
one name label, which is an extended variable name or brief description
of the variable. For example, if a variable called “st_b” refers to a
survey respondent’s state of birth, then a sensible and useful name
label might be “State of Birth”. Or, if a variable called “trust1”
consisted of responses to the consumer survey question, “How much do you
trust BBC news to give you unbiased information?,” a sensible name label
might be “BBC News Trust.” As such, name labels are comparable to what
Stata and SAS call “variable labels.”</p></li>
<li><p><strong>Value labels</strong> - labelr offers three kinds of
value labels.</p>
<ul>
<li><p><em>One-to-one labels</em> - The canonical value-labeling use
case entails mapping distinct values of a variable to distinct labels in
a one-to-one fashion, so that each value label uniquely identifies a
substantive value. For instance, an administrative data set might assign
the integers 1-7 to seven distinct racial/ethnic groups, and value
labels would be critical in mapping those numbers to socially
substantive racial/ethnic category concepts (e.g., Which number
corresponds to the category “Asian American?”).</p></li>
<li><p><em>Many-to-one labels</em> - In an alternative use case, value
labels may serve to distill or “bucket” distinct variable values in a
way that deliberately “throws away” information for purposes of
simplification. For example, one may wish to give the single label
“Agree” to the responses “Very Strongly Agree,” “Strongly Agree,” and
“Agree.” Or one may wish to differentiate self-identified “White”
respondents from “People of Color,” applying the latter value label to
all categories other than “White.”</p></li>
<li><p><em>Numerical range labels</em> - Finally, one may wish to carve
a numerical variable into an ordinal or qualitative range, such as
dichotomizing a variable or dividing it into quantiles. Numerical range
labels support one-to-many assignment of a single value label to a range
of numerical values for a given variable.</p></li>
</ul></li>
</ol>
</div>
<div id="core-use-cases-and-capabilities" class="section level2">
<h2>Core Use Cases and Capabilities</h2>
<p>More specifically, labelr functions support the following
actions:</p>
<ol style="list-style-type: decimal">
<li><p>Assigning variable value labels, name labels, and a frame label
to data.frames and modifying those labels thereafter.</p></li>
<li><p>Generating and accessing simple look-up table-style data.frames
to inform or remind you about a given variable’s name label, frame
label, or the value labels that correspond to its unique values (i.e.,
Which racial/ethnic identity category label corresponds to a value of
3?).</p></li>
<li><p>Swapping out variable names for variable labels and back
again.</p></li>
<li><p>Replacing variables’ values with their corresponding
labels.</p></li>
<li><p>Augmenting a data.frame by adding columns of variable labels that
can exist alongside the original columns (variables) from which they
were derived.</p></li>
<li><p>Engaging in <code>base::subset()</code>-like row-filtering, using
value labels to guide the filtering but returning a subsetted data.frame
in terms of the original variable values.</p></li>
<li><p>Tabulating value frequencies that can be expressed in terms of
raw values or value labels – again, without explicitly modifying or
converting the raw data.frame values.</p></li>
<li><p>Preserving and restoring a data.frame’s labels in the event that
some unsupported R operation destroys them.</p></li>
<li><p>Applying a single value-labeling scheme to many variables at once
(for example, assigning the same set of Likert-scale labels (“Strongly
Agree,” etc.) to all variables that share a common variable name
character substring.</p></li>
</ol>
</div>
<div id="adding-and-looking-up-frame-name-and-value-labels" class="section level2">
<h2>Adding and Looking up Frame, Name, and Value Labels</h2>
<p>We’ll start our exploration of core labelr functions with a fake
“demographic” data.frame. First, though, let’s load the package
labelr.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># install.packages(&quot;devtools&quot;)</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="co"># devtools::install_github(&quot;rhartmano/labelr&quot;)</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">library</span>(labelr)</span></code></pre></div>
<p>Note: To minimize dependencies and reduce unexpected behaviors,
labelr works exclusively with Base R data.frames and vectors and
<strong>will coerce any augmented data.frame (e.g., tibble, data.table)
to a base data.frame.</strong> The suggested workflow is to affix and
use labels <strong>before</strong> coercing to an augmented data.frame
if at all. While some augmented data.frames and their functions may
“play well” with labelr-style labels, this is not guaranteed.</p>
<div id="make-toy-demographic-data.frame" class="section level3">
<h3>Make Toy Demographic Data.Frame</h3>
<p>We’ll use <code>make_demo_data()</code> (included with labelr) to
create the fictional data set.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">555</span>) <span class="co"># for reproducibility</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">make_demo_data</span>(<span class="at">n =</span> <span class="dv">1000</span>) <span class="co"># you can specify the number of fictional obs.</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co"># make a backup for later comparison</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>df_copy <span class="ot">&lt;-</span> df</span></code></pre></div>
</div>
<div id="add-a-variable-frame-label-using-add_frame_lab" class="section level3">
<h3>Add a Variable “FRAME label” Using <code>add_frame_lab()</code></h3>
<p>We’ll start our labeling session by providing a fittingly fictional
high-level description of this fictional data set (labelr calls this a
FRAME label).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">add_frame_lab</span>(df, <span class="at">frame.lab =</span> <span class="st">&quot;Demographic and reaction time test score</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="st">                    records collected by Royal Statistical Agency of</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="st">                    Fictionaslavica. Data fictionally collected in the year</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="st">                    1987. As published in A. Smithee (1988). Some Fictional Data</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="st">                    for Your Amusement. Mad Magazine, 10(1), 1-24.&quot;</span>)</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="fu">get_frame_lab</span>(df)</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="do">### &gt;   data.frame</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="do">### &gt; 1         df</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="do">### &gt;                                                                                                                                                                                                                                                       frame.lab</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="do">### &gt; 1 Demographic and reaction time test score records collected by Royal Statistical Agency of Fictionaslavica. Data fictionally collected in the year 1987. As published in A. Smithee (1988). Some Fictional Data for Your Amusement. Mad Magazine, 10(1), 1-24.</span></span></code></pre></div>
</div>
<div id="add-variable-name-labels-using-add_name_labs" class="section level3">
<h3>Add Variable NAME Labels Using <code>add_name_labs()</code></h3>
<p>Now, let’s add (some fairly trivial) variable NAME labels</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">add_name_labs</span>(df, <span class="at">name.labs =</span> <span class="fu">c</span>(</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="st">&quot;age&quot;</span> <span class="ot">=</span> <span class="st">&quot;Age in years&quot;</span>,</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  <span class="st">&quot;raceth&quot;</span> <span class="ot">=</span> <span class="st">&quot;Racial/ethnic identity group category&quot;</span>,</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  <span class="st">&quot;gender&quot;</span> <span class="ot">=</span> <span class="st">&quot;Gender identity category&quot;</span>,</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>  <span class="st">&quot;edu&quot;</span> <span class="ot">=</span> <span class="st">&quot;Highest education level attained&quot;</span>,</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>  <span class="st">&quot;x1&quot;</span> <span class="ot">=</span> <span class="st">&quot;Space Invaders reaction time test scores&quot;</span>,</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>  <span class="st">&quot;x2&quot;</span> <span class="ot">=</span> <span class="st">&quot;Galaga reaction time test scores&quot;</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>))</span></code></pre></div>
<p>Even if we do nothing else with these name labels, we can access or
manipulate a simple lookup table as needed.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">get_name_labs</span>(df)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="do">### &gt;      var                                      lab</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="do">### &gt; 1     id                                       id</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="do">### &gt; 2    age                             Age in years</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="do">### &gt; 3 gender                 Gender identity category</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="do">### &gt; 4 raceth    Racial/ethnic identity group category</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="do">### &gt; 5    edu         Highest education level attained</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="do">### &gt; 6     x1 Space Invaders reaction time test scores</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="do">### &gt; 7     x2         Galaga reaction time test scores</span></span></code></pre></div>
</div>
<div id="add-value-labels-using-add_val_labs" class="section level3">
<h3>Add VALUE labels Using <code>add_val_labs()</code></h3>
<p>Now, let’s do some VALUE labeling. First, let’s use
<code>add_val_labs()</code> to add one-to-one value labels for the
variable “raceth”. Note: max.unique.vals sets an upper limit on the
number of unique values a variable may have and still be considered
“value-label-able.” Additionally, labelr sets an overall upper limit of
5000 unique value labels permissible per variable.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">add_val_labs</span>(df, <span class="co"># data.frame with to-be-value-labeled column</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>  <span class="at">vars =</span> <span class="st">&quot;raceth&quot;</span>, <span class="co"># quoted variable name of to-be-labeled variable/column</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>  <span class="at">vals =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>), <span class="co"># label values 1 through 7, inclusive</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>  <span class="at">labs =</span> <span class="fu">c</span>(</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>    <span class="st">&quot;White&quot;</span>, <span class="st">&quot;Black&quot;</span>, <span class="st">&quot;Hispanic&quot;</span>, <span class="co"># apply these labels in this order to vals 1-7</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>    <span class="st">&quot;Asian&quot;</span>, <span class="st">&quot;AIAN&quot;</span>, <span class="st">&quot;Multi&quot;</span>, <span class="st">&quot;Other&quot;</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>  ),</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>  <span class="at">max.unique.vals =</span> <span class="dv">10</span> <span class="co"># maximum number of unique values permitted</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>)</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="do">### &gt; Labeling variable --raceth--:</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="do">### &gt;      var vals     labs</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="do">### &gt; 1 raceth    1    White</span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="do">### &gt; 2 raceth    2    Black</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="do">### &gt; 3 raceth    3 Hispanic</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a><span class="do">### &gt; 4 raceth    4    Asian</span></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="do">### &gt; 5 raceth    5     AIAN</span></span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a><span class="do">### &gt; 6 raceth    6    Multi</span></span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a><span class="do">### &gt; 7 raceth    7    Other</span></span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a><span class="do">### &gt; 8 raceth   NA       NA</span></span></code></pre></div>
<p>Note that the NA label is generated regardless of whether there are
any actual NA values, as a way of letting you know that labelr handles
NA (and “irregular”) value-labeling without your help. We’ll illustrate
this further later on.</p>
</div>
<div id="add-value-labels-using-add_val1" class="section level3">
<h3>Add Value Labels Using <code>add_val1()</code></h3>
<p>Now let’s add value labels for variable “gender.” Function
<code>add_val1</code> is a variant of <code>add_val_labs</code> that
allows you to supply the variable name unquoted, provided you are
value-labeling only one variable. (It’s not evident from the above, but
<code>add_val_labs</code> supports labeling multiple variables at
once).</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">add_val1</span>(</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>  <span class="at">data =</span> df,</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>  <span class="at">var =</span> gender, <span class="co"># contrast this var argument to the vars argument demo&#39;d above</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>  <span class="at">vals =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>), <span class="co"># the values to be labeled</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>  <span class="at">labs =</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Other&quot;</span>), <span class="co"># the labels, applied in order to the vals</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>  <span class="at">max.unique.vals =</span> <span class="dv">10</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>)</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="do">### &gt; Labeling variable --gender--:</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="do">### &gt;       var vals   labs</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="do">### &gt; 9  gender    0   Male</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="do">### &gt; 10 gender    1 Female</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="do">### &gt; 11 gender    2  Other</span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a><span class="do">### &gt; 12 gender   NA     NA</span></span></code></pre></div>
<p>Once again, we can create a lookup table with the labels-to-values
mappings. Because we used <code>add_val_labs()</code> and
<code>add_val</code>(), each unique value of our value-labeled variables
will (must) have one unique label (one-to-one mapping), and any unique
values that were not explicitly assigned a label will be given one
automatically (the value itself, coerced to character as needed).</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">get_val_labs</span>(df)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="do">### &gt;       var vals     labs</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="do">### &gt; 1  gender    0     Male</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="do">### &gt; 2  gender    1   Female</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="do">### &gt; 3  gender    2    Other</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="do">### &gt; 4  gender   NA       NA</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="do">### &gt; 5  raceth    1    White</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a><span class="do">### &gt; 6  raceth    2    Black</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="do">### &gt; 7  raceth    3 Hispanic</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="do">### &gt; 8  raceth    4    Asian</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a><span class="do">### &gt; 9  raceth    5     AIAN</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a><span class="do">### &gt; 10 raceth    6    Multi</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="do">### &gt; 11 raceth    7    Other</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a><span class="do">### &gt; 12 raceth   NA       NA</span></span></code></pre></div>
</div>
<div id="add-numerical-range-labels-using-add_quant_labs" class="section level3">
<h3>Add NUMERICAL RANGE Labels Using <code>add_quant_labs()</code></h3>
<p>Traditionally, value labels are intended for categorical variables,
such as binary, nominal, or (integer) ordinal variables with limited
numbers of distinct categories. Further, as just noted, value labels
that are added using <code>add_val_labs</code> (or
<code>add_val1</code>) are constrained to map one-to-one to distinct
values: No two distinct values can share a label or vice versa.</p>
<p>If you wish to apply a label to a range of values of a numerical
variable, such as labeling each value according to the quintile or
decile to which it belongs, you can use <code>add_quant_labs()</code>
(or <code>add_quant1</code>) to do so.</p>
<p>Here, we will use <code>add_quant_labs</code> with the partial
argument set to TRUE to apply quintile range labels to <strong>all
variables</strong> of df that have an “x” in their names (i.e., vars
“x1” and “x2”). We’ll demonstrate this capability further at the end of
this vignette.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>df_temp <span class="ot">&lt;-</span> <span class="fu">add_quant_labs</span>(<span class="at">data =</span> df, <span class="at">vars =</span> <span class="st">&quot;x&quot;</span>, <span class="at">qtiles =</span> <span class="dv">5</span>, <span class="at">partial =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="do">### &gt; Labeling variable --x1--:</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="do">### &gt;    var    vals labs</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="do">### &gt; 13  x1  82.976 q020</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="do">### &gt; 14  x1  95.238 q040</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="do">### &gt; 15  x1 106.142 q060</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="do">### &gt; 16  x1 117.524 q080</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="do">### &gt; 17  x1  157.98 q100</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="do">### &gt; 18  x1      NA   NA</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="do">### &gt; Labeling variable --x2--:</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="do">### &gt;    var    vals labs</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="do">### &gt; 19  x2 0.22404 q020</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="do">### &gt; 20  x2 0.41608 q040</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a><span class="do">### &gt; 21  x2 0.62034 q060</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a><span class="do">### &gt; 22  x2 0.80538 q080</span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a><span class="do">### &gt; 23  x2  0.9992 q100</span></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a><span class="do">### &gt; 24  x2      NA   NA</span></span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a><span class="do">### &gt; Remember: This command uses partial vars arg matching.</span></span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a><span class="do">### &gt; Use a more specific vars argument or set partial = FALSE</span></span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a><span class="do">### &gt; ...if you want to restrict labeling to fewer/more specific variables.</span></span></code></pre></div>
<p>As <code>add_quant_labs</code> adds those numerical range labels, the
console output shows the actual quintile value of the supplied
variable(s) (here, “x1” and “x2”) that corresponds to each quintile
(range) label. Any value at or below that value (and above the
next-lowest quintile value) is assigned the corresponding quintile
label. In this case, the labels were generated automatically, but the
user can override this and specify different label text.</p>
<p><strong>Be careful</strong> with setting partial to TRUE like this:
If your data set featured a column called “sex” or that featured the
suffix “max,” <code>add_quant_labs()</code> would attempt to apply the
value labeling scheme to that column as well!</p>
<p>We can use the same function to assign arbitrary, user-specified
range labels. Here, we assign numerical range labels based on an
arbitrary cutpoint that differentiate values of “x1” and “x2” that are
at or below 100 from values that are at or below 150 (but greater than
100).</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>df_temp <span class="ot">&lt;-</span> <span class="fu">add_quant_labs</span>(</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>  <span class="at">data =</span> df_temp, <span class="at">vars =</span> <span class="st">&quot;x&quot;</span>, <span class="at">vals =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">150</span>),</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>  <span class="at">partial =</span> <span class="cn">TRUE</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>)</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="do">### &gt;   Dropping all value labels from variable --x1--.</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="do">### &gt; Labeling variable --x1--:</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="do">### &gt;    var vals  labs</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="do">### &gt; 19  x1  100 &lt;=100</span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="do">### &gt; 20  x1  150 &lt;=150</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a><span class="do">### &gt; 21  x1   NA    NA</span></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a><span class="do">### &gt;   Dropping all value labels from variable --x2--.</span></span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a><span class="do">### &gt; Warning in add_quant_labs(data = df_temp, vars = &quot;x&quot;, vals = c(100, 150), : </span></span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a><span class="do">### &gt; Some of the supplied vals argument values are outside</span></span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a><span class="do">### &gt; the observed range of var --x2-- values</span></span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a><span class="do">### &gt; Labeling variable --x2--:</span></span>
<span id="cb10-19"><a href="#cb10-19" tabindex="-1"></a><span class="do">### &gt;    var vals  labs</span></span>
<span id="cb10-20"><a href="#cb10-20" tabindex="-1"></a><span class="do">### &gt; 16  x2  100 &lt;=100</span></span>
<span id="cb10-21"><a href="#cb10-21" tabindex="-1"></a><span class="do">### &gt; 17  x2  150 &lt;=150</span></span>
<span id="cb10-22"><a href="#cb10-22" tabindex="-1"></a><span class="do">### &gt; 18  x2   NA    NA</span></span>
<span id="cb10-23"><a href="#cb10-23" tabindex="-1"></a><span class="do">### &gt; Remember: This command uses partial vars arg matching.</span></span>
<span id="cb10-24"><a href="#cb10-24" tabindex="-1"></a><span class="do">### &gt; Use a more specific vars argument or set partial = FALSE</span></span>
<span id="cb10-25"><a href="#cb10-25" tabindex="-1"></a><span class="do">### &gt; ...if you want to restrict labeling to fewer/more specific variables.</span></span></code></pre></div>
<p>Having demonstrated the basic functionality, let’s use
<code>add_quant1</code> to apply decile range labeling to the single
variable “x1” only. This function only accepts one variable, but its
name can be supplied unquoted.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">add_quant1</span>(df, <span class="co"># data.frame</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  x1, <span class="co"># variable to value-label</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>  <span class="at">qtiles =</span> <span class="dv">5</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>) <span class="co"># number quintiles to define numerical range labels</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="do">### &gt; Labeling variable --x1--:</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="do">### &gt;    var    vals labs</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="do">### &gt; 13  x1  82.976 q020</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="do">### &gt; 14  x1  95.238 q040</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="do">### &gt; 15  x1 106.142 q060</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="do">### &gt; 16  x1 117.524 q080</span></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="do">### &gt; 17  x1  157.98 q100</span></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="do">### &gt; 18  x1      NA   NA</span></span></code></pre></div>
<p>We’ll preserve the “x1” range labels going forward, keeping “x2”
unlabeled.</p>
</div>
<div id="add-many-to-one-value-labels-using-add_m1_lab" class="section level3">
<h3>Add MANY-TO-ONE VALUE Labels Using <code>add_m1_lab()</code></h3>
<p>If you wish to apply a single label to multiple distinct values, this
can be done through successive calls to <code>add_m1_lab()</code> (or
<code>add1m1()</code>, if working with a single variable). Here “m1” is
shorthand for “many to one” (many values get the same one value
label).</p>
<p>Note that each call to <code>add_m1_lab()</code> applies a single
value label, so,<br />
multiple calls are needed to apply multiple labels. Here, we illustrate
this workflow, applying the label “Some College+” to values 3, 4, or 5
of the variable “edu”, then applying other distinct labels to values 1
and 2, respectively.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">add_m1_lab</span>(df, <span class="st">&quot;edu&quot;</span>, <span class="at">vals =</span> <span class="fu">c</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>), <span class="at">lab =</span> <span class="st">&quot;Some College+&quot;</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="do">### &gt; Labeling variable --edu--:</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="do">### &gt;    var vals          labs</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="do">### &gt; 19 edu    1             1</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="do">### &gt; 20 edu    2             2</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="do">### &gt; 21 edu    3 Some College+</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="do">### &gt; 22 edu    4 Some College+</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="do">### &gt; 23 edu    5 Some College+</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="do">### &gt; 24 edu   NA            NA</span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">add_m1_lab</span>(df, <span class="st">&quot;edu&quot;</span>, <span class="at">vals =</span> <span class="dv">1</span>, <span class="at">lab =</span> <span class="st">&quot;Not HS Grad&quot;</span>)</span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a><span class="do">### &gt; Labeling variable --edu--:</span></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a><span class="do">### &gt;    var vals          labs</span></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a><span class="do">### &gt; 13 edu    1   Not HS Grad</span></span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a><span class="do">### &gt; 14 edu    2             2</span></span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a><span class="do">### &gt; 15 edu    3 Some College+</span></span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a><span class="do">### &gt; 16 edu    4 Some College+</span></span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a><span class="do">### &gt; 17 edu    5 Some College+</span></span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a><span class="do">### &gt; 18 edu   NA            NA</span></span>
<span id="cb12-20"><a href="#cb12-20" tabindex="-1"></a></span>
<span id="cb12-21"><a href="#cb12-21" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">add_m1_lab</span>(df, <span class="st">&quot;edu&quot;</span>, <span class="at">vals =</span> <span class="dv">2</span>, <span class="at">lab =</span> <span class="st">&quot;HSG, No College&quot;</span>)</span>
<span id="cb12-22"><a href="#cb12-22" tabindex="-1"></a><span class="do">### &gt; Labeling variable --edu--:</span></span>
<span id="cb12-23"><a href="#cb12-23" tabindex="-1"></a><span class="do">### &gt;    var vals            labs</span></span>
<span id="cb12-24"><a href="#cb12-24" tabindex="-1"></a><span class="do">### &gt; 13 edu    1     Not HS Grad</span></span>
<span id="cb12-25"><a href="#cb12-25" tabindex="-1"></a><span class="do">### &gt; 14 edu    2 HSG, No College</span></span>
<span id="cb12-26"><a href="#cb12-26" tabindex="-1"></a><span class="do">### &gt; 15 edu    3   Some College+</span></span>
<span id="cb12-27"><a href="#cb12-27" tabindex="-1"></a><span class="do">### &gt; 16 edu    4   Some College+</span></span>
<span id="cb12-28"><a href="#cb12-28" tabindex="-1"></a><span class="do">### &gt; 17 edu    5   Some College+</span></span>
<span id="cb12-29"><a href="#cb12-29" tabindex="-1"></a><span class="do">### &gt; 18 edu   NA              NA</span></span>
<span id="cb12-30"><a href="#cb12-30" tabindex="-1"></a></span>
<span id="cb12-31"><a href="#cb12-31" tabindex="-1"></a><span class="fu">get_val_labs</span>(df)</span>
<span id="cb12-32"><a href="#cb12-32" tabindex="-1"></a><span class="do">### &gt;       var    vals            labs</span></span>
<span id="cb12-33"><a href="#cb12-33" tabindex="-1"></a><span class="do">### &gt; 1  gender       0            Male</span></span>
<span id="cb12-34"><a href="#cb12-34" tabindex="-1"></a><span class="do">### &gt; 2  gender       1          Female</span></span>
<span id="cb12-35"><a href="#cb12-35" tabindex="-1"></a><span class="do">### &gt; 3  gender       2           Other</span></span>
<span id="cb12-36"><a href="#cb12-36" tabindex="-1"></a><span class="do">### &gt; 4  gender      NA              NA</span></span>
<span id="cb12-37"><a href="#cb12-37" tabindex="-1"></a><span class="do">### &gt; 5  raceth       1           White</span></span>
<span id="cb12-38"><a href="#cb12-38" tabindex="-1"></a><span class="do">### &gt; 6  raceth       2           Black</span></span>
<span id="cb12-39"><a href="#cb12-39" tabindex="-1"></a><span class="do">### &gt; 7  raceth       3        Hispanic</span></span>
<span id="cb12-40"><a href="#cb12-40" tabindex="-1"></a><span class="do">### &gt; 8  raceth       4           Asian</span></span>
<span id="cb12-41"><a href="#cb12-41" tabindex="-1"></a><span class="do">### &gt; 9  raceth       5            AIAN</span></span>
<span id="cb12-42"><a href="#cb12-42" tabindex="-1"></a><span class="do">### &gt; 10 raceth       6           Multi</span></span>
<span id="cb12-43"><a href="#cb12-43" tabindex="-1"></a><span class="do">### &gt; 11 raceth       7           Other</span></span>
<span id="cb12-44"><a href="#cb12-44" tabindex="-1"></a><span class="do">### &gt; 12 raceth      NA              NA</span></span>
<span id="cb12-45"><a href="#cb12-45" tabindex="-1"></a><span class="do">### &gt; 13    edu       1     Not HS Grad</span></span>
<span id="cb12-46"><a href="#cb12-46" tabindex="-1"></a><span class="do">### &gt; 14    edu       2 HSG, No College</span></span>
<span id="cb12-47"><a href="#cb12-47" tabindex="-1"></a><span class="do">### &gt; 15    edu       3   Some College+</span></span>
<span id="cb12-48"><a href="#cb12-48" tabindex="-1"></a><span class="do">### &gt; 16    edu       4   Some College+</span></span>
<span id="cb12-49"><a href="#cb12-49" tabindex="-1"></a><span class="do">### &gt; 17    edu       5   Some College+</span></span>
<span id="cb12-50"><a href="#cb12-50" tabindex="-1"></a><span class="do">### &gt; 18    edu      NA              NA</span></span>
<span id="cb12-51"><a href="#cb12-51" tabindex="-1"></a><span class="do">### &gt; 19     x1  82.976            q020</span></span>
<span id="cb12-52"><a href="#cb12-52" tabindex="-1"></a><span class="do">### &gt; 20     x1  95.238            q040</span></span>
<span id="cb12-53"><a href="#cb12-53" tabindex="-1"></a><span class="do">### &gt; 21     x1 106.142            q060</span></span>
<span id="cb12-54"><a href="#cb12-54" tabindex="-1"></a><span class="do">### &gt; 22     x1 117.524            q080</span></span>
<span id="cb12-55"><a href="#cb12-55" tabindex="-1"></a><span class="do">### &gt; 23     x1  157.98            q100</span></span>
<span id="cb12-56"><a href="#cb12-56" tabindex="-1"></a><span class="do">### &gt; 24     x1      NA              NA</span></span></code></pre></div>
</div>
<div id="where-do-we-stand" class="section level3">
<h3>Where Do We Stand?</h3>
<p>All of this is nice, but have we really accomplished anything? A
casual view of the data.frame raises doubts: it does not appear to have
changed from its its initial state.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">head</span>(df_copy, <span class="dv">3</span>) <span class="co"># our pre-labeling copy of the data.frame</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="do">### &gt;     id age gender raceth edu     x1     x2</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="do">### &gt; T-1  1  59      1      4   5 120.25 0.5928</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="do">### &gt; N-2  2  56      1      1   2  67.12 0.9116</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="do">### &gt; D-3  3  54      1      6   3  79.28 0.6993</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="fu">head</span>(df, <span class="dv">3</span>) <span class="co"># our latest, post-labeling version of same data.frame</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="do">### &gt;     id age gender raceth edu     x1     x2</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="do">### &gt; T-1  1  59      1      4   5 120.25 0.5928</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="do">### &gt; N-2  2  56      1      1   2  67.12 0.9116</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="do">### &gt; D-3  3  54      1      6   3  79.28 0.6993</span></span></code></pre></div>
<p>But labeling has introduced unobtrusive but important features for us
to use. We’ll put them to work in a moment. But first let’s back them up
in case we lose them.</p>
</div>
</div>
<div id="preserving-and-restoring-labels" class="section level2">
<h2>Preserving and Restoring Labels</h2>
<p>Lose them, you say? labelr labels are data.frame attributes, and
certain Base R functions (like some forms of subsetting) are known to
destroy attributes. For this reason, once you’re done labeling your
data.frame, it’s wise to create an in-session backup of your label
information by assigning it to a stand-alone object. You can do this
with <code>get_all_lab_atts()</code>, which will return all labels
(frame, name, and value) as a list that you can subsequently (re-)
attach to a data.frame.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>labs.df <span class="ot">&lt;-</span> <span class="fu">get_all_lab_atts</span>(df)</span></code></pre></div>
<p>Now, we can remove them explicitly, simulating what certain R
functions do implicitly.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">strip_labs</span>(df) <span class="co"># remove our labels</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="fu">get_all_lab_atts</span>(df) <span class="co"># show that they&#39;re gone</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="do">### &gt; named list()</span></span></code></pre></div>
<p>Now, let’s restore them, using the labs.df list object we just
created.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">add_lab_atts</span>(df, labs.df)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="fu">get_all_lab_atts</span>(df)</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="do">### &gt; $frame.lab</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="do">### &gt; [1] &quot;Demographic and reaction time test score records collected by Royal Statistical Agency of Fictionaslavica. Data fictionally collected in the year 1987. As published in A. Smithee (1988). Some Fictional Data for Your Amusement. Mad Magazine, 10(1), 1-24.&quot;</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a><span class="do">### &gt; $name.labs</span></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a><span class="do">### &gt;                                         id                                        age </span></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a><span class="do">### &gt;                                       &quot;id&quot;                             &quot;Age in years&quot; </span></span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a><span class="do">### &gt;                                     gender                                     raceth </span></span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a><span class="do">### &gt;                 &quot;Gender identity category&quot;    &quot;Racial/ethnic identity group category&quot; </span></span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a><span class="do">### &gt;                                        edu                                         x1 </span></span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a><span class="do">### &gt;         &quot;Highest education level attained&quot; &quot;Space Invaders reaction time test scores&quot; </span></span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a><span class="do">### &gt;                                         x2 </span></span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a><span class="do">### &gt;         &quot;Galaga reaction time test scores&quot; </span></span>
<span id="cb16-16"><a href="#cb16-16" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb16-17"><a href="#cb16-17" tabindex="-1"></a><span class="do">### &gt; $val.labs.gender</span></span>
<span id="cb16-18"><a href="#cb16-18" tabindex="-1"></a><span class="do">### &gt;        0        1        2       NA </span></span>
<span id="cb16-19"><a href="#cb16-19" tabindex="-1"></a><span class="do">### &gt;   &quot;Male&quot; &quot;Female&quot;  &quot;Other&quot;     &quot;NA&quot; </span></span>
<span id="cb16-20"><a href="#cb16-20" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb16-21"><a href="#cb16-21" tabindex="-1"></a><span class="do">### &gt; $val.labs.raceth</span></span>
<span id="cb16-22"><a href="#cb16-22" tabindex="-1"></a><span class="do">### &gt;          1          2          3          4          5          6          7         NA </span></span>
<span id="cb16-23"><a href="#cb16-23" tabindex="-1"></a><span class="do">### &gt;    &quot;White&quot;    &quot;Black&quot; &quot;Hispanic&quot;    &quot;Asian&quot;     &quot;AIAN&quot;    &quot;Multi&quot;    &quot;Other&quot;       &quot;NA&quot; </span></span>
<span id="cb16-24"><a href="#cb16-24" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb16-25"><a href="#cb16-25" tabindex="-1"></a><span class="do">### &gt; $val.labs.edu</span></span>
<span id="cb16-26"><a href="#cb16-26" tabindex="-1"></a><span class="do">### &gt;                 1                 2                 3                 4                 5                NA </span></span>
<span id="cb16-27"><a href="#cb16-27" tabindex="-1"></a><span class="do">### &gt;     &quot;Not HS Grad&quot; &quot;HSG, No College&quot;   &quot;Some College+&quot;   &quot;Some College+&quot;   &quot;Some College+&quot;              &quot;NA&quot; </span></span>
<span id="cb16-28"><a href="#cb16-28" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb16-29"><a href="#cb16-29" tabindex="-1"></a><span class="do">### &gt; $val.labs.x1</span></span>
<span id="cb16-30"><a href="#cb16-30" tabindex="-1"></a><span class="do">### &gt;  82.976  95.238 106.142 117.524  157.98      NA </span></span>
<span id="cb16-31"><a href="#cb16-31" tabindex="-1"></a><span class="do">### &gt;  &quot;q020&quot;  &quot;q040&quot;  &quot;q060&quot;  &quot;q080&quot;  &quot;q100&quot;    &quot;NA&quot;</span></span></code></pre></div>
<p>We’re back(ed up)!</p>
<p>In addition to this hack, labelr provides label-preserving variants
of common data management functions, including <code>sfilter()</code>,
<code>sselect()</code>, <code>ssubset()</code>, <code>srename()</code>,
<code>ssort()</code>, and others (the “s” prefix is for “safely,” as in,
“your labels will be safely retained”). Other popular packages (e.g.,
“dplyr”) also preserve label attributes. An advantage of labelr
functions like <code>sselect()</code> is that they they will update the
label attributes of affected columns. For example, if your use of
<code>sselect()</code> or <code>sdrop</code> removes a column from the
returned data.frame, any labels associated with that column will be
removed from the data.frame’s attributes, as well.</p>
</div>
<div id="using-value-labels" class="section level2">
<h2>“Using” Value Labels</h2>
<p>Now that our data.frame is labeled (and our labels backed up), let’s
demonstrate some ways that we can use them.</p>
<div id="show-first-last-or-random-rows-with-value-labels-overlaid" class="section level3">
<h3>Show First, Last, or Random Rows with Value Labels Overlaid</h3>
<p>Base R includes the <code>head()</code> and <code>tail()</code>
functions, which allow you to show the first n or last n rows of a
data.frame. In addition, the “car” package offers a similar function
called <code>some()</code>, which allows you to show a random n rows of
a data.frame.</p>
<p>labelr provides versions of these functions that will display value
labels in place of values (without actually altering the values in the
underlying data.frame). Let’s demonstrate each of the three standard
functions, followed by its labelr counterpart (Note: the unconventional
rownames, e.g., “T-1,” “N-2,” are unique row identifiers, provided as
aid to help you visually locate a literal row that may appear across
calls.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">head</span>(df, <span class="dv">5</span>) <span class="co"># Base R function utils::head()</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="do">### &gt;     id age gender raceth edu     x1     x2</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="do">### &gt; T-1  1  59      1      4   5 120.25 0.5928</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="do">### &gt; N-2  2  56      1      1   2  67.12 0.9116</span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="do">### &gt; D-3  3  54      1      6   3  79.28 0.6993</span></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="do">### &gt; Q-4  4  46      1      5   4  99.59 0.2243</span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a><span class="do">### &gt; E-5  5  18      1      6   4  90.49 0.0099</span></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a><span class="fu">headl</span>(df, <span class="dv">5</span>) <span class="co"># labelr function headl() (note the &quot;l&quot;)</span></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a><span class="do">### &gt;     id age gender raceth             edu   x1     x2</span></span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a><span class="do">### &gt; T-1  1  59 Female  Asian   Some College+ q100 0.5928</span></span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a><span class="do">### &gt; N-2  2  56 Female  White HSG, No College q020 0.9116</span></span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a><span class="do">### &gt; D-3  3  54 Female  Multi   Some College+ q020 0.6993</span></span>
<span id="cb17-14"><a href="#cb17-14" tabindex="-1"></a><span class="do">### &gt; Q-4  4  46 Female   AIAN   Some College+ q060 0.2243</span></span>
<span id="cb17-15"><a href="#cb17-15" tabindex="-1"></a><span class="do">### &gt; E-5  5  18 Female  Multi   Some College+ q040 0.0099</span></span>
<span id="cb17-16"><a href="#cb17-16" tabindex="-1"></a></span>
<span id="cb17-17"><a href="#cb17-17" tabindex="-1"></a><span class="fu">tail</span>(df, <span class="dv">5</span>) <span class="co"># Base R function utils::tail()</span></span>
<span id="cb17-18"><a href="#cb17-18" tabindex="-1"></a><span class="do">### &gt;          id age gender raceth edu     x1     x2</span></span>
<span id="cb17-19"><a href="#cb17-19" tabindex="-1"></a><span class="do">### &gt; Z-996   996  63      0      1   4  92.36 0.0447</span></span>
<span id="cb17-20"><a href="#cb17-20" tabindex="-1"></a><span class="do">### &gt; S-997   997  18      0      4   4 147.40 0.2252</span></span>
<span id="cb17-21"><a href="#cb17-21" tabindex="-1"></a><span class="do">### &gt; K-998   998  45      0      5   2 106.87 0.1610</span></span>
<span id="cb17-22"><a href="#cb17-22" tabindex="-1"></a><span class="do">### &gt; I-999   999  46      1      4   2 119.13 0.7666</span></span>
<span id="cb17-23"><a href="#cb17-23" tabindex="-1"></a><span class="do">### &gt; H-1000 1000  68      0      6   5  70.38 0.5123</span></span>
<span id="cb17-24"><a href="#cb17-24" tabindex="-1"></a></span>
<span id="cb17-25"><a href="#cb17-25" tabindex="-1"></a><span class="fu">taill</span>(df, <span class="dv">5</span>) <span class="co"># labelr function taill() (note the extra &quot;l&quot;)</span></span>
<span id="cb17-26"><a href="#cb17-26" tabindex="-1"></a><span class="do">### &gt;          id age gender raceth             edu   x1     x2</span></span>
<span id="cb17-27"><a href="#cb17-27" tabindex="-1"></a><span class="do">### &gt; Z-996   996  63   Male  White   Some College+ q040 0.0447</span></span>
<span id="cb17-28"><a href="#cb17-28" tabindex="-1"></a><span class="do">### &gt; S-997   997  18   Male  Asian   Some College+ q100 0.2252</span></span>
<span id="cb17-29"><a href="#cb17-29" tabindex="-1"></a><span class="do">### &gt; K-998   998  45   Male   AIAN HSG, No College q080 0.1610</span></span>
<span id="cb17-30"><a href="#cb17-30" tabindex="-1"></a><span class="do">### &gt; I-999   999  46 Female  Asian HSG, No College q100 0.7666</span></span>
<span id="cb17-31"><a href="#cb17-31" tabindex="-1"></a><span class="do">### &gt; H-1000 1000  68   Male  Multi   Some College+ q020 0.5123</span></span>
<span id="cb17-32"><a href="#cb17-32" tabindex="-1"></a></span>
<span id="cb17-33"><a href="#cb17-33" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">293</span>)</span>
<span id="cb17-34"><a href="#cb17-34" tabindex="-1"></a>car<span class="sc">::</span><span class="fu">some</span>(df, <span class="dv">5</span>) <span class="co"># car package function car::some()</span></span>
<span id="cb17-35"><a href="#cb17-35" tabindex="-1"></a><span class="do">### &gt;        id age gender raceth edu     x1     x2</span></span>
<span id="cb17-36"><a href="#cb17-36" tabindex="-1"></a><span class="do">### &gt; F-181 181  44      1      5   2  87.46 0.0965</span></span>
<span id="cb17-37"><a href="#cb17-37" tabindex="-1"></a><span class="do">### &gt; K-248 248  30      1      2   3 129.62 0.4484</span></span>
<span id="cb17-38"><a href="#cb17-38" tabindex="-1"></a><span class="do">### &gt; N-341 341  19      1      5   2  45.21 0.6074</span></span>
<span id="cb17-39"><a href="#cb17-39" tabindex="-1"></a><span class="do">### &gt; F-457 457  58      1      5   4 124.84 0.9890</span></span>
<span id="cb17-40"><a href="#cb17-40" tabindex="-1"></a><span class="do">### &gt; P-458 458  30      1      7   3  96.22 0.5607</span></span>
<span id="cb17-41"><a href="#cb17-41" tabindex="-1"></a></span>
<span id="cb17-42"><a href="#cb17-42" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">293</span>)</span>
<span id="cb17-43"><a href="#cb17-43" tabindex="-1"></a><span class="fu">somel</span>(df, <span class="dv">5</span>) <span class="co"># labelr function somel() (note the &quot;l&quot;)</span></span>
<span id="cb17-44"><a href="#cb17-44" tabindex="-1"></a><span class="do">### &gt;        id age gender raceth             edu   x1     x2</span></span>
<span id="cb17-45"><a href="#cb17-45" tabindex="-1"></a><span class="do">### &gt; F-181 181  44 Female   AIAN HSG, No College q040 0.0965</span></span>
<span id="cb17-46"><a href="#cb17-46" tabindex="-1"></a><span class="do">### &gt; N-341 341  19 Female   AIAN HSG, No College q020 0.6074</span></span>
<span id="cb17-47"><a href="#cb17-47" tabindex="-1"></a><span class="do">### &gt; P-458 458  30 Female  Other   Some College+ q060 0.5607</span></span>
<span id="cb17-48"><a href="#cb17-48" tabindex="-1"></a><span class="do">### &gt; F-457 457  58 Female   AIAN   Some College+ q100 0.9890</span></span>
<span id="cb17-49"><a href="#cb17-49" tabindex="-1"></a><span class="do">### &gt; K-248 248  30 Female  Black   Some College+ q100 0.4484</span></span></code></pre></div>
<p>Note that <code>some()</code> and <code>somel()</code> both return
random rows, but they will not necessarily return the same random rows,
even with the same random number seed.</p>
</div>
<div id="swap-out-values-for-labels-with-use_val_labs-and-uvl" class="section level3">
<h3>Swap out Values for Labels with <code>use_val_labs()</code> and
<code>uvl()</code></h3>
<p>With <code>use_val_labs()</code>, we can generalize this overlaying
(aka “turning on” aka “swapping in”) of value labels to the entire
data.frame. We might do this temporarily, to visualize the labels in
place of values.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">use_val_labs</span>(df)[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>, ] <span class="co"># headl() is just a more compact shortcut for this</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="do">### &gt;      id age gender   raceth             edu   x1     x2</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="do">### &gt; T-1   1  59 Female    Asian   Some College+ q100 0.5928</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="do">### &gt; N-2   2  56 Female    White HSG, No College q020 0.9116</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="do">### &gt; D-3   3  54 Female    Multi   Some College+ q020 0.6993</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="do">### &gt; Q-4   4  46 Female     AIAN   Some College+ q060 0.2243</span></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="do">### &gt; E-5   5  18 Female    Multi   Some College+ q040 0.0099</span></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a><span class="do">### &gt; K-6   6  45   Male    Black   Some College+ q020 0.9250</span></span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a><span class="do">### &gt; Y-7   7  57   Male    White HSG, No College q060 0.9446</span></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a><span class="do">### &gt; C-8   8  46   Male Hispanic HSG, No College q080 0.4053</span></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="do">### &gt; W-9   9  37 Female    Black   Some College+ q020 0.3998</span></span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a><span class="do">### &gt; A-10 10  12 Female    Other HSG, No College q060 0.5857</span></span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a><span class="do">### &gt; A-11 11  46   Male    Other   Some College+ q020 0.7027</span></span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a><span class="do">### &gt; S-12 12  28   Male Hispanic   Some College+ q020 0.6538</span></span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a><span class="do">### &gt; Z-13 13  15 Female     AIAN   Some College+ q080 0.6267</span></span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a><span class="do">### &gt; H-14 14  39 Female     AIAN   Some College+ q020 0.8989</span></span>
<span id="cb18-17"><a href="#cb18-17" tabindex="-1"></a><span class="do">### &gt; A-15 15  18 Female    White   Some College+ q100 0.2974</span></span>
<span id="cb18-18"><a href="#cb18-18" tabindex="-1"></a><span class="do">### &gt; B-16 16  48   Male    Multi   Some College+ q080 0.2212</span></span>
<span id="cb18-19"><a href="#cb18-19" tabindex="-1"></a><span class="do">### &gt; H-17 17  39   Male     AIAN   Some College+ q060 0.3127</span></span>
<span id="cb18-20"><a href="#cb18-20" tabindex="-1"></a><span class="do">### &gt; F-18 18  52   Male Hispanic   Some College+ q060 0.4350</span></span>
<span id="cb18-21"><a href="#cb18-21" tabindex="-1"></a><span class="do">### &gt; F-19 19  33   Male    Other   Some College+ q100 0.2809</span></span>
<span id="cb18-22"><a href="#cb18-22" tabindex="-1"></a><span class="do">### &gt; A-20 20  29   Male    White   Some College+ q060 0.8188</span></span></code></pre></div>
<p>We can wrap a call to this function around our data.frame and pass to
other functions, which may yield more interpretable output, depending on
the function. Here is an illustration that passes a
<code>use_val_labvs()</code> -wrapped data.frame to the
<code>qsu()</code>function of the collapse package. To save typing,
we’ll use <code>uvl()</code>, a more compact alias for
<code>use_val_labs()</code>.</p>
<p>First we show the unwrapped call to <code>collapse::qsu()</code>,
followed by an otherwise identical call that wraps the data.frame in
<code>uvl()</code>. Focus your eyes on the leftmost column of the
console outputs of the respective calls.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co"># `collapse::qsu()`</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="co"># with labels &quot;off&quot; (i.e., using regular values of &quot;raceth&quot; as by var)</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>(by_demog_val <span class="ot">&lt;-</span> collapse<span class="sc">::</span><span class="fu">qsu</span>(df, <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">&quot;x2&quot;</span>), <span class="at">by =</span> <span class="sc">~</span>raceth))</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="do">### &gt;      N    Mean      SD     Min     Max</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="do">### &gt; 1  156  0.5067  0.2696  0.0018  0.9966</span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a><span class="do">### &gt; 2  147  0.4922  0.2755  0.0041  0.9951</span></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="do">### &gt; 3  144  0.4951   0.299  0.0172  0.9992</span></span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a><span class="do">### &gt; 4  127  0.5461  0.2873   0.006  0.9885</span></span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a><span class="do">### &gt; 5  155  0.5476  0.2995  0.0076   0.994</span></span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a><span class="do">### &gt; 6  140  0.5163  0.2798  0.0099  0.9915</span></span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a><span class="do">### &gt; 7  131  0.5132  0.2786  0.0014  0.9918</span></span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a></span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a><span class="co"># with labels &quot;on&quot; (i.e., using labels, thanks to `uvl()`)</span></span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a>(by_demog_lab <span class="ot">&lt;-</span> collapse<span class="sc">::</span><span class="fu">qsu</span>(<span class="fu">uvl</span>(df), <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">&quot;x2&quot;</span>), <span class="at">by =</span> <span class="sc">~</span>raceth))</span>
<span id="cb19-15"><a href="#cb19-15" tabindex="-1"></a><span class="do">### &gt;             N    Mean      SD     Min     Max</span></span>
<span id="cb19-16"><a href="#cb19-16" tabindex="-1"></a><span class="do">### &gt; AIAN      155  0.5476  0.2995  0.0076   0.994</span></span>
<span id="cb19-17"><a href="#cb19-17" tabindex="-1"></a><span class="do">### &gt; Asian     127  0.5461  0.2873   0.006  0.9885</span></span>
<span id="cb19-18"><a href="#cb19-18" tabindex="-1"></a><span class="do">### &gt; Black     147  0.4922  0.2755  0.0041  0.9951</span></span>
<span id="cb19-19"><a href="#cb19-19" tabindex="-1"></a><span class="do">### &gt; Hispanic  144  0.4951   0.299  0.0172  0.9992</span></span>
<span id="cb19-20"><a href="#cb19-20" tabindex="-1"></a><span class="do">### &gt; Multi     140  0.5163  0.2798  0.0099  0.9915</span></span>
<span id="cb19-21"><a href="#cb19-21" tabindex="-1"></a><span class="do">### &gt; Other     131  0.5132  0.2786  0.0014  0.9918</span></span>
<span id="cb19-22"><a href="#cb19-22" tabindex="-1"></a><span class="do">### &gt; White     156  0.5067  0.2696  0.0018  0.9966</span></span></code></pre></div>
<p>Note that the second call would achieve the same result if we used
<code>use_val_labs()</code>, but <code>uvl()</code> is more compact for
typing and printing purposes.</p>
</div>
<div id="non-standard-evaluation-using-with_val_labs-and-wvn" class="section level3">
<h3>Non-standard Evaluation using <code>with_val_labs()</code> and
<code>wvn</code></h3>
<p>labelr also offers an option to overlay (“swap out”) value labels
using <code>base::with()</code>-like non-standard evaluation. This is
helpful in a few specific cases.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">with</span>(df, <span class="fu">table</span>(gender, raceth)) <span class="co"># base::with()</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="do">### &gt;       raceth</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="do">### &gt; gender  1  2  3  4  5  6  7</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="do">### &gt;      0 83 66 62 65 64 68 61</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a><span class="do">### &gt;      1 70 74 79 56 83 69 64</span></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a><span class="do">### &gt;      2  3  7  3  6  8  3  6</span></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a><span class="fu">with_val_labs</span>(df, <span class="fu">table</span>(gender, raceth)) <span class="co"># labelr::with_val_labs()</span></span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a><span class="do">### &gt;         raceth</span></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a><span class="do">### &gt; gender   AIAN Asian Black Hispanic Multi Other White</span></span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a><span class="do">### &gt;   Female   83    56    74       79    69    64    70</span></span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a><span class="do">### &gt;   Male     64    65    66       62    68    61    83</span></span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a><span class="do">### &gt;   Other     8     6     7        3     3     6     3</span></span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a></span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a><span class="fu">wvl</span>(df, <span class="fu">table</span>(gender, raceth)) <span class="co"># labelr::wvl is a more compact alias</span></span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a><span class="do">### &gt;         raceth</span></span>
<span id="cb20-17"><a href="#cb20-17" tabindex="-1"></a><span class="do">### &gt; gender   AIAN Asian Black Hispanic Multi Other White</span></span>
<span id="cb20-18"><a href="#cb20-18" tabindex="-1"></a><span class="do">### &gt;   Female   83    56    74       79    69    64    70</span></span>
<span id="cb20-19"><a href="#cb20-19" tabindex="-1"></a><span class="do">### &gt;   Male     64    65    66       62    68    61    83</span></span>
<span id="cb20-20"><a href="#cb20-20" tabindex="-1"></a><span class="do">### &gt;   Other     8     6     7        3     3     6     3</span></span>
<span id="cb20-21"><a href="#cb20-21" tabindex="-1"></a></span>
<span id="cb20-22"><a href="#cb20-22" tabindex="-1"></a><span class="fu">with</span>(<span class="fu">use_val_labs</span>(df), <span class="fu">table</span>(gender, raceth)) <span class="co"># this does same thing</span></span>
<span id="cb20-23"><a href="#cb20-23" tabindex="-1"></a><span class="do">### &gt;         raceth</span></span>
<span id="cb20-24"><a href="#cb20-24" tabindex="-1"></a><span class="do">### &gt; gender   AIAN Asian Black Hispanic Multi Other White</span></span>
<span id="cb20-25"><a href="#cb20-25" tabindex="-1"></a><span class="do">### &gt;   Female   83    56    74       79    69    64    70</span></span>
<span id="cb20-26"><a href="#cb20-26" tabindex="-1"></a><span class="do">### &gt;   Male     64    65    66       62    68    61    83</span></span>
<span id="cb20-27"><a href="#cb20-27" tabindex="-1"></a><span class="do">### &gt;   Other     8     6     7        3     3     6     3</span></span></code></pre></div>
<p>In a little bit, we’ll see that we have some parallel options for
overlaying (“turning on”) NAME labels.</p>
</div>
<div id="add-value-labels-back-to-the-data.frame-with-add_lab_cols" class="section level3">
<h3>Add value labels back to the data.frame with
<code>add_lab_cols()</code></h3>
<p>If all this wrapping and interactive toggling back and forth is
making you dizzy, we could do something more permanent.</p>
<p>For example, we can assign the result of a
<code>use_val_labs()</code> call to an object. The result will be a
data.frame with the same names and dimensions as the one supplied, with
value labels replacing values for all value-labeled variables (or for a
subset of those variables, if you specify them). Those variables will
coerced to character (if they were not already). Since there is no
“undo” shortcut for this action, it is safest to assign the result to a
new object.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>df_labd <span class="ot">&lt;-</span> <span class="fu">use_val_labs</span>(df)</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="fu">head</span>(df_labd) <span class="co"># note, this is utils::head(), not labelr::headl()</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="do">### &gt;     id age gender raceth             edu   x1     x2</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="do">### &gt; T-1  1  59 Female  Asian   Some College+ q100 0.5928</span></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a><span class="do">### &gt; N-2  2  56 Female  White HSG, No College q020 0.9116</span></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="do">### &gt; D-3  3  54 Female  Multi   Some College+ q020 0.6993</span></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a><span class="do">### &gt; Q-4  4  46 Female   AIAN   Some College+ q060 0.2243</span></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a><span class="do">### &gt; E-5  5  18 Female  Multi   Some College+ q040 0.0099</span></span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a><span class="do">### &gt; K-6  6  45   Male  Black   Some College+ q020 0.9250</span></span></code></pre></div>
<p>Better still, we do not strictly need to choose between values and
labels. We can use <code>add_lab_cols()</code> to preserve all existing
variables (columns), including the value-labeled ones, while adding to
our data.frame an additional labels-as-values column for each
value-labeled column.</p>
<p>Easier done than said, perhaps. Take a look:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>df_plus_labs <span class="ot">&lt;-</span> <span class="fu">add_lab_cols</span>(df)</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="fu">head</span>(df_plus_labs[<span class="fu">c</span>(<span class="st">&quot;gender&quot;</span>, <span class="st">&quot;gender_lab&quot;</span>, <span class="st">&quot;raceth&quot;</span>, <span class="st">&quot;raceth_lab&quot;</span>)])</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="do">### &gt;     gender gender_lab raceth raceth_lab</span></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="do">### &gt; T-1      1     Female      4      Asian</span></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="do">### &gt; N-2      1     Female      1      White</span></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a><span class="do">### &gt; D-3      1     Female      6      Multi</span></span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a><span class="do">### &gt; Q-4      1     Female      5       AIAN</span></span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a><span class="do">### &gt; E-5      1     Female      6      Multi</span></span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a><span class="do">### &gt; K-6      0       Male      2      Black</span></span></code></pre></div>
</div>
<div id="filter-values-using-labels-with-flab" class="section level3">
<h3>“Filter values using labels” with <code>flab()</code></h3>
<p>We can filter a value-labeled data.frame on the basis for value
labels, returning the subsetted data.frame expressed in terms of the
original values (i.e., with the labels still in the background). For
example, here we use the more semantically meaningful value labels to
filter our data.frame.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="fu">head</span>(df)</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="do">### &gt;     id age gender raceth edu     x1     x2</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="do">### &gt; T-1  1  59      1      4   5 120.25 0.5928</span></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="do">### &gt; N-2  2  56      1      1   2  67.12 0.9116</span></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a><span class="do">### &gt; D-3  3  54      1      6   3  79.28 0.6993</span></span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a><span class="do">### &gt; Q-4  4  46      1      5   4  99.59 0.2243</span></span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a><span class="do">### &gt; E-5  5  18      1      6   4  90.49 0.0099</span></span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a><span class="do">### &gt; K-6  6  45      0      2   4  78.55 0.9250</span></span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">flab</span>(df, raceth <span class="sc">==</span> <span class="st">&quot;Asian&quot;</span> <span class="sc">&amp;</span> gender <span class="sc">==</span> <span class="st">&quot;Female&quot;</span>)</span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a><span class="do">### &gt; Remember: Any filtering conditions involving value-labeled variables must be expressed</span></span>
<span id="cb23-13"><a href="#cb23-13" tabindex="-1"></a><span class="do">### &gt; in terms of the (quoted character) value labels, not the variable values themselves. </span></span>
<span id="cb23-14"><a href="#cb23-14" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb23-15"><a href="#cb23-15" tabindex="-1"></a><span class="do">### &gt; To filter using values (not labels) of value-labeled variables, try, e.g., sfilter().</span></span>
<span id="cb23-16"><a href="#cb23-16" tabindex="-1"></a></span>
<span id="cb23-17"><a href="#cb23-17" tabindex="-1"></a><span class="fu">head</span>(df1, <span class="dv">5</span>) <span class="co"># returned df1 is in terms of values, just like df</span></span>
<span id="cb23-18"><a href="#cb23-18" tabindex="-1"></a><span class="do">### &gt;      id age gender raceth edu     x1     x2</span></span>
<span id="cb23-19"><a href="#cb23-19" tabindex="-1"></a><span class="do">### &gt; T-1   1  59      1      4   5 120.25 0.5928</span></span>
<span id="cb23-20"><a href="#cb23-20" tabindex="-1"></a><span class="do">### &gt; D-40 40  60      1      4   4  78.12 0.9885</span></span>
<span id="cb23-21"><a href="#cb23-21" tabindex="-1"></a><span class="do">### &gt; E-67 67  39      1      4   5  98.21 0.6244</span></span>
<span id="cb23-22"><a href="#cb23-22" tabindex="-1"></a><span class="do">### &gt; I-73 73  36      1      4   2  98.42 0.2102</span></span>
<span id="cb23-23"><a href="#cb23-23" tabindex="-1"></a><span class="do">### &gt; V-80 80  27      1      4   4 122.62 0.3137</span></span>
<span id="cb23-24"><a href="#cb23-24" tabindex="-1"></a></span>
<span id="cb23-25"><a href="#cb23-25" tabindex="-1"></a><span class="fu">headl</span>(df1, <span class="dv">5</span>) <span class="co"># note use of labelr::headl; labels are there</span></span>
<span id="cb23-26"><a href="#cb23-26" tabindex="-1"></a><span class="do">### &gt;      id age gender raceth             edu   x1     x2</span></span>
<span id="cb23-27"><a href="#cb23-27" tabindex="-1"></a><span class="do">### &gt; T-1   1  59 Female  Asian   Some College+ q100 0.5928</span></span>
<span id="cb23-28"><a href="#cb23-28" tabindex="-1"></a><span class="do">### &gt; D-40 40  60 Female  Asian   Some College+ q020 0.9885</span></span>
<span id="cb23-29"><a href="#cb23-29" tabindex="-1"></a><span class="do">### &gt; E-67 67  39 Female  Asian   Some College+ q060 0.6244</span></span>
<span id="cb23-30"><a href="#cb23-30" tabindex="-1"></a><span class="do">### &gt; I-73 73  36 Female  Asian HSG, No College q060 0.2102</span></span>
<span id="cb23-31"><a href="#cb23-31" tabindex="-1"></a><span class="do">### &gt; V-80 80  27 Female  Asian   Some College+ q100 0.3137</span></span></code></pre></div>
</div>
<div id="subset-using-labels-with-slab" class="section level3">
<h3>“Subset using labels” with <code>slab()</code></h3>
<p>As with <code>base::subset()</code>, we can also limit which columns
we return.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">slab</span>(df, raceth <span class="sc">==</span> <span class="st">&quot;Black&quot;</span> <span class="sc">&amp;</span> gender <span class="sc">==</span> <span class="st">&quot;Male&quot;</span>, gender, raceth), <span class="dv">10</span>)</span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a><span class="do">### &gt; Remember: Any slab() filtering conditions involving value-labeled variables must be expressed</span></span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a><span class="do">### &gt; in terms of the (quoted character) value labels, not the variable values themselves. </span></span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a><span class="do">### &gt; To filter using values (not labels) of value-labeled variables, try, e.g., ssubset().</span></span>
<span id="cb24-7"><a href="#cb24-7" tabindex="-1"></a><span class="do">### &gt;       gender raceth</span></span>
<span id="cb24-8"><a href="#cb24-8" tabindex="-1"></a><span class="do">### &gt; K-6        0      2</span></span>
<span id="cb24-9"><a href="#cb24-9" tabindex="-1"></a><span class="do">### &gt; F-22       0      2</span></span>
<span id="cb24-10"><a href="#cb24-10" tabindex="-1"></a><span class="do">### &gt; E-30       0      2</span></span>
<span id="cb24-11"><a href="#cb24-11" tabindex="-1"></a><span class="do">### &gt; O-46       0      2</span></span>
<span id="cb24-12"><a href="#cb24-12" tabindex="-1"></a><span class="do">### &gt; Q-48       0      2</span></span>
<span id="cb24-13"><a href="#cb24-13" tabindex="-1"></a><span class="do">### &gt; F-72       0      2</span></span>
<span id="cb24-14"><a href="#cb24-14" tabindex="-1"></a><span class="do">### &gt; T-117      0      2</span></span>
<span id="cb24-15"><a href="#cb24-15" tabindex="-1"></a><span class="do">### &gt; K-149      0      2</span></span>
<span id="cb24-16"><a href="#cb24-16" tabindex="-1"></a><span class="do">### &gt; M-161      0      2</span></span>
<span id="cb24-17"><a href="#cb24-17" tabindex="-1"></a><span class="do">### &gt; A-167      0      2</span></span></code></pre></div>
<p>In the case of <code>slab()</code>, we simply list the desired
columns – unquoted and comma-separated – after the filter</p>
</div>
<div id="tabulate-frequencies-with-tabl" class="section level3">
<h3>Tabulate frequencies with <code>tabl()</code></h3>
<p>labelr’s <code>tabl()</code> function supports count tabulations with
labels turned “on” or “off” and offers some other functionalities. For
example, tables can be generated…</p>
<p>…in terms of values</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">tabl</span>(df), <span class="dv">20</span>) <span class="co"># labs.on = FALSE is default</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="do">### &gt; Excluding variable --id-- (includes decimals or exceeds max.unique.vals).</span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a><span class="do">### &gt; Excluding variable --age-- (includes decimals or exceeds max.unique.vals).</span></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a><span class="do">### &gt; Excluding variable --x1-- (includes decimals or exceeds max.unique.vals).</span></span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a><span class="do">### &gt; Excluding variable --x2-- (includes decimals or exceeds max.unique.vals).</span></span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a><span class="do">### &gt; Note: To filter zero-frequency rows (i.e., un-observed value combinations)</span></span>
<span id="cb25-12"><a href="#cb25-12" tabindex="-1"></a><span class="do">### &gt; set zero.rm = TRUE.</span></span>
<span id="cb25-13"><a href="#cb25-13" tabindex="-1"></a><span class="do">### &gt;    gender raceth edu  n</span></span>
<span id="cb25-14"><a href="#cb25-14" tabindex="-1"></a><span class="do">### &gt; 1       1      2   2 29</span></span>
<span id="cb25-15"><a href="#cb25-15" tabindex="-1"></a><span class="do">### &gt; 2       0      1   3 28</span></span>
<span id="cb25-16"><a href="#cb25-16" tabindex="-1"></a><span class="do">### &gt; 3       1      1   2 28</span></span>
<span id="cb25-17"><a href="#cb25-17" tabindex="-1"></a><span class="do">### &gt; 4       1      5   2 27</span></span>
<span id="cb25-18"><a href="#cb25-18" tabindex="-1"></a><span class="do">### &gt; 5       1      5   3 26</span></span>
<span id="cb25-19"><a href="#cb25-19" tabindex="-1"></a><span class="do">### &gt; 6       1      6   2 26</span></span>
<span id="cb25-20"><a href="#cb25-20" tabindex="-1"></a><span class="do">### &gt; 7       1      7   2 25</span></span>
<span id="cb25-21"><a href="#cb25-21" tabindex="-1"></a><span class="do">### &gt; 8       1      3   3 24</span></span>
<span id="cb25-22"><a href="#cb25-22" tabindex="-1"></a><span class="do">### &gt; 9       0      2   3 23</span></span>
<span id="cb25-23"><a href="#cb25-23" tabindex="-1"></a><span class="do">### &gt; 10      0      4   2 23</span></span>
<span id="cb25-24"><a href="#cb25-24" tabindex="-1"></a><span class="do">### &gt; 11      0      5   2 23</span></span>
<span id="cb25-25"><a href="#cb25-25" tabindex="-1"></a><span class="do">### &gt; 12      0      1   2 22</span></span>
<span id="cb25-26"><a href="#cb25-26" tabindex="-1"></a><span class="do">### &gt; 13      0      3   3 22</span></span>
<span id="cb25-27"><a href="#cb25-27" tabindex="-1"></a><span class="do">### &gt; 14      0      6   3 22</span></span>
<span id="cb25-28"><a href="#cb25-28" tabindex="-1"></a><span class="do">### &gt; 15      1      3   4 22</span></span>
<span id="cb25-29"><a href="#cb25-29" tabindex="-1"></a><span class="do">### &gt; 16      0      1   4 21</span></span>
<span id="cb25-30"><a href="#cb25-30" tabindex="-1"></a><span class="do">### &gt; 17      0      2   2 21</span></span>
<span id="cb25-31"><a href="#cb25-31" tabindex="-1"></a><span class="do">### &gt; 18      1      2   3 21</span></span>
<span id="cb25-32"><a href="#cb25-32" tabindex="-1"></a><span class="do">### &gt; 19      1      3   2 21</span></span>
<span id="cb25-33"><a href="#cb25-33" tabindex="-1"></a><span class="do">### &gt; 20      0      6   2 20</span></span></code></pre></div>
<p>…or in terms of labels</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">tabl</span>(df, <span class="at">labs.on =</span> <span class="cn">TRUE</span>), <span class="dv">20</span>) <span class="co"># labs.on = TRUE is not the default</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a><span class="do">### &gt; Excluding variable --id-- (includes decimals or exceeds max.unique.vals).</span></span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a><span class="do">### &gt; Excluding variable --age-- (includes decimals or exceeds max.unique.vals).</span></span>
<span id="cb26-6"><a href="#cb26-6" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb26-7"><a href="#cb26-7" tabindex="-1"></a><span class="do">### &gt; Excluding variable --x2-- (includes decimals or exceeds max.unique.vals).</span></span>
<span id="cb26-8"><a href="#cb26-8" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb26-9"><a href="#cb26-9" tabindex="-1"></a><span class="do">### &gt; Note: To filter zero-frequency rows (i.e., un-observed value combinations)</span></span>
<span id="cb26-10"><a href="#cb26-10" tabindex="-1"></a><span class="do">### &gt; set zero.rm = TRUE.</span></span>
<span id="cb26-11"><a href="#cb26-11" tabindex="-1"></a><span class="do">### &gt;    gender   raceth           edu   x1  n</span></span>
<span id="cb26-12"><a href="#cb26-12" tabindex="-1"></a><span class="do">### &gt; 1    Male    Other Some College+ q020 18</span></span>
<span id="cb26-13"><a href="#cb26-13" tabindex="-1"></a><span class="do">### &gt; 2    Male    White Some College+ q020 14</span></span>
<span id="cb26-14"><a href="#cb26-14" tabindex="-1"></a><span class="do">### &gt; 3    Male    White Some College+ q060 14</span></span>
<span id="cb26-15"><a href="#cb26-15" tabindex="-1"></a><span class="do">### &gt; 4  Female     AIAN Some College+ q020 13</span></span>
<span id="cb26-16"><a href="#cb26-16" tabindex="-1"></a><span class="do">### &gt; 5  Female     AIAN Some College+ q060 13</span></span>
<span id="cb26-17"><a href="#cb26-17" tabindex="-1"></a><span class="do">### &gt; 6  Female Hispanic Some College+ q040 13</span></span>
<span id="cb26-18"><a href="#cb26-18" tabindex="-1"></a><span class="do">### &gt; 7  Female Hispanic Some College+ q100 13</span></span>
<span id="cb26-19"><a href="#cb26-19" tabindex="-1"></a><span class="do">### &gt; 8    Male     AIAN Some College+ q040 13</span></span>
<span id="cb26-20"><a href="#cb26-20" tabindex="-1"></a><span class="do">### &gt; 9  Female     AIAN Some College+ q080 12</span></span>
<span id="cb26-21"><a href="#cb26-21" tabindex="-1"></a><span class="do">### &gt; 10 Female    Asian Some College+ q080 12</span></span>
<span id="cb26-22"><a href="#cb26-22" tabindex="-1"></a><span class="do">### &gt; 11 Female    Black Some College+ q060 12</span></span>
<span id="cb26-23"><a href="#cb26-23" tabindex="-1"></a><span class="do">### &gt; 12   Male    Multi Some College+ q020 12</span></span>
<span id="cb26-24"><a href="#cb26-24" tabindex="-1"></a><span class="do">### &gt; 13   Male    Multi Some College+ q100 12</span></span>
<span id="cb26-25"><a href="#cb26-25" tabindex="-1"></a><span class="do">### &gt; 14   Male    White Some College+ q080 12</span></span>
<span id="cb26-26"><a href="#cb26-26" tabindex="-1"></a><span class="do">### &gt; 15 Female Hispanic Some College+ q020 11</span></span>
<span id="cb26-27"><a href="#cb26-27" tabindex="-1"></a><span class="do">### &gt; 16 Female    White Some College+ q080 11</span></span>
<span id="cb26-28"><a href="#cb26-28" tabindex="-1"></a><span class="do">### &gt; 17   Male    Asian Some College+ q040 11</span></span>
<span id="cb26-29"><a href="#cb26-29" tabindex="-1"></a><span class="do">### &gt; 18   Male    Black Some College+ q040 11</span></span>
<span id="cb26-30"><a href="#cb26-30" tabindex="-1"></a><span class="do">### &gt; 19   Male Hispanic Some College+ q100 11</span></span>
<span id="cb26-31"><a href="#cb26-31" tabindex="-1"></a><span class="do">### &gt; 20 Female     AIAN Some College+ q040 10</span></span></code></pre></div>
<p>…in proportions</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">tabl</span>(df, <span class="at">labs.on =</span> <span class="cn">TRUE</span>, <span class="at">prop.digits =</span> <span class="dv">3</span>), <span class="dv">20</span>)</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a><span class="do">### &gt; Excluding variable --id-- (includes decimals or exceeds max.unique.vals).</span></span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a><span class="do">### &gt; Excluding variable --age-- (includes decimals or exceeds max.unique.vals).</span></span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb27-7"><a href="#cb27-7" tabindex="-1"></a><span class="do">### &gt; Excluding variable --x2-- (includes decimals or exceeds max.unique.vals).</span></span>
<span id="cb27-8"><a href="#cb27-8" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb27-9"><a href="#cb27-9" tabindex="-1"></a><span class="do">### &gt; Note: To filter zero-frequency rows (i.e., un-observed value combinations)</span></span>
<span id="cb27-10"><a href="#cb27-10" tabindex="-1"></a><span class="do">### &gt; set zero.rm = TRUE.</span></span>
<span id="cb27-11"><a href="#cb27-11" tabindex="-1"></a><span class="do">### &gt;    gender   raceth           edu   x1     n</span></span>
<span id="cb27-12"><a href="#cb27-12" tabindex="-1"></a><span class="do">### &gt; 1    Male    Other Some College+ q020 0.018</span></span>
<span id="cb27-13"><a href="#cb27-13" tabindex="-1"></a><span class="do">### &gt; 2    Male    White Some College+ q020 0.014</span></span>
<span id="cb27-14"><a href="#cb27-14" tabindex="-1"></a><span class="do">### &gt; 3    Male    White Some College+ q060 0.014</span></span>
<span id="cb27-15"><a href="#cb27-15" tabindex="-1"></a><span class="do">### &gt; 4  Female     AIAN Some College+ q020 0.013</span></span>
<span id="cb27-16"><a href="#cb27-16" tabindex="-1"></a><span class="do">### &gt; 5  Female     AIAN Some College+ q060 0.013</span></span>
<span id="cb27-17"><a href="#cb27-17" tabindex="-1"></a><span class="do">### &gt; 6  Female Hispanic Some College+ q040 0.013</span></span>
<span id="cb27-18"><a href="#cb27-18" tabindex="-1"></a><span class="do">### &gt; 7  Female Hispanic Some College+ q100 0.013</span></span>
<span id="cb27-19"><a href="#cb27-19" tabindex="-1"></a><span class="do">### &gt; 8    Male     AIAN Some College+ q040 0.013</span></span>
<span id="cb27-20"><a href="#cb27-20" tabindex="-1"></a><span class="do">### &gt; 9  Female     AIAN Some College+ q080 0.012</span></span>
<span id="cb27-21"><a href="#cb27-21" tabindex="-1"></a><span class="do">### &gt; 10 Female    Asian Some College+ q080 0.012</span></span>
<span id="cb27-22"><a href="#cb27-22" tabindex="-1"></a><span class="do">### &gt; 11 Female    Black Some College+ q060 0.012</span></span>
<span id="cb27-23"><a href="#cb27-23" tabindex="-1"></a><span class="do">### &gt; 12   Male    Multi Some College+ q020 0.012</span></span>
<span id="cb27-24"><a href="#cb27-24" tabindex="-1"></a><span class="do">### &gt; 13   Male    Multi Some College+ q100 0.012</span></span>
<span id="cb27-25"><a href="#cb27-25" tabindex="-1"></a><span class="do">### &gt; 14   Male    White Some College+ q080 0.012</span></span>
<span id="cb27-26"><a href="#cb27-26" tabindex="-1"></a><span class="do">### &gt; 15 Female Hispanic Some College+ q020 0.011</span></span>
<span id="cb27-27"><a href="#cb27-27" tabindex="-1"></a><span class="do">### &gt; 16 Female    White Some College+ q080 0.011</span></span>
<span id="cb27-28"><a href="#cb27-28" tabindex="-1"></a><span class="do">### &gt; 17   Male    Asian Some College+ q040 0.011</span></span>
<span id="cb27-29"><a href="#cb27-29" tabindex="-1"></a><span class="do">### &gt; 18   Male    Black Some College+ q040 0.011</span></span>
<span id="cb27-30"><a href="#cb27-30" tabindex="-1"></a><span class="do">### &gt; 19   Male Hispanic Some College+ q100 0.011</span></span>
<span id="cb27-31"><a href="#cb27-31" tabindex="-1"></a><span class="do">### &gt; 20 Female     AIAN Some College+ q040 0.010</span></span></code></pre></div>
<p>…cross-tab style</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">tabl</span>(df, <span class="at">labs.on =</span> <span class="cn">TRUE</span>, <span class="at">wide.col =</span> <span class="st">&quot;gender&quot;</span>), <span class="dv">20</span>)</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a><span class="do">### &gt; Excluding variable --id-- (includes decimals or exceeds max.unique.vals).</span></span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a><span class="do">### &gt; Excluding variable --age-- (includes decimals or exceeds max.unique.vals).</span></span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a><span class="do">### &gt; Excluding variable --x2-- (includes decimals or exceeds max.unique.vals).</span></span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb28-9"><a href="#cb28-9" tabindex="-1"></a><span class="do">### &gt; Note: To filter zero-frequency rows (i.e., un-observed value combinations)</span></span>
<span id="cb28-10"><a href="#cb28-10" tabindex="-1"></a><span class="do">### &gt; set zero.rm = TRUE.</span></span>
<span id="cb28-11"><a href="#cb28-11" tabindex="-1"></a><span class="do">### &gt;      raceth           edu   x1 Male Female Other</span></span>
<span id="cb28-12"><a href="#cb28-12" tabindex="-1"></a><span class="do">### &gt; 1     Other Some College+ q020   18      5     1</span></span>
<span id="cb28-13"><a href="#cb28-13" tabindex="-1"></a><span class="do">### &gt; 2     White Some College+ q020   14      5     0</span></span>
<span id="cb28-14"><a href="#cb28-14" tabindex="-1"></a><span class="do">### &gt; 3     White Some College+ q060   14      5     2</span></span>
<span id="cb28-15"><a href="#cb28-15" tabindex="-1"></a><span class="do">### &gt; 4      AIAN Some College+ q020    6     13     1</span></span>
<span id="cb28-16"><a href="#cb28-16" tabindex="-1"></a><span class="do">### &gt; 5      AIAN Some College+ q060    8     13     0</span></span>
<span id="cb28-17"><a href="#cb28-17" tabindex="-1"></a><span class="do">### &gt; 6  Hispanic Some College+ q040    8     13     0</span></span>
<span id="cb28-18"><a href="#cb28-18" tabindex="-1"></a><span class="do">### &gt; 7  Hispanic Some College+ q100   11     13     0</span></span>
<span id="cb28-19"><a href="#cb28-19" tabindex="-1"></a><span class="do">### &gt; 8      AIAN Some College+ q040   13     10     1</span></span>
<span id="cb28-20"><a href="#cb28-20" tabindex="-1"></a><span class="do">### &gt; 9      AIAN Some College+ q080    4     12     3</span></span>
<span id="cb28-21"><a href="#cb28-21" tabindex="-1"></a><span class="do">### &gt; 10    Asian Some College+ q080    5     12     0</span></span>
<span id="cb28-22"><a href="#cb28-22" tabindex="-1"></a><span class="do">### &gt; 11    Black Some College+ q060    9     12     1</span></span>
<span id="cb28-23"><a href="#cb28-23" tabindex="-1"></a><span class="do">### &gt; 12    Multi Some College+ q020   12     10     1</span></span>
<span id="cb28-24"><a href="#cb28-24" tabindex="-1"></a><span class="do">### &gt; 13    Multi Some College+ q100   12     10     0</span></span>
<span id="cb28-25"><a href="#cb28-25" tabindex="-1"></a><span class="do">### &gt; 14    White Some College+ q080   12     11     0</span></span>
<span id="cb28-26"><a href="#cb28-26" tabindex="-1"></a><span class="do">### &gt; 15 Hispanic Some College+ q020    8     11     2</span></span>
<span id="cb28-27"><a href="#cb28-27" tabindex="-1"></a><span class="do">### &gt; 16    Asian Some College+ q040   11      6     0</span></span>
<span id="cb28-28"><a href="#cb28-28" tabindex="-1"></a><span class="do">### &gt; 17    Black Some College+ q040   11      6     1</span></span>
<span id="cb28-29"><a href="#cb28-29" tabindex="-1"></a><span class="do">### &gt; 18    Black Some College+ q020    9     10     2</span></span>
<span id="cb28-30"><a href="#cb28-30" tabindex="-1"></a><span class="do">### &gt; 19 Hispanic Some College+ q060   10     10     1</span></span>
<span id="cb28-31"><a href="#cb28-31" tabindex="-1"></a><span class="do">### &gt; 20 Hispanic Some College+ q080    5     10     0</span></span></code></pre></div>
<p>…with non-value-labeled data.frames</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="fu">tabl</span>(iris, <span class="st">&quot;Species&quot;</span>) <span class="co"># explicit vars arg with one-var (&quot;Species&quot;)</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a><span class="do">### &gt; Note: To filter zero-frequency rows (i.e., un-observed value combinations)</span></span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a><span class="do">### &gt; set zero.rm = TRUE.</span></span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a><span class="do">### &gt;      Species  n</span></span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a><span class="do">### &gt; 1     setosa 50</span></span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a><span class="do">### &gt; 2 versicolor 50</span></span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a><span class="do">### &gt; 3  virginica 50</span></span>
<span id="cb29-9"><a href="#cb29-9" tabindex="-1"></a></span>
<span id="cb29-10"><a href="#cb29-10" tabindex="-1"></a><span class="fu">tabl</span>(mtcars, <span class="at">zero.rm =</span> <span class="cn">TRUE</span>) <span class="co"># vars arg null</span></span>
<span id="cb29-11"><a href="#cb29-11" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb29-12"><a href="#cb29-12" tabindex="-1"></a><span class="do">### &gt; Excluding variable --mpg-- (includes decimals or exceeds max.unique.vals).</span></span>
<span id="cb29-13"><a href="#cb29-13" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb29-14"><a href="#cb29-14" tabindex="-1"></a><span class="do">### &gt; Excluding variable --disp-- (includes decimals or exceeds max.unique.vals).</span></span>
<span id="cb29-15"><a href="#cb29-15" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb29-16"><a href="#cb29-16" tabindex="-1"></a><span class="do">### &gt; Excluding variable --hp-- (includes decimals or exceeds max.unique.vals).</span></span>
<span id="cb29-17"><a href="#cb29-17" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb29-18"><a href="#cb29-18" tabindex="-1"></a><span class="do">### &gt; Excluding variable --drat-- (includes decimals or exceeds max.unique.vals).</span></span>
<span id="cb29-19"><a href="#cb29-19" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb29-20"><a href="#cb29-20" tabindex="-1"></a><span class="do">### &gt; Excluding variable --wt-- (includes decimals or exceeds max.unique.vals).</span></span>
<span id="cb29-21"><a href="#cb29-21" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb29-22"><a href="#cb29-22" tabindex="-1"></a><span class="do">### &gt; Excluding variable --qsec-- (includes decimals or exceeds max.unique.vals).</span></span>
<span id="cb29-23"><a href="#cb29-23" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb29-24"><a href="#cb29-24" tabindex="-1"></a><span class="do">### &gt; Note: Zero-frequency tables rows (i.e., un-observed value combinations) exist</span></span>
<span id="cb29-25"><a href="#cb29-25" tabindex="-1"></a><span class="do">### &gt; but have been dropped. To include them, set zero.rm = FALSE.</span></span>
<span id="cb29-26"><a href="#cb29-26" tabindex="-1"></a><span class="do">### &gt;    cyl vs am gear carb n</span></span>
<span id="cb29-27"><a href="#cb29-27" tabindex="-1"></a><span class="do">### &gt; 1    8  0  0    3    4 5</span></span>
<span id="cb29-28"><a href="#cb29-28" tabindex="-1"></a><span class="do">### &gt; 2    4  1  1    4    1 4</span></span>
<span id="cb29-29"><a href="#cb29-29" tabindex="-1"></a><span class="do">### &gt; 3    8  0  0    3    2 4</span></span>
<span id="cb29-30"><a href="#cb29-30" tabindex="-1"></a><span class="do">### &gt; 4    8  0  0    3    3 3</span></span>
<span id="cb29-31"><a href="#cb29-31" tabindex="-1"></a><span class="do">### &gt; 5    4  1  0    4    2 2</span></span>
<span id="cb29-32"><a href="#cb29-32" tabindex="-1"></a><span class="do">### &gt; 6    4  1  1    4    2 2</span></span>
<span id="cb29-33"><a href="#cb29-33" tabindex="-1"></a><span class="do">### &gt; 7    6  0  1    4    4 2</span></span>
<span id="cb29-34"><a href="#cb29-34" tabindex="-1"></a><span class="do">### &gt; 8    6  1  0    3    1 2</span></span>
<span id="cb29-35"><a href="#cb29-35" tabindex="-1"></a><span class="do">### &gt; 9    6  1  0    4    4 2</span></span>
<span id="cb29-36"><a href="#cb29-36" tabindex="-1"></a><span class="do">### &gt; 10   4  0  1    5    2 1</span></span>
<span id="cb29-37"><a href="#cb29-37" tabindex="-1"></a><span class="do">### &gt; 11   4  1  0    3    1 1</span></span>
<span id="cb29-38"><a href="#cb29-38" tabindex="-1"></a><span class="do">### &gt; 12   4  1  1    5    2 1</span></span>
<span id="cb29-39"><a href="#cb29-39" tabindex="-1"></a><span class="do">### &gt; 13   6  0  1    5    6 1</span></span>
<span id="cb29-40"><a href="#cb29-40" tabindex="-1"></a><span class="do">### &gt; 14   8  0  1    5    4 1</span></span>
<span id="cb29-41"><a href="#cb29-41" tabindex="-1"></a><span class="do">### &gt; 15   8  0  1    5    8 1</span></span></code></pre></div>
</div>
</div>
<div id="using-name-labels" class="section level2">
<h2>“Using” NAME labels</h2>
<p>Just as we used <code>use_val_labs()</code> to swap out values for
value labels, we can use <code>use_name_labs()</code> to swap out
variable names for variable NAME labels. Let’s illustrate this with the
mtcars data.frame.</p>
<p>First we’ll construct a vector of named labels.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a>names_labs_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a>  <span class="st">&quot;mpg&quot;</span> <span class="ot">=</span> <span class="st">&quot;Miles/(US) gallon&quot;</span>,</span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a>  <span class="st">&quot;cyl&quot;</span> <span class="ot">=</span> <span class="st">&quot;Number of cylinders&quot;</span>,</span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a>  <span class="st">&quot;disp&quot;</span> <span class="ot">=</span> <span class="st">&quot;Displacement (cu.in.)&quot;</span>,</span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a>  <span class="st">&quot;hp&quot;</span> <span class="ot">=</span> <span class="st">&quot;Gross horsepower&quot;</span>,</span>
<span id="cb30-6"><a href="#cb30-6" tabindex="-1"></a>  <span class="st">&quot;drat&quot;</span> <span class="ot">=</span> <span class="st">&quot;Rear axle ratio&quot;</span>,</span>
<span id="cb30-7"><a href="#cb30-7" tabindex="-1"></a>  <span class="st">&quot;wt&quot;</span> <span class="ot">=</span> <span class="st">&quot;Weight (1000 lbs)&quot;</span>,</span>
<span id="cb30-8"><a href="#cb30-8" tabindex="-1"></a>  <span class="st">&quot;qsec&quot;</span> <span class="ot">=</span> <span class="st">&quot;1/4 mile time&quot;</span>,</span>
<span id="cb30-9"><a href="#cb30-9" tabindex="-1"></a>  <span class="st">&quot;vs&quot;</span> <span class="ot">=</span> <span class="st">&quot;Engine (0 = V-shaped, 1 = straight)&quot;</span>,</span>
<span id="cb30-10"><a href="#cb30-10" tabindex="-1"></a>  <span class="st">&quot;am&quot;</span> <span class="ot">=</span> <span class="st">&quot;Transmission (0 = automatic, 1 = manual)&quot;</span>,</span>
<span id="cb30-11"><a href="#cb30-11" tabindex="-1"></a>  <span class="st">&quot;gear&quot;</span> <span class="ot">=</span> <span class="st">&quot;Number of forward gears&quot;</span>,</span>
<span id="cb30-12"><a href="#cb30-12" tabindex="-1"></a>  <span class="st">&quot;carb&quot;</span> <span class="ot">=</span> <span class="st">&quot;Number of carburetors&quot;</span></span>
<span id="cb30-13"><a href="#cb30-13" tabindex="-1"></a>)</span></code></pre></div>
<p>Now, we will apply them to mtcars and assign the resulting data.frame
to a new data.frame called mt2.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a>mt2 <span class="ot">&lt;-</span> <span class="fu">add_name_labs</span>(mtcars,</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a>  <span class="at">vars =</span> <span class="fu">names</span>(names_labs_vec),</span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a>  <span class="at">labs =</span> names_labs_vec</span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a>)</span></code></pre></div>
<p>Here is an alternative syntax (same end state)</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a>mt2 <span class="ot">&lt;-</span> <span class="fu">add_name_labs</span>(mtcars,</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a>  <span class="at">name.labs =</span> <span class="fu">c</span>(</span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a>    <span class="st">&quot;mpg&quot;</span> <span class="ot">=</span> <span class="st">&quot;Miles/(US) gallon&quot;</span>,</span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a>    <span class="st">&quot;cyl&quot;</span> <span class="ot">=</span> <span class="st">&quot;Number of cylinders&quot;</span>,</span>
<span id="cb32-5"><a href="#cb32-5" tabindex="-1"></a>    <span class="st">&quot;disp&quot;</span> <span class="ot">=</span> <span class="st">&quot;Displacement (cu.in.)&quot;</span>,</span>
<span id="cb32-6"><a href="#cb32-6" tabindex="-1"></a>    <span class="st">&quot;hp&quot;</span> <span class="ot">=</span> <span class="st">&quot;Gross horsepower&quot;</span>,</span>
<span id="cb32-7"><a href="#cb32-7" tabindex="-1"></a>    <span class="st">&quot;drat&quot;</span> <span class="ot">=</span> <span class="st">&quot;Rear axle ratio&quot;</span>,</span>
<span id="cb32-8"><a href="#cb32-8" tabindex="-1"></a>    <span class="st">&quot;wt&quot;</span> <span class="ot">=</span> <span class="st">&quot;Weight (1000 lbs)&quot;</span>,</span>
<span id="cb32-9"><a href="#cb32-9" tabindex="-1"></a>    <span class="st">&quot;qsec&quot;</span> <span class="ot">=</span> <span class="st">&quot;1/4 mile time&quot;</span>,</span>
<span id="cb32-10"><a href="#cb32-10" tabindex="-1"></a>    <span class="st">&quot;vs&quot;</span> <span class="ot">=</span> <span class="st">&quot;Engine (0 = V-shaped, 1 = straight)&quot;</span>,</span>
<span id="cb32-11"><a href="#cb32-11" tabindex="-1"></a>    <span class="st">&quot;am&quot;</span> <span class="ot">=</span> <span class="st">&quot;Transmission (0 = automatic, 1 = manual)&quot;</span>,</span>
<span id="cb32-12"><a href="#cb32-12" tabindex="-1"></a>    <span class="st">&quot;gear&quot;</span> <span class="ot">=</span> <span class="st">&quot;Number of forward gears&quot;</span>,</span>
<span id="cb32-13"><a href="#cb32-13" tabindex="-1"></a>    <span class="st">&quot;carb&quot;</span> <span class="ot">=</span> <span class="st">&quot;Number of carburetors&quot;</span></span>
<span id="cb32-14"><a href="#cb32-14" tabindex="-1"></a>  )</span>
<span id="cb32-15"><a href="#cb32-15" tabindex="-1"></a>)</span></code></pre></div>
<p>Now, let’s swap out names for NAME labels.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a>mt2 <span class="ot">&lt;-</span> <span class="fu">use_name_labs</span>(mt2)</span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a><span class="fu">head</span>(mt2[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)])</span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a><span class="do">### &gt;                   Miles/(US) gallon Number of cylinders</span></span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a><span class="do">### &gt; Mazda RX4                      21.0                   6</span></span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a><span class="do">### &gt; Mazda RX4 Wag                  21.0                   6</span></span>
<span id="cb33-7"><a href="#cb33-7" tabindex="-1"></a><span class="do">### &gt; Datsun 710                     22.8                   4</span></span>
<span id="cb33-8"><a href="#cb33-8" tabindex="-1"></a><span class="do">### &gt; Hornet 4 Drive                 21.4                   6</span></span>
<span id="cb33-9"><a href="#cb33-9" tabindex="-1"></a><span class="do">### &gt; Hornet Sportabout              18.7                   8</span></span>
<span id="cb33-10"><a href="#cb33-10" tabindex="-1"></a><span class="do">### &gt; Valiant                        18.1                   6</span></span></code></pre></div>
<p>Yikes, the longer column names stretch things out quite a bit.</p>
<p>One thing we can do is use <code>get_name_labs</code> to get a
look-up table, then use copy-and-paste to work with these. For
example:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="fu">lm</span>(<span class="st">`</span><span class="at">Miles/(US) gallon</span><span class="st">`</span> <span class="sc">~</span> <span class="st">`</span><span class="at">Number of cylinders</span><span class="st">`</span>, <span class="at">data =</span> mt2) <span class="co"># pasting in var names</span></span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a><span class="do">### &gt; Call:</span></span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a><span class="do">### &gt; lm(formula = `Miles/(US) gallon` ~ `Number of cylinders`, data = mt2)</span></span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb34-6"><a href="#cb34-6" tabindex="-1"></a><span class="do">### &gt; Coefficients:</span></span>
<span id="cb34-7"><a href="#cb34-7" tabindex="-1"></a><span class="do">### &gt;           (Intercept)  `Number of cylinders`  </span></span>
<span id="cb34-8"><a href="#cb34-8" tabindex="-1"></a><span class="do">### &gt;                37.885                 -2.876</span></span>
<span id="cb34-9"><a href="#cb34-9" tabindex="-1"></a><span class="fu">lm</span>(mpg <span class="sc">~</span> cyl, <span class="at">data =</span> <span class="fu">use_var_names</span>(mt2)) <span class="co"># same result if name labels are &quot;off&quot;</span></span>
<span id="cb34-10"><a href="#cb34-10" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb34-11"><a href="#cb34-11" tabindex="-1"></a><span class="do">### &gt; Call:</span></span>
<span id="cb34-12"><a href="#cb34-12" tabindex="-1"></a><span class="do">### &gt; lm(formula = mpg ~ cyl, data = use_var_names(mt2))</span></span>
<span id="cb34-13"><a href="#cb34-13" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb34-14"><a href="#cb34-14" tabindex="-1"></a><span class="do">### &gt; Coefficients:</span></span>
<span id="cb34-15"><a href="#cb34-15" tabindex="-1"></a><span class="do">### &gt; (Intercept)          cyl  </span></span>
<span id="cb34-16"><a href="#cb34-16" tabindex="-1"></a><span class="do">### &gt;      37.885       -2.876</span></span></code></pre></div>
<p>But freehand typing or copy-paste is clunky and tedious. There are
other less painful ways we can use these NAME labels, once we’ve turned
them on.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="fu">sapply</span>(mt2, median) <span class="co"># get the median for every name-labeled variable</span></span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a><span class="do">### &gt;                        Miles/(US) gallon                      Number of cylinders </span></span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a><span class="do">### &gt;                                   19.200                                    6.000 </span></span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a><span class="do">### &gt;                    Displacement (cu.in.)                         Gross horsepower </span></span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a><span class="do">### &gt;                                  196.300                                  123.000 </span></span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a><span class="do">### &gt;                          Rear axle ratio                        Weight (1000 lbs) </span></span>
<span id="cb35-7"><a href="#cb35-7" tabindex="-1"></a><span class="do">### &gt;                                    3.695                                    3.325 </span></span>
<span id="cb35-8"><a href="#cb35-8" tabindex="-1"></a><span class="do">### &gt;                            1/4 mile time      Engine (0 = V-shaped, 1 = straight) </span></span>
<span id="cb35-9"><a href="#cb35-9" tabindex="-1"></a><span class="do">### &gt;                                   17.710                                    0.000 </span></span>
<span id="cb35-10"><a href="#cb35-10" tabindex="-1"></a><span class="do">### &gt; Transmission (0 = automatic, 1 = manual)                  Number of forward gears </span></span>
<span id="cb35-11"><a href="#cb35-11" tabindex="-1"></a><span class="do">### &gt;                                    0.000                                    4.000 </span></span>
<span id="cb35-12"><a href="#cb35-12" tabindex="-1"></a><span class="do">### &gt;                    Number of carburetors </span></span>
<span id="cb35-13"><a href="#cb35-13" tabindex="-1"></a><span class="do">### &gt;                                    2.000</span></span>
<span id="cb35-14"><a href="#cb35-14" tabindex="-1"></a></span>
<span id="cb35-15"><a href="#cb35-15" tabindex="-1"></a>collapse<span class="sc">::</span><span class="fu">qsu</span>(mt2) <span class="co"># use an external package for more informative descriptives</span></span>
<span id="cb35-16"><a href="#cb35-16" tabindex="-1"></a><span class="do">### &gt;                                            N      Mean        SD    Min    Max</span></span>
<span id="cb35-17"><a href="#cb35-17" tabindex="-1"></a><span class="do">### &gt; Miles/(US) gallon                         32   20.0906    6.0269   10.4   33.9</span></span>
<span id="cb35-18"><a href="#cb35-18" tabindex="-1"></a><span class="do">### &gt; Number of cylinders                       32    6.1875    1.7859      4      8</span></span>
<span id="cb35-19"><a href="#cb35-19" tabindex="-1"></a><span class="do">### &gt; Displacement (cu.in.)                     32  230.7219  123.9387   71.1    472</span></span>
<span id="cb35-20"><a href="#cb35-20" tabindex="-1"></a><span class="do">### &gt; Gross horsepower                          32  146.6875   68.5629     52    335</span></span>
<span id="cb35-21"><a href="#cb35-21" tabindex="-1"></a><span class="do">### &gt; Rear axle ratio                           32    3.5966    0.5347   2.76   4.93</span></span>
<span id="cb35-22"><a href="#cb35-22" tabindex="-1"></a><span class="do">### &gt; Weight (1000 lbs)                         32    3.2173    0.9785  1.513  5.424</span></span>
<span id="cb35-23"><a href="#cb35-23" tabindex="-1"></a><span class="do">### &gt; 1/4 mile time                             32   17.8487    1.7869   14.5   22.9</span></span>
<span id="cb35-24"><a href="#cb35-24" tabindex="-1"></a><span class="do">### &gt; Engine (0 = V-shaped, 1 = straight)       32    0.4375     0.504      0      1</span></span>
<span id="cb35-25"><a href="#cb35-25" tabindex="-1"></a><span class="do">### &gt; Transmission (0 = automatic, 1 = manual)  32    0.4063     0.499      0      1</span></span>
<span id="cb35-26"><a href="#cb35-26" tabindex="-1"></a><span class="do">### &gt; Number of forward gears                   32    3.6875    0.7378      3      5</span></span>
<span id="cb35-27"><a href="#cb35-27" tabindex="-1"></a><span class="do">### &gt; Number of carburetors                     32    2.8125    1.6152      1      8</span></span></code></pre></div>
<p>Okay, let’s revert back to our original variable names.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a>mt2 <span class="ot">&lt;-</span> <span class="fu">use_var_names</span>(mt2)</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="fu">head</span>(mt2[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)])</span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a><span class="do">### &gt;                    mpg cyl</span></span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a><span class="do">### &gt; Mazda RX4         21.0   6</span></span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a><span class="do">### &gt; Mazda RX4 Wag     21.0   6</span></span>
<span id="cb36-6"><a href="#cb36-6" tabindex="-1"></a><span class="do">### &gt; Datsun 710        22.8   4</span></span>
<span id="cb36-7"><a href="#cb36-7" tabindex="-1"></a><span class="do">### &gt; Hornet 4 Drive    21.4   6</span></span>
<span id="cb36-8"><a href="#cb36-8" tabindex="-1"></a><span class="do">### &gt; Hornet Sportabout 18.7   8</span></span>
<span id="cb36-9"><a href="#cb36-9" tabindex="-1"></a><span class="do">### &gt; Valiant           18.1   6</span></span></code></pre></div>
<p>We can use <code>with_name_labs()</code> (or the more compact alias
<code>wnl()</code>) to display name labels in place of column names in
fairly flexible ways.</p>
<p>First, let’s show that mt2’s name labels are “off,” then we’ll verify
that the labels are still there in the background.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="co"># first, show mt2 with name labels off but verify that we still have name labels</span></span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a><span class="fu">head</span>(mt2)</span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a><span class="do">### &gt;                    mpg cyl disp  hp drat    wt  qsec vs am gear carb</span></span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a><span class="do">### &gt; Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4</span></span>
<span id="cb37-5"><a href="#cb37-5" tabindex="-1"></a><span class="do">### &gt; Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4</span></span>
<span id="cb37-6"><a href="#cb37-6" tabindex="-1"></a><span class="do">### &gt; Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1</span></span>
<span id="cb37-7"><a href="#cb37-7" tabindex="-1"></a><span class="do">### &gt; Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1</span></span>
<span id="cb37-8"><a href="#cb37-8" tabindex="-1"></a><span class="do">### &gt; Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2</span></span>
<span id="cb37-9"><a href="#cb37-9" tabindex="-1"></a><span class="do">### &gt; Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</span></span>
<span id="cb37-10"><a href="#cb37-10" tabindex="-1"></a><span class="fu">get_name_labs</span>(mt2)</span>
<span id="cb37-11"><a href="#cb37-11" tabindex="-1"></a><span class="do">### &gt;     var                                      lab</span></span>
<span id="cb37-12"><a href="#cb37-12" tabindex="-1"></a><span class="do">### &gt; 1   mpg                        Miles/(US) gallon</span></span>
<span id="cb37-13"><a href="#cb37-13" tabindex="-1"></a><span class="do">### &gt; 2   cyl                      Number of cylinders</span></span>
<span id="cb37-14"><a href="#cb37-14" tabindex="-1"></a><span class="do">### &gt; 3  disp                    Displacement (cu.in.)</span></span>
<span id="cb37-15"><a href="#cb37-15" tabindex="-1"></a><span class="do">### &gt; 4    hp                         Gross horsepower</span></span>
<span id="cb37-16"><a href="#cb37-16" tabindex="-1"></a><span class="do">### &gt; 5  drat                          Rear axle ratio</span></span>
<span id="cb37-17"><a href="#cb37-17" tabindex="-1"></a><span class="do">### &gt; 6    wt                        Weight (1000 lbs)</span></span>
<span id="cb37-18"><a href="#cb37-18" tabindex="-1"></a><span class="do">### &gt; 7  qsec                            1/4 mile time</span></span>
<span id="cb37-19"><a href="#cb37-19" tabindex="-1"></a><span class="do">### &gt; 8    vs      Engine (0 = V-shaped, 1 = straight)</span></span>
<span id="cb37-20"><a href="#cb37-20" tabindex="-1"></a><span class="do">### &gt; 9    am Transmission (0 = automatic, 1 = manual)</span></span>
<span id="cb37-21"><a href="#cb37-21" tabindex="-1"></a><span class="do">### &gt; 10 gear                  Number of forward gears</span></span>
<span id="cb37-22"><a href="#cb37-22" tabindex="-1"></a><span class="do">### &gt; 11 carb                    Number of carburetors</span></span></code></pre></div>
<p>Now, pay attention to the variable names in the console output of the
following calls:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="co"># demo wnl() (note that with_name_labs() will achieve same result)</span></span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a><span class="fu">wnl</span>(mt2, <span class="fu">t.test</span>(mpg <span class="sc">~</span> am))</span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a><span class="do">### &gt;   Welch Two Sample t-test</span></span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb38-6"><a href="#cb38-6" tabindex="-1"></a><span class="do">### &gt; data:  Miles/(US) gallon by Transmission (0 = automatic, 1 = manual)</span></span>
<span id="cb38-7"><a href="#cb38-7" tabindex="-1"></a><span class="do">### &gt; t = -3.7671, df = 18.332, p-value = 0.001374</span></span>
<span id="cb38-8"><a href="#cb38-8" tabindex="-1"></a><span class="do">### &gt; alternative hypothesis: true difference in means between group 0 and group 1 is not equal to 0</span></span>
<span id="cb38-9"><a href="#cb38-9" tabindex="-1"></a><span class="do">### &gt; 95 percent confidence interval:</span></span>
<span id="cb38-10"><a href="#cb38-10" tabindex="-1"></a><span class="do">### &gt;  -11.280194  -3.209684</span></span>
<span id="cb38-11"><a href="#cb38-11" tabindex="-1"></a><span class="do">### &gt; sample estimates:</span></span>
<span id="cb38-12"><a href="#cb38-12" tabindex="-1"></a><span class="do">### &gt; mean in group 0 mean in group 1 </span></span>
<span id="cb38-13"><a href="#cb38-13" tabindex="-1"></a><span class="do">### &gt;        17.14737        24.39231</span></span>
<span id="cb38-14"><a href="#cb38-14" tabindex="-1"></a></span>
<span id="cb38-15"><a href="#cb38-15" tabindex="-1"></a><span class="fu">wnl</span>(mt2, <span class="fu">lm</span>(mpg <span class="sc">~</span> am))</span>
<span id="cb38-16"><a href="#cb38-16" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb38-17"><a href="#cb38-17" tabindex="-1"></a><span class="do">### &gt; Call:</span></span>
<span id="cb38-18"><a href="#cb38-18" tabindex="-1"></a><span class="do">### &gt; lm(formula = `Miles/(US) gallon` ~ `Transmission (0 = automatic, 1 = manual)`)</span></span>
<span id="cb38-19"><a href="#cb38-19" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb38-20"><a href="#cb38-20" tabindex="-1"></a><span class="do">### &gt; Coefficients:</span></span>
<span id="cb38-21"><a href="#cb38-21" tabindex="-1"></a><span class="do">### &gt;                                (Intercept)  `Transmission (0 = automatic, 1 = manual)`  </span></span>
<span id="cb38-22"><a href="#cb38-22" tabindex="-1"></a><span class="do">### &gt;                                     17.147                                       7.245</span></span>
<span id="cb38-23"><a href="#cb38-23" tabindex="-1"></a></span>
<span id="cb38-24"><a href="#cb38-24" tabindex="-1"></a><span class="fu">wnl</span>(mt2, <span class="fu">summary</span>(mt2))</span>
<span id="cb38-25"><a href="#cb38-25" tabindex="-1"></a><span class="do">### &gt;  Miles/(US) gallon Number of cylinders Displacement (cu.in.) Gross horsepower Rear axle ratio Weight (1000 lbs)</span></span>
<span id="cb38-26"><a href="#cb38-26" tabindex="-1"></a><span class="do">### &gt;  Min.   :10.40     Min.   :4.000       Min.   : 71.1         Min.   : 52.0    Min.   :2.760   Min.   :1.513    </span></span>
<span id="cb38-27"><a href="#cb38-27" tabindex="-1"></a><span class="do">### &gt;  1st Qu.:15.43     1st Qu.:4.000       1st Qu.:120.8         1st Qu.: 96.5    1st Qu.:3.080   1st Qu.:2.581    </span></span>
<span id="cb38-28"><a href="#cb38-28" tabindex="-1"></a><span class="do">### &gt;  Median :19.20     Median :6.000       Median :196.3         Median :123.0    Median :3.695   Median :3.325    </span></span>
<span id="cb38-29"><a href="#cb38-29" tabindex="-1"></a><span class="do">### &gt;  Mean   :20.09     Mean   :6.188       Mean   :230.7         Mean   :146.7    Mean   :3.597   Mean   :3.217    </span></span>
<span id="cb38-30"><a href="#cb38-30" tabindex="-1"></a><span class="do">### &gt;  3rd Qu.:22.80     3rd Qu.:8.000       3rd Qu.:326.0         3rd Qu.:180.0    3rd Qu.:3.920   3rd Qu.:3.610    </span></span>
<span id="cb38-31"><a href="#cb38-31" tabindex="-1"></a><span class="do">### &gt;  Max.   :33.90     Max.   :8.000       Max.   :472.0         Max.   :335.0    Max.   :4.930   Max.   :5.424    </span></span>
<span id="cb38-32"><a href="#cb38-32" tabindex="-1"></a><span class="do">### &gt;  1/4 mile time   Engine (0 = V-shaped, 1 = straight) Transmission (0 = automatic, 1 = manual) Number of forward gears</span></span>
<span id="cb38-33"><a href="#cb38-33" tabindex="-1"></a><span class="do">### &gt;  Min.   :14.50   Min.   :0.0000                      Min.   :0.0000                           Min.   :3.000          </span></span>
<span id="cb38-34"><a href="#cb38-34" tabindex="-1"></a><span class="do">### &gt;  1st Qu.:16.89   1st Qu.:0.0000                      1st Qu.:0.0000                           1st Qu.:3.000          </span></span>
<span id="cb38-35"><a href="#cb38-35" tabindex="-1"></a><span class="do">### &gt;  Median :17.71   Median :0.0000                      Median :0.0000                           Median :4.000          </span></span>
<span id="cb38-36"><a href="#cb38-36" tabindex="-1"></a><span class="do">### &gt;  Mean   :17.85   Mean   :0.4375                      Mean   :0.4062                           Mean   :3.688          </span></span>
<span id="cb38-37"><a href="#cb38-37" tabindex="-1"></a><span class="do">### &gt;  3rd Qu.:18.90   3rd Qu.:1.0000                      3rd Qu.:1.0000                           3rd Qu.:4.000          </span></span>
<span id="cb38-38"><a href="#cb38-38" tabindex="-1"></a><span class="do">### &gt;  Max.   :22.90   Max.   :1.0000                      Max.   :1.0000                           Max.   :5.000          </span></span>
<span id="cb38-39"><a href="#cb38-39" tabindex="-1"></a><span class="do">### &gt;  Number of carburetors</span></span>
<span id="cb38-40"><a href="#cb38-40" tabindex="-1"></a><span class="do">### &gt;  Min.   :1.000        </span></span>
<span id="cb38-41"><a href="#cb38-41" tabindex="-1"></a><span class="do">### &gt;  1st Qu.:2.000        </span></span>
<span id="cb38-42"><a href="#cb38-42" tabindex="-1"></a><span class="do">### &gt;  Median :2.000        </span></span>
<span id="cb38-43"><a href="#cb38-43" tabindex="-1"></a><span class="do">### &gt;  Mean   :2.812        </span></span>
<span id="cb38-44"><a href="#cb38-44" tabindex="-1"></a><span class="do">### &gt;  3rd Qu.:4.000        </span></span>
<span id="cb38-45"><a href="#cb38-45" tabindex="-1"></a><span class="do">### &gt;  Max.   :8.000</span></span>
<span id="cb38-46"><a href="#cb38-46" tabindex="-1"></a></span>
<span id="cb38-47"><a href="#cb38-47" tabindex="-1"></a><span class="fu">wnl</span>(mt2, <span class="fu">xtabs</span>(<span class="sc">~</span>gear))</span>
<span id="cb38-48"><a href="#cb38-48" tabindex="-1"></a><span class="do">### &gt; Number of forward gears</span></span>
<span id="cb38-49"><a href="#cb38-49" tabindex="-1"></a><span class="do">### &gt;  3  4  5 </span></span>
<span id="cb38-50"><a href="#cb38-50" tabindex="-1"></a><span class="do">### &gt; 15 12  5</span></span>
<span id="cb38-51"><a href="#cb38-51" tabindex="-1"></a></span>
<span id="cb38-52"><a href="#cb38-52" tabindex="-1"></a><span class="fu">with</span>(mt2, <span class="fu">xtabs</span>(<span class="sc">~</span>gear)) <span class="co"># compare to directly above</span></span>
<span id="cb38-53"><a href="#cb38-53" tabindex="-1"></a><span class="do">### &gt; gear</span></span>
<span id="cb38-54"><a href="#cb38-54" tabindex="-1"></a><span class="do">### &gt;  3  4  5 </span></span>
<span id="cb38-55"><a href="#cb38-55" tabindex="-1"></a><span class="do">### &gt; 15 12  5</span></span></code></pre></div>
<p>Keep in mind that <code>wnl()</code> is intended for self-contained
calls involving exploratory analysis activities, like simple plots,
descriptives, and models. It’s based on fairly brittle regular
expressions and <strong>will throw an error</strong> if you are using
particularly exotic operators, trying out multi-step workflows, or
attempting to use it for data management or cleaning. Still, as shown
above, it works reasonably well for a range of “workhorse” commands.</p>
</div>
<div id="na-and-irregular-values" class="section level2">
<h2>NA and “Irregular” Values</h2>
<p>labelr is no fan of NA values or other “irregular” values, which are
defined as infinite values, not-a-number values, and character values
that look like them (e.g., “NAN”, “INF”, “inf”, “Na”).</p>
<p>When value-labeling a column / variable, such values are
automatically given the catch-all label “NA” (which will be converted to
an actual NA in any columns created by <code>add_lab_cols()</code> or
<code>use_val_labs()</code>). You do not need (and should not try) to
specify this yourself, and you should not try to over-ride labelr on
this. If you want to use labelr AND you present with these sorts of
values, your options are to accept the default “NA” label or convert
these values to something else before labeling. The reasoning is that
value labels are rarely appropriate for the types of variables and
scenarios where you absolutely need to preserve the nuances of exotic
values like -Inf and NaN.</p>
<p>With that said, let’s see how labelr handles this, with an assist
from our old friend mtcars (packaged with R’s base distribution).</p>
<p>First, let’s assign mtcars to a new data.frame object that we will
besmirch.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a>mtbad <span class="ot">&lt;-</span> mtcars</span></code></pre></div>
<p>Let’s get on with the besmirching.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a>mtbad[<span class="dv">1</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">11</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a><span class="fu">rownames</span>(mtbad)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">&quot;Missing Car&quot;</span></span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a>mtbad[<span class="dv">2</span>, <span class="st">&quot;am&quot;</span>] <span class="ot">&lt;-</span> <span class="cn">Inf</span></span>
<span id="cb40-4"><a href="#cb40-4" tabindex="-1"></a>mtbad[<span class="dv">3</span>, <span class="st">&quot;gear&quot;</span>] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="cn">Inf</span></span>
<span id="cb40-5"><a href="#cb40-5" tabindex="-1"></a>mtbad[<span class="dv">5</span>, <span class="st">&quot;carb&quot;</span>] <span class="ot">&lt;-</span> <span class="cn">NaN</span></span>
<span id="cb40-6"><a href="#cb40-6" tabindex="-1"></a>mtbad[<span class="dv">2</span>, <span class="st">&quot;mpg&quot;</span>] <span class="ot">&lt;-</span> <span class="cn">Inf</span></span>
<span id="cb40-7"><a href="#cb40-7" tabindex="-1"></a>mtbad[<span class="dv">3</span>, <span class="st">&quot;mpg&quot;</span>] <span class="ot">&lt;-</span> <span class="cn">NaN</span></span>
<span id="cb40-8"><a href="#cb40-8" tabindex="-1"></a></span>
<span id="cb40-9"><a href="#cb40-9" tabindex="-1"></a><span class="co"># add a character variable, for demonstration purposes</span></span>
<span id="cb40-10"><a href="#cb40-10" tabindex="-1"></a><span class="co"># if it makes you feel better, you can pretend these are Consumer Reports or</span></span>
<span id="cb40-11"><a href="#cb40-11" tabindex="-1"></a><span class="co"># ...JD Power ratings or something</span></span>
<span id="cb40-12"><a href="#cb40-12" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">9202</span>) <span class="co"># for reproducibility</span></span>
<span id="cb40-13"><a href="#cb40-13" tabindex="-1"></a>mtbad<span class="sc">$</span>grade <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>), <span class="fu">nrow</span>(mtbad), <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb40-14"><a href="#cb40-14" tabindex="-1"></a>mtbad[<span class="dv">4</span>, <span class="st">&quot;grade&quot;</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb40-15"><a href="#cb40-15" tabindex="-1"></a>mtbad[<span class="dv">5</span>, <span class="st">&quot;grade&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;NA&quot;</span></span>
<span id="cb40-16"><a href="#cb40-16" tabindex="-1"></a>mtbad[<span class="dv">6</span>, <span class="st">&quot;grade&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;Inf&quot;</span></span>
<span id="cb40-17"><a href="#cb40-17" tabindex="-1"></a></span>
<span id="cb40-18"><a href="#cb40-18" tabindex="-1"></a><span class="co"># see where this leaves us</span></span>
<span id="cb40-19"><a href="#cb40-19" tabindex="-1"></a><span class="fu">head</span>(mtbad)</span>
<span id="cb40-20"><a href="#cb40-20" tabindex="-1"></a><span class="do">### &gt;                    mpg cyl disp  hp drat    wt  qsec vs  am gear carb grade</span></span>
<span id="cb40-21"><a href="#cb40-21" tabindex="-1"></a><span class="do">### &gt; Missing Car         NA  NA   NA  NA   NA    NA    NA NA  NA   NA   NA     B</span></span>
<span id="cb40-22"><a href="#cb40-22" tabindex="-1"></a><span class="do">### &gt; Mazda RX4 Wag      Inf   6  160 110 3.90 2.875 17.02  0 Inf    4    4     C</span></span>
<span id="cb40-23"><a href="#cb40-23" tabindex="-1"></a><span class="do">### &gt; Datsun 710         NaN   4  108  93 3.85 2.320 18.61  1   1 -Inf    1     C</span></span>
<span id="cb40-24"><a href="#cb40-24" tabindex="-1"></a><span class="do">### &gt; Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1   0    3    1  &lt;NA&gt;</span></span>
<span id="cb40-25"><a href="#cb40-25" tabindex="-1"></a><span class="do">### &gt; Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0   0    3  NaN    NA</span></span>
<span id="cb40-26"><a href="#cb40-26" tabindex="-1"></a><span class="do">### &gt; Valiant           18.1   6  225 105 2.76 3.460 20.22  1   0    3    1   Inf</span></span>
<span id="cb40-27"><a href="#cb40-27" tabindex="-1"></a></span>
<span id="cb40-28"><a href="#cb40-28" tabindex="-1"></a><span class="fu">sapply</span>(mtbad, class)</span>
<span id="cb40-29"><a href="#cb40-29" tabindex="-1"></a><span class="do">### &gt;         mpg         cyl        disp          hp        drat          wt        qsec          vs          am        gear </span></span>
<span id="cb40-30"><a href="#cb40-30" tabindex="-1"></a><span class="do">### &gt;   &quot;numeric&quot;   &quot;numeric&quot;   &quot;numeric&quot;   &quot;numeric&quot;   &quot;numeric&quot;   &quot;numeric&quot;   &quot;numeric&quot;   &quot;numeric&quot;   &quot;numeric&quot;   &quot;numeric&quot; </span></span>
<span id="cb40-31"><a href="#cb40-31" tabindex="-1"></a><span class="do">### &gt;        carb       grade </span></span>
<span id="cb40-32"><a href="#cb40-32" tabindex="-1"></a><span class="do">### &gt;   &quot;numeric&quot; &quot;character&quot;</span></span></code></pre></div>
<p>Now, let’s add value labels to this unruly data.frame. Note that
<code>add_val1</code> automatically detects and handles irregular values
and gives us a lot of visibility into its value-labeling actions.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a>mtlabs <span class="ot">&lt;-</span> mtbad <span class="sc">|&gt;</span></span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a>  <span class="fu">add_val1</span>(grade,</span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a>    <span class="at">vals =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>),</span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a>    <span class="at">labs =</span> <span class="fu">c</span>(<span class="st">&quot;Gold&quot;</span>, <span class="st">&quot;Silver&quot;</span>, <span class="st">&quot;Bronze&quot;</span>)</span>
<span id="cb41-5"><a href="#cb41-5" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb41-6"><a href="#cb41-6" tabindex="-1"></a>  <span class="fu">add_val1</span>(am,</span>
<span id="cb41-7"><a href="#cb41-7" tabindex="-1"></a>    <span class="at">vals =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb41-8"><a href="#cb41-8" tabindex="-1"></a>    <span class="at">labs =</span> <span class="fu">c</span>(<span class="st">&quot;auto&quot;</span>, <span class="st">&quot;stick&quot;</span>)</span>
<span id="cb41-9"><a href="#cb41-9" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb41-10"><a href="#cb41-10" tabindex="-1"></a>  <span class="fu">add_val1</span>(carb,</span>
<span id="cb41-11"><a href="#cb41-11" tabindex="-1"></a>    <span class="at">vals =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>), <span class="co"># not the most inspired use of labels</span></span>
<span id="cb41-12"><a href="#cb41-12" tabindex="-1"></a>    <span class="at">labs =</span> <span class="fu">c</span>(</span>
<span id="cb41-13"><a href="#cb41-13" tabindex="-1"></a>      <span class="st">&quot;1c&quot;</span>, <span class="st">&quot;2c&quot;</span>, <span class="st">&quot;3c&quot;</span>,</span>
<span id="cb41-14"><a href="#cb41-14" tabindex="-1"></a>      <span class="st">&quot;4c&quot;</span>, <span class="st">&quot;6c&quot;</span>, <span class="st">&quot;8c&quot;</span></span>
<span id="cb41-15"><a href="#cb41-15" tabindex="-1"></a>    )</span>
<span id="cb41-16"><a href="#cb41-16" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb41-17"><a href="#cb41-17" tabindex="-1"></a>  <span class="fu">add_val1</span>(gear,</span>
<span id="cb41-18"><a href="#cb41-18" tabindex="-1"></a>    <span class="at">vals =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>, <span class="co"># again, not the most compelling use case</span></span>
<span id="cb41-19"><a href="#cb41-19" tabindex="-1"></a>    <span class="at">labs =</span> <span class="fu">c</span>(</span>
<span id="cb41-20"><a href="#cb41-20" tabindex="-1"></a>      <span class="st">&quot;3-speed&quot;</span>,</span>
<span id="cb41-21"><a href="#cb41-21" tabindex="-1"></a>      <span class="st">&quot;4-speed&quot;</span>,</span>
<span id="cb41-22"><a href="#cb41-22" tabindex="-1"></a>      <span class="st">&quot;5-speed&quot;</span></span>
<span id="cb41-23"><a href="#cb41-23" tabindex="-1"></a>    )</span>
<span id="cb41-24"><a href="#cb41-24" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb41-25"><a href="#cb41-25" tabindex="-1"></a>  <span class="fu">add_quant1</span>(mpg, <span class="at">qtiles =</span> <span class="dv">4</span>) <span class="co"># add quartile-based value labels</span></span>
<span id="cb41-26"><a href="#cb41-26" tabindex="-1"></a><span class="do">### &gt; Labeling variable --grade--:</span></span>
<span id="cb41-27"><a href="#cb41-27" tabindex="-1"></a><span class="do">### &gt;     var vals   labs</span></span>
<span id="cb41-28"><a href="#cb41-28" tabindex="-1"></a><span class="do">### &gt; 1 grade    A   Gold</span></span>
<span id="cb41-29"><a href="#cb41-29" tabindex="-1"></a><span class="do">### &gt; 2 grade    B Silver</span></span>
<span id="cb41-30"><a href="#cb41-30" tabindex="-1"></a><span class="do">### &gt; 3 grade    C Bronze</span></span>
<span id="cb41-31"><a href="#cb41-31" tabindex="-1"></a><span class="do">### &gt; 4 grade   NA     NA</span></span>
<span id="cb41-32"><a href="#cb41-32" tabindex="-1"></a><span class="do">### &gt; Labeling variable --am--:</span></span>
<span id="cb41-33"><a href="#cb41-33" tabindex="-1"></a><span class="do">### &gt;   var vals  labs</span></span>
<span id="cb41-34"><a href="#cb41-34" tabindex="-1"></a><span class="do">### &gt; 5  am    0  auto</span></span>
<span id="cb41-35"><a href="#cb41-35" tabindex="-1"></a><span class="do">### &gt; 6  am    1 stick</span></span>
<span id="cb41-36"><a href="#cb41-36" tabindex="-1"></a><span class="do">### &gt; 7  am   NA    NA</span></span>
<span id="cb41-37"><a href="#cb41-37" tabindex="-1"></a><span class="do">### &gt; Labeling variable --carb--:</span></span>
<span id="cb41-38"><a href="#cb41-38" tabindex="-1"></a><span class="do">### &gt;     var vals labs</span></span>
<span id="cb41-39"><a href="#cb41-39" tabindex="-1"></a><span class="do">### &gt; 8  carb    1   1c</span></span>
<span id="cb41-40"><a href="#cb41-40" tabindex="-1"></a><span class="do">### &gt; 9  carb    2   2c</span></span>
<span id="cb41-41"><a href="#cb41-41" tabindex="-1"></a><span class="do">### &gt; 10 carb    3   3c</span></span>
<span id="cb41-42"><a href="#cb41-42" tabindex="-1"></a><span class="do">### &gt; 11 carb    4   4c</span></span>
<span id="cb41-43"><a href="#cb41-43" tabindex="-1"></a><span class="do">### &gt; 12 carb    6   6c</span></span>
<span id="cb41-44"><a href="#cb41-44" tabindex="-1"></a><span class="do">### &gt; 13 carb    8   8c</span></span>
<span id="cb41-45"><a href="#cb41-45" tabindex="-1"></a><span class="do">### &gt; 14 carb   NA   NA</span></span>
<span id="cb41-46"><a href="#cb41-46" tabindex="-1"></a><span class="do">### &gt; Labeling variable --gear--:</span></span>
<span id="cb41-47"><a href="#cb41-47" tabindex="-1"></a><span class="do">### &gt;     var vals    labs</span></span>
<span id="cb41-48"><a href="#cb41-48" tabindex="-1"></a><span class="do">### &gt; 15 gear    3 3-speed</span></span>
<span id="cb41-49"><a href="#cb41-49" tabindex="-1"></a><span class="do">### &gt; 16 gear    4 4-speed</span></span>
<span id="cb41-50"><a href="#cb41-50" tabindex="-1"></a><span class="do">### &gt; 17 gear    5 5-speed</span></span>
<span id="cb41-51"><a href="#cb41-51" tabindex="-1"></a><span class="do">### &gt; 18 gear   NA      NA</span></span>
<span id="cb41-52"><a href="#cb41-52" tabindex="-1"></a><span class="do">### &gt; Labeling variable --mpg--:</span></span>
<span id="cb41-53"><a href="#cb41-53" tabindex="-1"></a><span class="do">### &gt;    var vals labs</span></span>
<span id="cb41-54"><a href="#cb41-54" tabindex="-1"></a><span class="do">### &gt; 19 mpg 15.2 q025</span></span>
<span id="cb41-55"><a href="#cb41-55" tabindex="-1"></a><span class="do">### &gt; 20 mpg 18.7 q050</span></span>
<span id="cb41-56"><a href="#cb41-56" tabindex="-1"></a><span class="do">### &gt; 21 mpg 22.8 q075</span></span>
<span id="cb41-57"><a href="#cb41-57" tabindex="-1"></a><span class="do">### &gt; 22 mpg 33.9 q100</span></span>
<span id="cb41-58"><a href="#cb41-58" tabindex="-1"></a><span class="do">### &gt; 23 mpg   NA   NA</span></span></code></pre></div>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="fu">get_val_labs</span>(mtlabs, <span class="st">&quot;am&quot;</span>) <span class="co"># NA values were detected and dealt with</span></span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a><span class="do">### &gt;   var vals  labs</span></span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a><span class="do">### &gt; 6  am    0  auto</span></span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a><span class="do">### &gt; 7  am    1 stick</span></span>
<span id="cb42-5"><a href="#cb42-5" tabindex="-1"></a><span class="do">### &gt; 8  am   NA    NA</span></span></code></pre></div>
<p>Let’s streamline the data.frame with <code>sselect()</code> to make
it more manageable.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a>mtless <span class="ot">&lt;-</span> <span class="fu">sselect</span>(mtlabs, mpg, cyl, am, gear, carb, grade) <span class="co"># safely select</span></span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" tabindex="-1"></a><span class="fu">head</span>(mtless, <span class="dv">5</span>) <span class="co"># note that the irregular values are still here</span></span>
<span id="cb43-4"><a href="#cb43-4" tabindex="-1"></a><span class="do">### &gt;                    mpg cyl  am gear carb grade</span></span>
<span id="cb43-5"><a href="#cb43-5" tabindex="-1"></a><span class="do">### &gt; Missing Car         NA  NA  NA   NA   NA     B</span></span>
<span id="cb43-6"><a href="#cb43-6" tabindex="-1"></a><span class="do">### &gt; Mazda RX4 Wag      Inf   6 Inf    4    4     C</span></span>
<span id="cb43-7"><a href="#cb43-7" tabindex="-1"></a><span class="do">### &gt; Datsun 710         NaN   4   1 -Inf    1     C</span></span>
<span id="cb43-8"><a href="#cb43-8" tabindex="-1"></a><span class="do">### &gt; Hornet 4 Drive    21.4   6   0    3    1  &lt;NA&gt;</span></span>
<span id="cb43-9"><a href="#cb43-9" tabindex="-1"></a><span class="do">### &gt; Hornet Sportabout 18.7   8   0    3  NaN    NA</span></span></code></pre></div>
<p>Notice how all irregular values are coerced to NA when we substitute
labels for values with <code>use_val_labs()</code>.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">use_val_labs</span>(mtless), <span class="dv">5</span>) <span class="co"># but they all go to NA if we `use_val_labs`</span></span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a><span class="do">### &gt;                    mpg cyl    am    gear carb  grade</span></span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a><span class="do">### &gt; Missing Car       &lt;NA&gt;  NA  &lt;NA&gt;    &lt;NA&gt; &lt;NA&gt; Silver</span></span>
<span id="cb44-4"><a href="#cb44-4" tabindex="-1"></a><span class="do">### &gt; Mazda RX4 Wag     &lt;NA&gt;   6  &lt;NA&gt; 4-speed   4c Bronze</span></span>
<span id="cb44-5"><a href="#cb44-5" tabindex="-1"></a><span class="do">### &gt; Datsun 710        &lt;NA&gt;   4 stick    &lt;NA&gt;   1c Bronze</span></span>
<span id="cb44-6"><a href="#cb44-6" tabindex="-1"></a><span class="do">### &gt; Hornet 4 Drive    q075   6  auto 3-speed   1c     NA</span></span>
<span id="cb44-7"><a href="#cb44-7" tabindex="-1"></a><span class="do">### &gt; Hornet Sportabout q050   8  auto 3-speed &lt;NA&gt;     NA</span></span></code></pre></div>
<p>Now, let’s try an <code>add_lab_cols()</code> view.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a>mtlabs_plus <span class="ot">&lt;-</span> <span class="fu">add_lab_cols</span>(mtlabs, <span class="fu">c</span>(<span class="st">&quot;mpg&quot;</span>, <span class="st">&quot;am&quot;</span>)) <span class="co"># this creates and adds &quot;am_lab&quot; col</span></span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a>mtlabs_plus <span class="ot">&lt;-</span> <span class="fu">sselect</span>(mtlabs_plus, mpg, mpg_lab, am, am_lab) <span class="co"># let&#39;s select down to these two</span></span>
<span id="cb45-3"><a href="#cb45-3" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" tabindex="-1"></a><span class="fu">head</span>(mtlabs_plus) <span class="co"># here&#39;s where we landed</span></span>
<span id="cb45-5"><a href="#cb45-5" tabindex="-1"></a><span class="do">### &gt;                    mpg mpg_lab  am am_lab</span></span>
<span id="cb45-6"><a href="#cb45-6" tabindex="-1"></a><span class="do">### &gt; Missing Car         NA    &lt;NA&gt;  NA   &lt;NA&gt;</span></span>
<span id="cb45-7"><a href="#cb45-7" tabindex="-1"></a><span class="do">### &gt; Mazda RX4 Wag      Inf    &lt;NA&gt; Inf   &lt;NA&gt;</span></span>
<span id="cb45-8"><a href="#cb45-8" tabindex="-1"></a><span class="do">### &gt; Datsun 710         NaN    &lt;NA&gt;   1  stick</span></span>
<span id="cb45-9"><a href="#cb45-9" tabindex="-1"></a><span class="do">### &gt; Hornet 4 Drive    21.4    q075   0   auto</span></span>
<span id="cb45-10"><a href="#cb45-10" tabindex="-1"></a><span class="do">### &gt; Hornet Sportabout 18.7    q050   0   auto</span></span>
<span id="cb45-11"><a href="#cb45-11" tabindex="-1"></a><span class="do">### &gt; Valiant           18.1    q050   0   auto</span></span></code></pre></div>
<p>What if we had tried to explicitly label the NA values and/or
irregular values themselves? We would have failed.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="co"># Trying to Label an Irregular Value (-Inf)</span></span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a>mtbad <span class="ot">&lt;-</span> <span class="fu">add_val1</span>(</span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a>  <span class="at">data =</span> mtcars,</span>
<span id="cb46-4"><a href="#cb46-4" tabindex="-1"></a>  <span class="at">var =</span> gear,</span>
<span id="cb46-5"><a href="#cb46-5" tabindex="-1"></a>  <span class="at">vals =</span> <span class="sc">-</span><span class="cn">Inf</span>,</span>
<span id="cb46-6"><a href="#cb46-6" tabindex="-1"></a>  <span class="at">labs =</span> <span class="fu">c</span>(<span class="st">&quot;neg.inf&quot;</span>)</span>
<span id="cb46-7"><a href="#cb46-7" tabindex="-1"></a>)</span>
<span id="cb46-8"><a href="#cb46-8" tabindex="-1"></a><span class="do">### &gt; Error in add_val1(data = mtcars, var = gear, vals = -Inf, labs = c(&quot;neg.inf&quot;)): </span></span>
<span id="cb46-9"><a href="#cb46-9" tabindex="-1"></a><span class="do">### &gt; Cannot supply NA, NaN, Inf, or character variants as a val or lab arg.</span></span>
<span id="cb46-10"><a href="#cb46-10" tabindex="-1"></a><span class="do">### &gt; These are handled automatically.</span></span>
<span id="cb46-11"><a href="#cb46-11" tabindex="-1"></a></span>
<span id="cb46-12"><a href="#cb46-12" tabindex="-1"></a><span class="co"># Trying to Label an Irregular Value (NA)</span></span>
<span id="cb46-13"><a href="#cb46-13" tabindex="-1"></a>mtbad <span class="ot">&lt;-</span> <span class="fu">add_val_labs</span>(</span>
<span id="cb46-14"><a href="#cb46-14" tabindex="-1"></a>  <span class="at">data =</span> mtbad,</span>
<span id="cb46-15"><a href="#cb46-15" tabindex="-1"></a>  <span class="at">vars =</span> <span class="st">&quot;grade&quot;</span>,</span>
<span id="cb46-16"><a href="#cb46-16" tabindex="-1"></a>  <span class="at">vals =</span> <span class="cn">NA</span>,</span>
<span id="cb46-17"><a href="#cb46-17" tabindex="-1"></a>  <span class="at">labs =</span> <span class="fu">c</span>(<span class="st">&quot;miss&quot;</span>)</span>
<span id="cb46-18"><a href="#cb46-18" tabindex="-1"></a>)</span>
<span id="cb46-19"><a href="#cb46-19" tabindex="-1"></a><span class="do">### &gt; Error in add_val_labs(data = mtbad, vars = &quot;grade&quot;, vals = NA, labs = c(&quot;miss&quot;)): </span></span>
<span id="cb46-20"><a href="#cb46-20" tabindex="-1"></a><span class="do">### &gt; Cannot supply NA, NaN, Inf, or character variants as a val or lab arg.</span></span>
<span id="cb46-21"><a href="#cb46-21" tabindex="-1"></a><span class="do">### &gt; These are handled automatically.</span></span>
<span id="cb46-22"><a href="#cb46-22" tabindex="-1"></a></span>
<span id="cb46-23"><a href="#cb46-23" tabindex="-1"></a><span class="co"># Trying to Label an Irregular Value (NaN)</span></span>
<span id="cb46-24"><a href="#cb46-24" tabindex="-1"></a>mtbad <span class="ot">&lt;-</span> <span class="fu">add_val_labs</span>(</span>
<span id="cb46-25"><a href="#cb46-25" tabindex="-1"></a>  <span class="at">data =</span> mtbad,</span>
<span id="cb46-26"><a href="#cb46-26" tabindex="-1"></a>  <span class="at">vars =</span> <span class="st">&quot;carb&quot;</span>,</span>
<span id="cb46-27"><a href="#cb46-27" tabindex="-1"></a>  <span class="at">vals =</span> <span class="cn">NaN</span>,</span>
<span id="cb46-28"><a href="#cb46-28" tabindex="-1"></a>  <span class="at">labs =</span> <span class="fu">c</span>(<span class="st">&quot;nan-v&quot;</span>)</span>
<span id="cb46-29"><a href="#cb46-29" tabindex="-1"></a>)</span>
<span id="cb46-30"><a href="#cb46-30" tabindex="-1"></a><span class="do">### &gt; Error in add_val_labs(data = mtbad, vars = &quot;carb&quot;, vals = NaN, labs = c(&quot;nan-v&quot;)): </span></span>
<span id="cb46-31"><a href="#cb46-31" tabindex="-1"></a><span class="do">### &gt; Cannot supply NA, NaN, Inf, or character variants as a val or lab arg.</span></span>
<span id="cb46-32"><a href="#cb46-32" tabindex="-1"></a><span class="do">### &gt; These are handled automatically.</span></span>
<span id="cb46-33"><a href="#cb46-33" tabindex="-1"></a></span>
<span id="cb46-34"><a href="#cb46-34" tabindex="-1"></a><span class="co"># labelr also treats &quot;character variants&quot; of irregular values as irregular values.</span></span>
<span id="cb46-35"><a href="#cb46-35" tabindex="-1"></a>mtbad <span class="ot">&lt;-</span> <span class="fu">add_val1</span>(</span>
<span id="cb46-36"><a href="#cb46-36" tabindex="-1"></a>  <span class="at">data =</span> mtbad,</span>
<span id="cb46-37"><a href="#cb46-37" tabindex="-1"></a>  <span class="at">var =</span> carb,</span>
<span id="cb46-38"><a href="#cb46-38" tabindex="-1"></a>  <span class="at">vals =</span> <span class="st">&quot;NAN&quot;</span>,</span>
<span id="cb46-39"><a href="#cb46-39" tabindex="-1"></a>  <span class="at">labs =</span> <span class="fu">c</span>(<span class="st">&quot;nan-v&quot;</span>)</span>
<span id="cb46-40"><a href="#cb46-40" tabindex="-1"></a>)</span>
<span id="cb46-41"><a href="#cb46-41" tabindex="-1"></a><span class="do">### &gt; Error in add_val1(data = mtbad, var = carb, vals = &quot;NAN&quot;, labs = c(&quot;nan-v&quot;)): </span></span>
<span id="cb46-42"><a href="#cb46-42" tabindex="-1"></a><span class="do">### &gt; Cannot supply NA, NaN, Inf, or character variants as a val or lab arg.</span></span>
<span id="cb46-43"><a href="#cb46-43" tabindex="-1"></a><span class="do">### &gt; These are handled automatically.</span></span></code></pre></div>
<p>Again, labelr handles NA and irregular values and resists our efforts
to take such matters into our own hands.</p>
</div>
<div id="factors-fand-value-labels" class="section level2">
<h2>Factors fand Value Labels</h2>
<p>R’s concept of a factor variable shares some affinities with the
concept of a value-labeled variable and can be viewed as one approach to
value labeling. However, factors can manifest idiosyncratic and
surprising behaviors depending on the function to which you’re trying to
apply them. They are character-like, but they are not character values.
They are built on top of integers, but they won’t submit to all of the
operations that integers do. They do some very handy things in certain
model-fitting applications, but their behavior “under the hood” can be
counter-intuitive or opaque. Simply put, they are their own thing.</p>
<p>So, while factors have their purposes, it would be nice to associate
value labels with the distinct values of data.frame variables in a
manner that preserves the integrity and transparency of the underlying
values (factors tend to be a bit opaque about this) and that allows you
to view or use the labels in flexible ways.</p>
<p>And if you wanted to work with a factor, it would be nice if you
could add value labels to it without it ceasing to be and behave like a
factor.</p>
<div id="adding-labels-to-a-factor" class="section level3">
<h3>Adding Labels to a Factor</h3>
<p>With that said, let’s see if we can have our label-factor cake and
eat it, too, using the iris data.frame that comes pre-packaged with
R.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="fu">unique</span>(iris<span class="sc">$</span>Species)</span>
<span id="cb47-2"><a href="#cb47-2" tabindex="-1"></a><span class="do">### &gt; [1] setosa     versicolor virginica </span></span>
<span id="cb47-3"><a href="#cb47-3" tabindex="-1"></a><span class="do">### &gt; Levels: setosa versicolor virginica</span></span>
<span id="cb47-4"><a href="#cb47-4" tabindex="-1"></a></span>
<span id="cb47-5"><a href="#cb47-5" tabindex="-1"></a><span class="fu">sapply</span>(iris, class) <span class="co"># nothing up our sleeve -- &quot;Species&quot; is a factor</span></span>
<span id="cb47-6"><a href="#cb47-6" tabindex="-1"></a><span class="do">### &gt; Sepal.Length  Sepal.Width Petal.Length  Petal.Width      Species </span></span>
<span id="cb47-7"><a href="#cb47-7" tabindex="-1"></a><span class="do">### &gt;    &quot;numeric&quot;    &quot;numeric&quot;    &quot;numeric&quot;    &quot;numeric&quot;     &quot;factor&quot;</span></span></code></pre></div>
<p>Let’s add value labels to “Species” and assign the result to a new
data.frame that we’ll call irlab. For our value labels, we’ll use
“se”,“ve”, and “vi”, which are not adding much new information, but they
will help to illustrate what we can do with labelr and a factor
variable.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a>irlab <span class="ot">&lt;-</span> <span class="fu">add_val_labs</span>(iris,</span>
<span id="cb48-2"><a href="#cb48-2" tabindex="-1"></a>  <span class="at">vars =</span> <span class="st">&quot;Species&quot;</span>,</span>
<span id="cb48-3"><a href="#cb48-3" tabindex="-1"></a>  <span class="at">vals =</span> <span class="fu">c</span>(<span class="st">&quot;setosa&quot;</span>, <span class="st">&quot;versicolor&quot;</span>, <span class="st">&quot;virginica&quot;</span>),</span>
<span id="cb48-4"><a href="#cb48-4" tabindex="-1"></a>  <span class="at">labs =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ve&quot;</span>, <span class="st">&quot;vi&quot;</span>)</span>
<span id="cb48-5"><a href="#cb48-5" tabindex="-1"></a>)</span>
<span id="cb48-6"><a href="#cb48-6" tabindex="-1"></a><span class="do">### &gt; Labeling variable --Species--:</span></span>
<span id="cb48-7"><a href="#cb48-7" tabindex="-1"></a><span class="do">### &gt;       var       vals labs</span></span>
<span id="cb48-8"><a href="#cb48-8" tabindex="-1"></a><span class="do">### &gt; 1 Species     setosa   se</span></span>
<span id="cb48-9"><a href="#cb48-9" tabindex="-1"></a><span class="do">### &gt; 2 Species versicolor   ve</span></span>
<span id="cb48-10"><a href="#cb48-10" tabindex="-1"></a><span class="do">### &gt; 3 Species  virginica   vi</span></span>
<span id="cb48-11"><a href="#cb48-11" tabindex="-1"></a><span class="do">### &gt; 4 Species         NA   NA</span></span>
<span id="cb48-12"><a href="#cb48-12" tabindex="-1"></a></span>
<span id="cb48-13"><a href="#cb48-13" tabindex="-1"></a><span class="co"># this also would&#39;ve worked</span></span>
<span id="cb48-14"><a href="#cb48-14" tabindex="-1"></a><span class="co"># irlab_dos &lt;- add_val1(iris, Species,</span></span>
<span id="cb48-15"><a href="#cb48-15" tabindex="-1"></a><span class="co">#   vals = c(&quot;setosa&quot;, &quot;versicolor&quot;, &quot;virginica&quot;),</span></span>
<span id="cb48-16"><a href="#cb48-16" tabindex="-1"></a><span class="co">#   labs = c(&quot;se&quot;, &quot;ve&quot;, &quot;vi&quot;)</span></span>
<span id="cb48-17"><a href="#cb48-17" tabindex="-1"></a><span class="co"># )</span></span></code></pre></div>
<p>Note that we could have just as (or even more) easily used
<code>add_val1()</code>, which works for a single variable at a time and
allows us to avoid quoting our column name, if that matters to us. In
contrast, <code>add_val_labs()</code> requires us to put our variable
name(s) in quotes, but it also gives us the option to apply a common
value-label scheme to several variables at once (e.g., Likert-style
survey responses). We’ll see an example of this type of use case in
action in a little bit.</p>
<p>For now, though, let’s prove that the iris and irlab data.frames are
functionally identical.</p>
<p>First, note that irlab looks and acts just like iris in the usual
ways that matter</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="fu">summary</span>(iris)</span>
<span id="cb49-2"><a href="#cb49-2" tabindex="-1"></a><span class="do">### &gt;   Sepal.Length    Sepal.Width     Petal.Length    Petal.Width          Species  </span></span>
<span id="cb49-3"><a href="#cb49-3" tabindex="-1"></a><span class="do">### &gt;  Min.   :4.300   Min.   :2.000   Min.   :1.000   Min.   :0.100   setosa    :50  </span></span>
<span id="cb49-4"><a href="#cb49-4" tabindex="-1"></a><span class="do">### &gt;  1st Qu.:5.100   1st Qu.:2.800   1st Qu.:1.600   1st Qu.:0.300   versicolor:50  </span></span>
<span id="cb49-5"><a href="#cb49-5" tabindex="-1"></a><span class="do">### &gt;  Median :5.800   Median :3.000   Median :4.350   Median :1.300   virginica :50  </span></span>
<span id="cb49-6"><a href="#cb49-6" tabindex="-1"></a><span class="do">### &gt;  Mean   :5.843   Mean   :3.057   Mean   :3.758   Mean   :1.199                  </span></span>
<span id="cb49-7"><a href="#cb49-7" tabindex="-1"></a><span class="do">### &gt;  3rd Qu.:6.400   3rd Qu.:3.300   3rd Qu.:5.100   3rd Qu.:1.800                  </span></span>
<span id="cb49-8"><a href="#cb49-8" tabindex="-1"></a><span class="do">### &gt;  Max.   :7.900   Max.   :4.400   Max.   :6.900   Max.   :2.500</span></span>
<span id="cb49-9"><a href="#cb49-9" tabindex="-1"></a></span>
<span id="cb49-10"><a href="#cb49-10" tabindex="-1"></a><span class="fu">summary</span>(irlab)</span>
<span id="cb49-11"><a href="#cb49-11" tabindex="-1"></a><span class="do">### &gt;   Sepal.Length    Sepal.Width     Petal.Length    Petal.Width          Species  </span></span>
<span id="cb49-12"><a href="#cb49-12" tabindex="-1"></a><span class="do">### &gt;  Min.   :4.300   Min.   :2.000   Min.   :1.000   Min.   :0.100   setosa    :50  </span></span>
<span id="cb49-13"><a href="#cb49-13" tabindex="-1"></a><span class="do">### &gt;  1st Qu.:5.100   1st Qu.:2.800   1st Qu.:1.600   1st Qu.:0.300   versicolor:50  </span></span>
<span id="cb49-14"><a href="#cb49-14" tabindex="-1"></a><span class="do">### &gt;  Median :5.800   Median :3.000   Median :4.350   Median :1.300   virginica :50  </span></span>
<span id="cb49-15"><a href="#cb49-15" tabindex="-1"></a><span class="do">### &gt;  Mean   :5.843   Mean   :3.057   Mean   :3.758   Mean   :1.199                  </span></span>
<span id="cb49-16"><a href="#cb49-16" tabindex="-1"></a><span class="do">### &gt;  3rd Qu.:6.400   3rd Qu.:3.300   3rd Qu.:5.100   3rd Qu.:1.800                  </span></span>
<span id="cb49-17"><a href="#cb49-17" tabindex="-1"></a><span class="do">### &gt;  Max.   :7.900   Max.   :4.400   Max.   :6.900   Max.   :2.500</span></span>
<span id="cb49-18"><a href="#cb49-18" tabindex="-1"></a></span>
<span id="cb49-19"><a href="#cb49-19" tabindex="-1"></a><span class="fu">head</span>(iris, <span class="dv">4</span>)</span>
<span id="cb49-20"><a href="#cb49-20" tabindex="-1"></a><span class="do">### &gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb49-21"><a href="#cb49-21" tabindex="-1"></a><span class="do">### &gt; 1          5.1         3.5          1.4         0.2  setosa</span></span>
<span id="cb49-22"><a href="#cb49-22" tabindex="-1"></a><span class="do">### &gt; 2          4.9         3.0          1.4         0.2  setosa</span></span>
<span id="cb49-23"><a href="#cb49-23" tabindex="-1"></a><span class="do">### &gt; 3          4.7         3.2          1.3         0.2  setosa</span></span>
<span id="cb49-24"><a href="#cb49-24" tabindex="-1"></a><span class="do">### &gt; 4          4.6         3.1          1.5         0.2  setosa</span></span>
<span id="cb49-25"><a href="#cb49-25" tabindex="-1"></a></span>
<span id="cb49-26"><a href="#cb49-26" tabindex="-1"></a><span class="fu">head</span>(irlab, <span class="dv">4</span>)</span>
<span id="cb49-27"><a href="#cb49-27" tabindex="-1"></a><span class="do">### &gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb49-28"><a href="#cb49-28" tabindex="-1"></a><span class="do">### &gt; 1          5.1         3.5          1.4         0.2  setosa</span></span>
<span id="cb49-29"><a href="#cb49-29" tabindex="-1"></a><span class="do">### &gt; 2          4.9         3.0          1.4         0.2  setosa</span></span>
<span id="cb49-30"><a href="#cb49-30" tabindex="-1"></a><span class="do">### &gt; 3          4.7         3.2          1.3         0.2  setosa</span></span>
<span id="cb49-31"><a href="#cb49-31" tabindex="-1"></a><span class="do">### &gt; 4          4.6         3.1          1.5         0.2  setosa</span></span>
<span id="cb49-32"><a href="#cb49-32" tabindex="-1"></a></span>
<span id="cb49-33"><a href="#cb49-33" tabindex="-1"></a><span class="fu">lm</span>(Sepal.Length <span class="sc">~</span> Sepal.Width <span class="sc">+</span> Species, <span class="at">data =</span> iris)</span>
<span id="cb49-34"><a href="#cb49-34" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb49-35"><a href="#cb49-35" tabindex="-1"></a><span class="do">### &gt; Call:</span></span>
<span id="cb49-36"><a href="#cb49-36" tabindex="-1"></a><span class="do">### &gt; lm(formula = Sepal.Length ~ Sepal.Width + Species, data = iris)</span></span>
<span id="cb49-37"><a href="#cb49-37" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb49-38"><a href="#cb49-38" tabindex="-1"></a><span class="do">### &gt; Coefficients:</span></span>
<span id="cb49-39"><a href="#cb49-39" tabindex="-1"></a><span class="do">### &gt;       (Intercept)        Sepal.Width  Speciesversicolor   Speciesvirginica  </span></span>
<span id="cb49-40"><a href="#cb49-40" tabindex="-1"></a><span class="do">### &gt;            2.2514             0.8036             1.4587             1.9468</span></span>
<span id="cb49-41"><a href="#cb49-41" tabindex="-1"></a></span>
<span id="cb49-42"><a href="#cb49-42" tabindex="-1"></a><span class="fu">lm</span>(Sepal.Length <span class="sc">~</span> Sepal.Width <span class="sc">+</span> Species, <span class="at">data =</span> irlab) <span class="co"># values are same</span></span>
<span id="cb49-43"><a href="#cb49-43" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb49-44"><a href="#cb49-44" tabindex="-1"></a><span class="do">### &gt; Call:</span></span>
<span id="cb49-45"><a href="#cb49-45" tabindex="-1"></a><span class="do">### &gt; lm(formula = Sepal.Length ~ Sepal.Width + Species, data = irlab)</span></span>
<span id="cb49-46"><a href="#cb49-46" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb49-47"><a href="#cb49-47" tabindex="-1"></a><span class="do">### &gt; Coefficients:</span></span>
<span id="cb49-48"><a href="#cb49-48" tabindex="-1"></a><span class="do">### &gt;       (Intercept)        Sepal.Width  Speciesversicolor   Speciesvirginica  </span></span>
<span id="cb49-49"><a href="#cb49-49" tabindex="-1"></a><span class="do">### &gt;            2.2514             0.8036             1.4587             1.9468</span></span></code></pre></div>
<p>Note also that irlab’s “Species” is still a factor, just like its
iris counterpart/parent.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="fu">sapply</span>(irlab, class)</span>
<span id="cb50-2"><a href="#cb50-2" tabindex="-1"></a><span class="do">### &gt; Sepal.Length  Sepal.Width Petal.Length  Petal.Width      Species </span></span>
<span id="cb50-3"><a href="#cb50-3" tabindex="-1"></a><span class="do">### &gt;    &quot;numeric&quot;    &quot;numeric&quot;    &quot;numeric&quot;    &quot;numeric&quot;     &quot;factor&quot;</span></span>
<span id="cb50-4"><a href="#cb50-4" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" tabindex="-1"></a><span class="fu">levels</span>(irlab<span class="sc">$</span>Species)</span>
<span id="cb50-6"><a href="#cb50-6" tabindex="-1"></a><span class="do">### &gt; [1] &quot;setosa&quot;     &quot;versicolor&quot; &quot;virginica&quot;</span></span></code></pre></div>
<p>But irlab’s “Species” has value labels!</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a><span class="fu">get_val_labs</span>(irlab, <span class="st">&quot;Species&quot;</span>)</span>
<span id="cb51-2"><a href="#cb51-2" tabindex="-1"></a><span class="do">### &gt;       var       vals labs</span></span>
<span id="cb51-3"><a href="#cb51-3" tabindex="-1"></a><span class="do">### &gt; 1 Species     setosa   se</span></span>
<span id="cb51-4"><a href="#cb51-4" tabindex="-1"></a><span class="do">### &gt; 2 Species versicolor   ve</span></span>
<span id="cb51-5"><a href="#cb51-5" tabindex="-1"></a><span class="do">### &gt; 3 Species  virginica   vi</span></span>
<span id="cb51-6"><a href="#cb51-6" tabindex="-1"></a><span class="do">### &gt; 4 Species         NA   NA</span></span></code></pre></div>
<p>And they work.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">use_val_labs</span>(irlab))</span>
<span id="cb52-2"><a href="#cb52-2" tabindex="-1"></a><span class="do">### &gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb52-3"><a href="#cb52-3" tabindex="-1"></a><span class="do">### &gt; 1          5.1         3.5          1.4         0.2      se</span></span>
<span id="cb52-4"><a href="#cb52-4" tabindex="-1"></a><span class="do">### &gt; 2          4.9         3.0          1.4         0.2      se</span></span>
<span id="cb52-5"><a href="#cb52-5" tabindex="-1"></a><span class="do">### &gt; 3          4.7         3.2          1.3         0.2      se</span></span>
<span id="cb52-6"><a href="#cb52-6" tabindex="-1"></a><span class="do">### &gt; 4          4.6         3.1          1.5         0.2      se</span></span>
<span id="cb52-7"><a href="#cb52-7" tabindex="-1"></a><span class="do">### &gt; 5          5.0         3.6          1.4         0.2      se</span></span>
<span id="cb52-8"><a href="#cb52-8" tabindex="-1"></a><span class="do">### &gt; 6          5.4         3.9          1.7         0.4      se</span></span>
<span id="cb52-9"><a href="#cb52-9" tabindex="-1"></a>ir_v <span class="ot">&lt;-</span> <span class="fu">flab</span>(irlab, Species <span class="sc">==</span> <span class="st">&quot;vi&quot;</span>)</span>
<span id="cb52-10"><a href="#cb52-10" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb52-11"><a href="#cb52-11" tabindex="-1"></a><span class="do">### &gt; Remember: Any filtering conditions involving value-labeled variables must be expressed</span></span>
<span id="cb52-12"><a href="#cb52-12" tabindex="-1"></a><span class="do">### &gt; in terms of the (quoted character) value labels, not the variable values themselves. </span></span>
<span id="cb52-13"><a href="#cb52-13" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb52-14"><a href="#cb52-14" tabindex="-1"></a><span class="do">### &gt; To filter using values (not labels) of value-labeled variables, try, e.g., sfilter().</span></span>
<span id="cb52-15"><a href="#cb52-15" tabindex="-1"></a><span class="fu">head</span>(ir_v, <span class="dv">5</span>)</span>
<span id="cb52-16"><a href="#cb52-16" tabindex="-1"></a><span class="do">### &gt;     Sepal.Length Sepal.Width Petal.Length Petal.Width   Species</span></span>
<span id="cb52-17"><a href="#cb52-17" tabindex="-1"></a><span class="do">### &gt; 101          6.3         3.3          6.0         2.5 virginica</span></span>
<span id="cb52-18"><a href="#cb52-18" tabindex="-1"></a><span class="do">### &gt; 102          5.8         2.7          5.1         1.9 virginica</span></span>
<span id="cb52-19"><a href="#cb52-19" tabindex="-1"></a><span class="do">### &gt; 103          7.1         3.0          5.9         2.1 virginica</span></span>
<span id="cb52-20"><a href="#cb52-20" tabindex="-1"></a><span class="do">### &gt; 104          6.3         2.9          5.6         1.8 virginica</span></span>
<span id="cb52-21"><a href="#cb52-21" tabindex="-1"></a><span class="do">### &gt; 105          6.5         3.0          5.8         2.2 virginica</span></span></code></pre></div>
<p>Our take-aways so far? Factors can be value-labeled while staying
factors, and we can use the labels to do labelr-y things with those
factors. We can have both.</p>
<p>We may want to go further and add the labeled variable alongside the
factor version.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a>irlab_aug <span class="ot">&lt;-</span> <span class="fu">add_lab_cols</span>(irlab, <span class="at">vars =</span> <span class="st">&quot;Species&quot;</span>)</span></code></pre></div>
<p>This gives us a new variable called “Species_lab”. Let’s get select
rows of the resulting data.frame, since we want to see all the different
species.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">231</span>)</span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a>sample_rows <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">seq_len</span>(<span class="fu">nrow</span>(irlab)), <span class="dv">10</span>, <span class="at">replace =</span> <span class="cn">FALSE</span>)</span>
<span id="cb54-3"><a href="#cb54-3" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" tabindex="-1"></a>irlab_aug[sample_rows, ]</span>
<span id="cb54-5"><a href="#cb54-5" tabindex="-1"></a><span class="do">### &gt;     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species Species_lab</span></span>
<span id="cb54-6"><a href="#cb54-6" tabindex="-1"></a><span class="do">### &gt; 7            4.6         3.4          1.4         0.3     setosa          se</span></span>
<span id="cb54-7"><a href="#cb54-7" tabindex="-1"></a><span class="do">### &gt; 91           5.5         2.6          4.4         1.2 versicolor          ve</span></span>
<span id="cb54-8"><a href="#cb54-8" tabindex="-1"></a><span class="do">### &gt; 41           5.0         3.5          1.3         0.3     setosa          se</span></span>
<span id="cb54-9"><a href="#cb54-9" tabindex="-1"></a><span class="do">### &gt; 133          6.4         2.8          5.6         2.2  virginica          vi</span></span>
<span id="cb54-10"><a href="#cb54-10" tabindex="-1"></a><span class="do">### &gt; 130          7.2         3.0          5.8         1.6  virginica          vi</span></span>
<span id="cb54-11"><a href="#cb54-11" tabindex="-1"></a><span class="do">### &gt; 19           5.7         3.8          1.7         0.3     setosa          se</span></span>
<span id="cb54-12"><a href="#cb54-12" tabindex="-1"></a><span class="do">### &gt; 104          6.3         2.9          5.6         1.8  virginica          vi</span></span>
<span id="cb54-13"><a href="#cb54-13" tabindex="-1"></a><span class="do">### &gt; 43           4.4         3.2          1.3         0.2     setosa          se</span></span>
<span id="cb54-14"><a href="#cb54-14" tabindex="-1"></a><span class="do">### &gt; 8            5.0         3.4          1.5         0.2     setosa          se</span></span>
<span id="cb54-15"><a href="#cb54-15" tabindex="-1"></a><span class="do">### &gt; 68           5.8         2.7          4.1         1.0 versicolor          ve</span></span>
<span id="cb54-16"><a href="#cb54-16" tabindex="-1"></a></span>
<span id="cb54-17"><a href="#cb54-17" tabindex="-1"></a><span class="fu">sapply</span>(irlab_aug, class)</span>
<span id="cb54-18"><a href="#cb54-18" tabindex="-1"></a><span class="do">### &gt; Sepal.Length  Sepal.Width Petal.Length  Petal.Width      Species  Species_lab </span></span>
<span id="cb54-19"><a href="#cb54-19" tabindex="-1"></a><span class="do">### &gt;    &quot;numeric&quot;    &quot;numeric&quot;    &quot;numeric&quot;    &quot;numeric&quot;     &quot;factor&quot;  &quot;character&quot;</span></span>
<span id="cb54-20"><a href="#cb54-20" tabindex="-1"></a></span>
<span id="cb54-21"><a href="#cb54-21" tabindex="-1"></a><span class="fu">with</span>(irlab_aug, <span class="fu">table</span>(Species, Species_lab))</span>
<span id="cb54-22"><a href="#cb54-22" tabindex="-1"></a><span class="do">### &gt;             Species_lab</span></span>
<span id="cb54-23"><a href="#cb54-23" tabindex="-1"></a><span class="do">### &gt; Species      se ve vi</span></span>
<span id="cb54-24"><a href="#cb54-24" tabindex="-1"></a><span class="do">### &gt;   setosa     50  0  0</span></span>
<span id="cb54-25"><a href="#cb54-25" tabindex="-1"></a><span class="do">### &gt;   versicolor  0 50  0</span></span>
<span id="cb54-26"><a href="#cb54-26" tabindex="-1"></a><span class="do">### &gt;   virginica   0  0 50</span></span></code></pre></div>
<p>Caution: Replacing the entire data.frame using
<code>use_val_labs()</code> WILL coerce factors to character, since the
value labels are character values, not recognized factor levels</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a>ir_char <span class="ot">&lt;-</span> <span class="fu">use_val_labs</span>(irlab) <span class="co"># we assign this to a new data.frame</span></span>
<span id="cb55-2"><a href="#cb55-2" tabindex="-1"></a><span class="fu">sapply</span>(ir_char, class)</span>
<span id="cb55-3"><a href="#cb55-3" tabindex="-1"></a><span class="do">### &gt; Sepal.Length  Sepal.Width Petal.Length  Petal.Width      Species </span></span>
<span id="cb55-4"><a href="#cb55-4" tabindex="-1"></a><span class="do">### &gt;    &quot;numeric&quot;    &quot;numeric&quot;    &quot;numeric&quot;    &quot;numeric&quot;  &quot;character&quot;</span></span>
<span id="cb55-5"><a href="#cb55-5" tabindex="-1"></a></span>
<span id="cb55-6"><a href="#cb55-6" tabindex="-1"></a><span class="fu">head</span>(ir_char, <span class="dv">3</span>)</span>
<span id="cb55-7"><a href="#cb55-7" tabindex="-1"></a><span class="do">### &gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb55-8"><a href="#cb55-8" tabindex="-1"></a><span class="do">### &gt; 1          5.1         3.5          1.4         0.2      se</span></span>
<span id="cb55-9"><a href="#cb55-9" tabindex="-1"></a><span class="do">### &gt; 2          4.9         3.0          1.4         0.2      se</span></span>
<span id="cb55-10"><a href="#cb55-10" tabindex="-1"></a><span class="do">### &gt; 3          4.7         3.2          1.3         0.2      se</span></span>
<span id="cb55-11"><a href="#cb55-11" tabindex="-1"></a></span>
<span id="cb55-12"><a href="#cb55-12" tabindex="-1"></a><span class="fu">class</span>(ir_char<span class="sc">$</span>Species) <span class="co"># it&#39;s character</span></span>
<span id="cb55-13"><a href="#cb55-13" tabindex="-1"></a><span class="do">### &gt; [1] &quot;character&quot;</span></span></code></pre></div>
<p>Of course, even then, we could explicitly coerce the labels to be
factors if we wanted</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a>ir_fact <span class="ot">&lt;-</span> <span class="fu">use_val_labs</span>(irlab)</span>
<span id="cb56-2"><a href="#cb56-2" tabindex="-1"></a></span>
<span id="cb56-3"><a href="#cb56-3" tabindex="-1"></a>ir_fact<span class="sc">$</span>Species <span class="ot">&lt;-</span> <span class="fu">factor</span>(ir_char<span class="sc">$</span>Species,</span>
<span id="cb56-4"><a href="#cb56-4" tabindex="-1"></a>  <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ve&quot;</span>, <span class="st">&quot;vi&quot;</span>),</span>
<span id="cb56-5"><a href="#cb56-5" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ve&quot;</span>, <span class="st">&quot;vi&quot;</span>)</span>
<span id="cb56-6"><a href="#cb56-6" tabindex="-1"></a>)</span>
<span id="cb56-7"><a href="#cb56-7" tabindex="-1"></a><span class="fu">head</span>(ir_fact, <span class="dv">3</span>)</span>
<span id="cb56-8"><a href="#cb56-8" tabindex="-1"></a><span class="do">### &gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb56-9"><a href="#cb56-9" tabindex="-1"></a><span class="do">### &gt; 1          5.1         3.5          1.4         0.2      se</span></span>
<span id="cb56-10"><a href="#cb56-10" tabindex="-1"></a><span class="do">### &gt; 2          4.9         3.0          1.4         0.2      se</span></span>
<span id="cb56-11"><a href="#cb56-11" tabindex="-1"></a><span class="do">### &gt; 3          4.7         3.2          1.3         0.2      se</span></span>
<span id="cb56-12"><a href="#cb56-12" tabindex="-1"></a></span>
<span id="cb56-13"><a href="#cb56-13" tabindex="-1"></a><span class="fu">class</span>(ir_fact<span class="sc">$</span>Species) <span class="co"># it&#39;s a factor</span></span>
<span id="cb56-14"><a href="#cb56-14" tabindex="-1"></a><span class="do">### &gt; [1] &quot;factor&quot;</span></span>
<span id="cb56-15"><a href="#cb56-15" tabindex="-1"></a></span>
<span id="cb56-16"><a href="#cb56-16" tabindex="-1"></a><span class="fu">levels</span>(ir_fact<span class="sc">$</span>Species) <span class="co"># it&#39;s a factor</span></span>
<span id="cb56-17"><a href="#cb56-17" tabindex="-1"></a><span class="do">### &gt; [1] &quot;se&quot; &quot;ve&quot; &quot;vi&quot;</span></span></code></pre></div>
<p>We’ve recovered.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a><span class="fu">with</span>(ir_fact, <span class="fu">tapply</span>(Sepal.Width, Species, mean))</span>
<span id="cb57-2"><a href="#cb57-2" tabindex="-1"></a><span class="do">### &gt;    se    ve    vi </span></span>
<span id="cb57-3"><a href="#cb57-3" tabindex="-1"></a><span class="do">### &gt; 3.428 2.770 2.974</span></span>
<span id="cb57-4"><a href="#cb57-4" tabindex="-1"></a><span class="fu">with</span>(irlab, <span class="fu">tapply</span>(Sepal.Width, Species, mean))</span>
<span id="cb57-5"><a href="#cb57-5" tabindex="-1"></a><span class="do">### &gt;     setosa versicolor  virginica </span></span>
<span id="cb57-6"><a href="#cb57-6" tabindex="-1"></a><span class="do">### &gt;      3.428      2.770      2.974</span></span>
<span id="cb57-7"><a href="#cb57-7" tabindex="-1"></a><span class="fu">with</span>(iris, <span class="fu">tapply</span>(Sepal.Width, Species, mean))</span>
<span id="cb57-8"><a href="#cb57-8" tabindex="-1"></a><span class="do">### &gt;     setosa versicolor  virginica </span></span>
<span id="cb57-9"><a href="#cb57-9" tabindex="-1"></a><span class="do">### &gt;      3.428      2.770      2.974</span></span></code></pre></div>
</div>
<div id="ordered-factors" class="section level3">
<h3>Ordered factors</h3>
<p>Value labels work with ordered factors, too. Let’s make a fictional
ordered factor that we add to ir_ord. We can pretend that this is some
sort of judge’s overall quality rating, if that helps.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a>ir_ord <span class="ot">&lt;-</span> iris</span>
<span id="cb58-2"><a href="#cb58-2" tabindex="-1"></a></span>
<span id="cb58-3"><a href="#cb58-3" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">293</span>)</span>
<span id="cb58-4"><a href="#cb58-4" tabindex="-1"></a>qrating <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;AAA&quot;</span>, <span class="st">&quot;AA&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;BBB&quot;</span>, <span class="st">&quot;AA&quot;</span>, <span class="st">&quot;BBB&quot;</span>, <span class="st">&quot;A&quot;</span>)</span>
<span id="cb58-5"><a href="#cb58-5" tabindex="-1"></a></span>
<span id="cb58-6"><a href="#cb58-6" tabindex="-1"></a>ir_ord<span class="sc">$</span>qrat <span class="ot">&lt;-</span> <span class="fu">sample</span>(qrating, <span class="dv">150</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb58-7"><a href="#cb58-7" tabindex="-1"></a></span>
<span id="cb58-8"><a href="#cb58-8" tabindex="-1"></a>ir_ord<span class="sc">$</span>qrat <span class="ot">&lt;-</span> <span class="fu">factor</span>(ir_ord<span class="sc">$</span>qrat,</span>
<span id="cb58-9"><a href="#cb58-9" tabindex="-1"></a>  <span class="at">ordered =</span> <span class="cn">TRUE</span>,</span>
<span id="cb58-10"><a href="#cb58-10" tabindex="-1"></a>  <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;AAA&quot;</span>, <span class="st">&quot;AA&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;BBB&quot;</span>)</span>
<span id="cb58-11"><a href="#cb58-11" tabindex="-1"></a>)</span></code></pre></div>
<p>Where do we stand with this factor?</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" tabindex="-1"></a><span class="fu">levels</span>(ir_ord<span class="sc">$</span>qrat)</span>
<span id="cb59-2"><a href="#cb59-2" tabindex="-1"></a><span class="do">### &gt; [1] &quot;AAA&quot; &quot;AA&quot;  &quot;A&quot;   &quot;BBB&quot;</span></span>
<span id="cb59-3"><a href="#cb59-3" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" tabindex="-1"></a><span class="fu">class</span>(ir_ord<span class="sc">$</span>qrat)</span>
<span id="cb59-5"><a href="#cb59-5" tabindex="-1"></a><span class="do">### &gt; [1] &quot;ordered&quot; &quot;factor&quot;</span></span></code></pre></div>
<p>Now, let’s add value labels to it.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" tabindex="-1"></a>ir_ord <span class="ot">&lt;-</span> <span class="fu">add_val_labs</span>(ir_ord,</span>
<span id="cb60-2"><a href="#cb60-2" tabindex="-1"></a>  <span class="at">vars =</span> <span class="st">&quot;qrat&quot;</span>,</span>
<span id="cb60-3"><a href="#cb60-3" tabindex="-1"></a>  <span class="at">vals =</span> <span class="fu">c</span>(<span class="st">&quot;AAA&quot;</span>, <span class="st">&quot;AA&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;BBB&quot;</span>),</span>
<span id="cb60-4"><a href="#cb60-4" tabindex="-1"></a>  <span class="at">labs =</span> <span class="fu">c</span>(</span>
<span id="cb60-5"><a href="#cb60-5" tabindex="-1"></a>    <span class="st">&quot;unimpeachable&quot;</span>,</span>
<span id="cb60-6"><a href="#cb60-6" tabindex="-1"></a>    <span class="st">&quot;excellent&quot;</span>,</span>
<span id="cb60-7"><a href="#cb60-7" tabindex="-1"></a>    <span class="st">&quot;very good&quot;</span>,</span>
<span id="cb60-8"><a href="#cb60-8" tabindex="-1"></a>    <span class="st">&quot;meh&quot;</span></span>
<span id="cb60-9"><a href="#cb60-9" tabindex="-1"></a>  )</span>
<span id="cb60-10"><a href="#cb60-10" tabindex="-1"></a>)</span>
<span id="cb60-11"><a href="#cb60-11" tabindex="-1"></a><span class="do">### &gt; Labeling variable --qrat--:</span></span>
<span id="cb60-12"><a href="#cb60-12" tabindex="-1"></a><span class="do">### &gt;    var vals          labs</span></span>
<span id="cb60-13"><a href="#cb60-13" tabindex="-1"></a><span class="do">### &gt; 1 qrat    A     very good</span></span>
<span id="cb60-14"><a href="#cb60-14" tabindex="-1"></a><span class="do">### &gt; 2 qrat   AA     excellent</span></span>
<span id="cb60-15"><a href="#cb60-15" tabindex="-1"></a><span class="do">### &gt; 3 qrat  AAA unimpeachable</span></span>
<span id="cb60-16"><a href="#cb60-16" tabindex="-1"></a><span class="do">### &gt; 4 qrat  BBB           meh</span></span>
<span id="cb60-17"><a href="#cb60-17" tabindex="-1"></a><span class="do">### &gt; 5 qrat   NA            NA</span></span></code></pre></div>
<p>Let’s add a separate column with those labels as a distinct
(character) variable unto itself, existing in addition to (not
replacing) “qrat”.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" tabindex="-1"></a>ir_ord <span class="ot">&lt;-</span> <span class="fu">add_lab_cols</span>(ir_ord, <span class="at">vars =</span> <span class="st">&quot;qrat&quot;</span>)</span>
<span id="cb61-2"><a href="#cb61-2" tabindex="-1"></a></span>
<span id="cb61-3"><a href="#cb61-3" tabindex="-1"></a><span class="fu">head</span>(ir_ord, <span class="dv">10</span>)</span>
<span id="cb61-4"><a href="#cb61-4" tabindex="-1"></a><span class="do">### &gt;    Sepal.Length Sepal.Width Petal.Length Petal.Width Species qrat      qrat_lab</span></span>
<span id="cb61-5"><a href="#cb61-5" tabindex="-1"></a><span class="do">### &gt; 1           5.1         3.5          1.4         0.2  setosa   AA     excellent</span></span>
<span id="cb61-6"><a href="#cb61-6" tabindex="-1"></a><span class="do">### &gt; 2           4.9         3.0          1.4         0.2  setosa   AA     excellent</span></span>
<span id="cb61-7"><a href="#cb61-7" tabindex="-1"></a><span class="do">### &gt; 3           4.7         3.2          1.3         0.2  setosa   AA     excellent</span></span>
<span id="cb61-8"><a href="#cb61-8" tabindex="-1"></a><span class="do">### &gt; 4           4.6         3.1          1.5         0.2  setosa  AAA unimpeachable</span></span>
<span id="cb61-9"><a href="#cb61-9" tabindex="-1"></a><span class="do">### &gt; 5           5.0         3.6          1.4         0.2  setosa   AA     excellent</span></span>
<span id="cb61-10"><a href="#cb61-10" tabindex="-1"></a><span class="do">### &gt; 6           5.4         3.9          1.7         0.4  setosa  BBB           meh</span></span>
<span id="cb61-11"><a href="#cb61-11" tabindex="-1"></a><span class="do">### &gt; 7           4.6         3.4          1.4         0.3  setosa  AAA unimpeachable</span></span>
<span id="cb61-12"><a href="#cb61-12" tabindex="-1"></a><span class="do">### &gt; 8           5.0         3.4          1.5         0.2  setosa   AA     excellent</span></span>
<span id="cb61-13"><a href="#cb61-13" tabindex="-1"></a><span class="do">### &gt; 9           4.4         2.9          1.4         0.2  setosa    A     very good</span></span>
<span id="cb61-14"><a href="#cb61-14" tabindex="-1"></a><span class="do">### &gt; 10          4.9         3.1          1.5         0.1  setosa    A     very good</span></span>
<span id="cb61-15"><a href="#cb61-15" tabindex="-1"></a></span>
<span id="cb61-16"><a href="#cb61-16" tabindex="-1"></a><span class="fu">with</span>(ir_ord, <span class="fu">table</span>(qrat_lab, qrat))</span>
<span id="cb61-17"><a href="#cb61-17" tabindex="-1"></a><span class="do">### &gt;                qrat</span></span>
<span id="cb61-18"><a href="#cb61-18" tabindex="-1"></a><span class="do">### &gt; qrat_lab        AAA AA  A BBB</span></span>
<span id="cb61-19"><a href="#cb61-19" tabindex="-1"></a><span class="do">### &gt;   excellent       0 49  0   0</span></span>
<span id="cb61-20"><a href="#cb61-20" tabindex="-1"></a><span class="do">### &gt;   meh             0  0  0  43</span></span>
<span id="cb61-21"><a href="#cb61-21" tabindex="-1"></a><span class="do">### &gt;   unimpeachable  11  0  0   0</span></span>
<span id="cb61-22"><a href="#cb61-22" tabindex="-1"></a><span class="do">### &gt;   very good       0  0 47   0</span></span>
<span id="cb61-23"><a href="#cb61-23" tabindex="-1"></a></span>
<span id="cb61-24"><a href="#cb61-24" tabindex="-1"></a><span class="fu">class</span>(ir_ord<span class="sc">$</span>qrat)</span>
<span id="cb61-25"><a href="#cb61-25" tabindex="-1"></a><span class="do">### &gt; [1] &quot;ordered&quot; &quot;factor&quot;</span></span>
<span id="cb61-26"><a href="#cb61-26" tabindex="-1"></a></span>
<span id="cb61-27"><a href="#cb61-27" tabindex="-1"></a><span class="fu">levels</span>(ir_ord<span class="sc">$</span>qrat)</span>
<span id="cb61-28"><a href="#cb61-28" tabindex="-1"></a><span class="do">### &gt; [1] &quot;AAA&quot; &quot;AA&quot;  &quot;A&quot;   &quot;BBB&quot;</span></span>
<span id="cb61-29"><a href="#cb61-29" tabindex="-1"></a></span>
<span id="cb61-30"><a href="#cb61-30" tabindex="-1"></a><span class="fu">class</span>(ir_ord<span class="sc">$</span>qrat_lab)</span>
<span id="cb61-31"><a href="#cb61-31" tabindex="-1"></a><span class="do">### &gt; [1] &quot;character&quot;</span></span>
<span id="cb61-32"><a href="#cb61-32" tabindex="-1"></a></span>
<span id="cb61-33"><a href="#cb61-33" tabindex="-1"></a><span class="fu">get_val_labs</span>(ir_ord, <span class="st">&quot;qrat&quot;</span>) <span class="co"># labs are still there for qrat</span></span>
<span id="cb61-34"><a href="#cb61-34" tabindex="-1"></a><span class="do">### &gt;    var vals          labs</span></span>
<span id="cb61-35"><a href="#cb61-35" tabindex="-1"></a><span class="do">### &gt; 1 qrat    A     very good</span></span>
<span id="cb61-36"><a href="#cb61-36" tabindex="-1"></a><span class="do">### &gt; 2 qrat   AA     excellent</span></span>
<span id="cb61-37"><a href="#cb61-37" tabindex="-1"></a><span class="do">### &gt; 3 qrat  AAA unimpeachable</span></span>
<span id="cb61-38"><a href="#cb61-38" tabindex="-1"></a><span class="do">### &gt; 4 qrat  BBB           meh</span></span>
<span id="cb61-39"><a href="#cb61-39" tabindex="-1"></a><span class="do">### &gt; 5 qrat   NA            NA</span></span>
<span id="cb61-40"><a href="#cb61-40" tabindex="-1"></a></span>
<span id="cb61-41"><a href="#cb61-41" tabindex="-1"></a><span class="fu">get_val_labs</span>(ir_ord, <span class="st">&quot;qrat_lab&quot;</span>) <span class="co"># no labs here; this is just a character var</span></span>
<span id="cb61-42"><a href="#cb61-42" tabindex="-1"></a><span class="do">### &gt; Warning in get_val_labs(ir_ord, &quot;qrat_lab&quot;): </span></span>
<span id="cb61-43"><a href="#cb61-43" tabindex="-1"></a><span class="do">### &gt;  </span></span>
<span id="cb61-44"><a href="#cb61-44" tabindex="-1"></a><span class="do">### &gt;   No val.labs found.</span></span>
<span id="cb61-45"><a href="#cb61-45" tabindex="-1"></a><span class="do">### &gt; [1] var  vals labs</span></span>
<span id="cb61-46"><a href="#cb61-46" tabindex="-1"></a><span class="do">### &gt; &lt;0 rows&gt; (or 0-length row.names)</span></span></code></pre></div>
<p>It appears that you really can have it all, where “it all” is defined
as “factors and labels.”</p>
</div>
</div>
<div id="larger-data-frames" class="section level2">
<h2>Larger Data Frames</h2>
<p>labelr is not intended for “large” data.frames, which is a fuzzy
concept. To give a sense of what labelr <strong>can</strong> handle,
let’s see it in action with the NYC Flights 2013 data set: a
moderate-not-big data.frame of ~340K rows.</p>
<p>Let’s load labelr and the nycflights13 package.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" tabindex="-1"></a>opening_ding <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>() <span class="co"># to time labelr</span></span>
<span id="cb62-2"><a href="#cb62-2" tabindex="-1"></a></span>
<span id="cb62-3"><a href="#cb62-3" tabindex="-1"></a><span class="fu">library</span>(nycflights13)</span>
<span id="cb62-4"><a href="#cb62-4" tabindex="-1"></a><span class="do">### &gt; Warning: package &#39;nycflights13&#39; was built under R version 4.3.2</span></span></code></pre></div>
<p>We’ll assign the data.frame to one we call df.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> flights</span>
<span id="cb63-2"><a href="#cb63-2" tabindex="-1"></a></span>
<span id="cb63-3"><a href="#cb63-3" tabindex="-1"></a><span class="fu">nrow</span>(df)</span>
<span id="cb63-4"><a href="#cb63-4" tabindex="-1"></a><span class="do">### &gt; [1] 336776</span></span></code></pre></div>
<p>We’ll add a “frame label,” which describes the data.frame
overall.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">add_frame_lab</span>(df, <span class="at">frame.lab =</span> <span class="st">&quot;On-time data for all flights that</span></span>
<span id="cb64-2"><a href="#cb64-2" tabindex="-1"></a><span class="st">                    departed NYC (i.e. JFK, LGA or EWR) in 2013.&quot;</span>)</span>
<span id="cb64-3"><a href="#cb64-3" tabindex="-1"></a><span class="do">### &gt; Warning in as_base_data_frame(data): </span></span>
<span id="cb64-4"><a href="#cb64-4" tabindex="-1"></a><span class="do">### &gt; data argument object coerced from augmented to conventional (Base R) data.frame.</span></span></code></pre></div>
<p>Let’s see what this did.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" tabindex="-1"></a><span class="fu">attr</span>(df, <span class="st">&quot;frame.lab&quot;</span>) <span class="co"># check for attribute</span></span>
<span id="cb65-2"><a href="#cb65-2" tabindex="-1"></a><span class="do">### &gt; [1] &quot;On-time data for all flights that departed NYC (i.e. JFK, LGA or EWR) in 2013.&quot;</span></span>
<span id="cb65-3"><a href="#cb65-3" tabindex="-1"></a></span>
<span id="cb65-4"><a href="#cb65-4" tabindex="-1"></a><span class="fu">get_frame_lab</span>(df) <span class="co"># return frame.lab alongside data.frame name as a data.frame</span></span>
<span id="cb65-5"><a href="#cb65-5" tabindex="-1"></a><span class="do">### &gt;   data.frame                                                                      frame.lab</span></span>
<span id="cb65-6"><a href="#cb65-6" tabindex="-1"></a><span class="do">### &gt; 1         df On-time data for all flights that departed NYC (i.e. JFK, LGA or EWR) in 2013.</span></span>
<span id="cb65-7"><a href="#cb65-7" tabindex="-1"></a></span>
<span id="cb65-8"><a href="#cb65-8" tabindex="-1"></a><span class="fu">get_frame_lab</span>(df)<span class="sc">$</span>frame.lab</span>
<span id="cb65-9"><a href="#cb65-9" tabindex="-1"></a><span class="do">### &gt; [1] &quot;On-time data for all flights that departed NYC (i.e. JFK, LGA or EWR) in 2013.&quot;</span></span></code></pre></div>
<p>Now, let’s assign variable NAME labels.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" tabindex="-1"></a>names_labs_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb66-2"><a href="#cb66-2" tabindex="-1"></a>  <span class="st">&quot;year&quot;</span> <span class="ot">=</span> <span class="st">&quot;Year of departure&quot;</span>,</span>
<span id="cb66-3"><a href="#cb66-3" tabindex="-1"></a>  <span class="st">&quot;month&quot;</span> <span class="ot">=</span> <span class="st">&quot;Month of departure&quot;</span>,</span>
<span id="cb66-4"><a href="#cb66-4" tabindex="-1"></a>  <span class="st">&quot;year&quot;</span> <span class="ot">=</span> <span class="st">&quot;Day of departure&quot;</span>,</span>
<span id="cb66-5"><a href="#cb66-5" tabindex="-1"></a>  <span class="st">&quot;dep_time&quot;</span> <span class="ot">=</span> <span class="st">&quot;Actual departure time (format HHMM or HMM), local tz&quot;</span>,</span>
<span id="cb66-6"><a href="#cb66-6" tabindex="-1"></a>  <span class="st">&quot;arr_time&quot;</span> <span class="ot">=</span> <span class="st">&quot;Actual arrival time (format HHMM or HMM), local tz&quot;</span>,</span>
<span id="cb66-7"><a href="#cb66-7" tabindex="-1"></a>  <span class="st">&quot;sched_dep_time&quot;</span> <span class="ot">=</span> <span class="st">&quot;Scheduled departure times (format HHMM or HMM)&quot;</span>,</span>
<span id="cb66-8"><a href="#cb66-8" tabindex="-1"></a>  <span class="st">&quot;sched_arr_time&quot;</span> <span class="ot">=</span> <span class="st">&quot;Scheduled arrival time (format HHMM or HMM)&quot;</span>,</span>
<span id="cb66-9"><a href="#cb66-9" tabindex="-1"></a>  <span class="st">&quot;dep_delay&quot;</span> <span class="ot">=</span> <span class="st">&quot;Departure delays, in minutes&quot;</span>,</span>
<span id="cb66-10"><a href="#cb66-10" tabindex="-1"></a>  <span class="st">&quot;arr_delay&quot;</span> <span class="ot">=</span> <span class="st">&quot;Arrival delays, in minutes&quot;</span>,</span>
<span id="cb66-11"><a href="#cb66-11" tabindex="-1"></a>  <span class="st">&quot;carrier&quot;</span> <span class="ot">=</span> <span class="st">&quot;Two letter airline carrier abbreviation&quot;</span>,</span>
<span id="cb66-12"><a href="#cb66-12" tabindex="-1"></a>  <span class="st">&quot;flight&quot;</span> <span class="ot">=</span> <span class="st">&quot;Flight number&quot;</span>,</span>
<span id="cb66-13"><a href="#cb66-13" tabindex="-1"></a>  <span class="st">&quot;tailnum&quot;</span> <span class="ot">=</span> <span class="st">&quot;Plane tail number&quot;</span>,</span>
<span id="cb66-14"><a href="#cb66-14" tabindex="-1"></a>  <span class="st">&quot;origin&quot;</span> <span class="ot">=</span> <span class="st">&quot;Flight origin airport code&quot;</span>,</span>
<span id="cb66-15"><a href="#cb66-15" tabindex="-1"></a>  <span class="st">&quot;dest&quot;</span> <span class="ot">=</span> <span class="st">&quot;Flight destination airport code&quot;</span>,</span>
<span id="cb66-16"><a href="#cb66-16" tabindex="-1"></a>  <span class="st">&quot;air_time&quot;</span> <span class="ot">=</span> <span class="st">&quot;Minutes spent in the air&quot;</span>,</span>
<span id="cb66-17"><a href="#cb66-17" tabindex="-1"></a>  <span class="st">&quot;distance&quot;</span> <span class="ot">=</span> <span class="st">&quot;Miles between airports&quot;</span>,</span>
<span id="cb66-18"><a href="#cb66-18" tabindex="-1"></a>  <span class="st">&quot;hour&quot;</span> <span class="ot">=</span> <span class="st">&quot;Hour of scheduled departure time&quot;</span>,</span>
<span id="cb66-19"><a href="#cb66-19" tabindex="-1"></a>  <span class="st">&quot;minute&quot;</span> <span class="ot">=</span> <span class="st">&quot;Minutes component of scheduled departure time&quot;</span>,</span>
<span id="cb66-20"><a href="#cb66-20" tabindex="-1"></a>  <span class="st">&quot;time_hour&quot;</span> <span class="ot">=</span> <span class="st">&quot;Scheduled date and hour of the flight as a POSIXct date&quot;</span></span>
<span id="cb66-21"><a href="#cb66-21" tabindex="-1"></a>)</span>
<span id="cb66-22"><a href="#cb66-22" tabindex="-1"></a></span>
<span id="cb66-23"><a href="#cb66-23" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">add_name_labs</span>(df, <span class="at">name.labs =</span> names_labs_vec)</span>
<span id="cb66-24"><a href="#cb66-24" tabindex="-1"></a></span>
<span id="cb66-25"><a href="#cb66-25" tabindex="-1"></a><span class="fu">get_name_labs</span>(df) <span class="co"># show that they&#39;ve been added</span></span>
<span id="cb66-26"><a href="#cb66-26" tabindex="-1"></a><span class="do">### &gt;               var                                                     lab</span></span>
<span id="cb66-27"><a href="#cb66-27" tabindex="-1"></a><span class="do">### &gt; 1            year                                        Day of departure</span></span>
<span id="cb66-28"><a href="#cb66-28" tabindex="-1"></a><span class="do">### &gt; 2           month                                      Month of departure</span></span>
<span id="cb66-29"><a href="#cb66-29" tabindex="-1"></a><span class="do">### &gt; 3             day                                                     day</span></span>
<span id="cb66-30"><a href="#cb66-30" tabindex="-1"></a><span class="do">### &gt; 4        dep_time    Actual departure time (format HHMM or HMM), local tz</span></span>
<span id="cb66-31"><a href="#cb66-31" tabindex="-1"></a><span class="do">### &gt; 5  sched_dep_time          Scheduled departure times (format HHMM or HMM)</span></span>
<span id="cb66-32"><a href="#cb66-32" tabindex="-1"></a><span class="do">### &gt; 6       dep_delay                            Departure delays, in minutes</span></span>
<span id="cb66-33"><a href="#cb66-33" tabindex="-1"></a><span class="do">### &gt; 7        arr_time      Actual arrival time (format HHMM or HMM), local tz</span></span>
<span id="cb66-34"><a href="#cb66-34" tabindex="-1"></a><span class="do">### &gt; 8  sched_arr_time             Scheduled arrival time (format HHMM or HMM)</span></span>
<span id="cb66-35"><a href="#cb66-35" tabindex="-1"></a><span class="do">### &gt; 9       arr_delay                              Arrival delays, in minutes</span></span>
<span id="cb66-36"><a href="#cb66-36" tabindex="-1"></a><span class="do">### &gt; 10        carrier                 Two letter airline carrier abbreviation</span></span>
<span id="cb66-37"><a href="#cb66-37" tabindex="-1"></a><span class="do">### &gt; 11         flight                                           Flight number</span></span>
<span id="cb66-38"><a href="#cb66-38" tabindex="-1"></a><span class="do">### &gt; 12        tailnum                                       Plane tail number</span></span>
<span id="cb66-39"><a href="#cb66-39" tabindex="-1"></a><span class="do">### &gt; 13         origin                              Flight origin airport code</span></span>
<span id="cb66-40"><a href="#cb66-40" tabindex="-1"></a><span class="do">### &gt; 14           dest                         Flight destination airport code</span></span>
<span id="cb66-41"><a href="#cb66-41" tabindex="-1"></a><span class="do">### &gt; 15       air_time                                Minutes spent in the air</span></span>
<span id="cb66-42"><a href="#cb66-42" tabindex="-1"></a><span class="do">### &gt; 16       distance                                  Miles between airports</span></span>
<span id="cb66-43"><a href="#cb66-43" tabindex="-1"></a><span class="do">### &gt; 17           hour                        Hour of scheduled departure time</span></span>
<span id="cb66-44"><a href="#cb66-44" tabindex="-1"></a><span class="do">### &gt; 18         minute           Minutes component of scheduled departure time</span></span>
<span id="cb66-45"><a href="#cb66-45" tabindex="-1"></a><span class="do">### &gt; 19      time_hour Scheduled date and hour of the flight as a POSIXct date</span></span></code></pre></div>
<p>Let’s add variable VALUE labels for variable “carrier.” Helpfully,
this ships with the nycflights13 package itself.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" tabindex="-1"></a>airlines <span class="ot">&lt;-</span> nycflights13<span class="sc">::</span>airlines</span>
<span id="cb67-2"><a href="#cb67-2" tabindex="-1"></a></span>
<span id="cb67-3"><a href="#cb67-3" tabindex="-1"></a><span class="fu">head</span>(airlines)</span>
<span id="cb67-4"><a href="#cb67-4" tabindex="-1"></a><span class="do">### &gt; # A tibble: 6 × 2</span></span>
<span id="cb67-5"><a href="#cb67-5" tabindex="-1"></a><span class="do">### &gt;   carrier name                    </span></span>
<span id="cb67-6"><a href="#cb67-6" tabindex="-1"></a><span class="do">### &gt;   &lt;chr&gt;   &lt;chr&gt;                   </span></span>
<span id="cb67-7"><a href="#cb67-7" tabindex="-1"></a><span class="do">### &gt; 1 9E      Endeavor Air Inc.       </span></span>
<span id="cb67-8"><a href="#cb67-8" tabindex="-1"></a><span class="do">### &gt; 2 AA      American Airlines Inc.  </span></span>
<span id="cb67-9"><a href="#cb67-9" tabindex="-1"></a><span class="do">### &gt; 3 AS      Alaska Airlines Inc.    </span></span>
<span id="cb67-10"><a href="#cb67-10" tabindex="-1"></a><span class="do">### &gt; 4 B6      JetBlue Airways         </span></span>
<span id="cb67-11"><a href="#cb67-11" tabindex="-1"></a><span class="do">### &gt; 5 DL      Delta Air Lines Inc.    </span></span>
<span id="cb67-12"><a href="#cb67-12" tabindex="-1"></a><span class="do">### &gt; 6 EV      ExpressJet Airlines Inc.</span></span></code></pre></div>
<p>The carrier field of airlines matches the carrier column of df
(formerly, flights)</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" tabindex="-1"></a>ny_val <span class="ot">&lt;-</span> airlines<span class="sc">$</span>carrier</span></code></pre></div>
<p>The name field of airlines gives us the full airline names.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" tabindex="-1"></a>ny_lab <span class="ot">&lt;-</span> airlines<span class="sc">$</span>name</span></code></pre></div>
<p>df (flights) also has an integer month variable. We will “hand-jam”
month value labels</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" tabindex="-1"></a>ny_month_vals <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>) <span class="co"># values</span></span>
<span id="cb70-2"><a href="#cb70-2" tabindex="-1"></a>ny_month_labs <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb70-3"><a href="#cb70-3" tabindex="-1"></a>  <span class="st">&quot;JAN&quot;</span>, <span class="st">&quot;FEB&quot;</span>, <span class="st">&quot;MAR&quot;</span>, <span class="st">&quot;APR&quot;</span>, <span class="st">&quot;MAY&quot;</span>, <span class="st">&quot;JUN&quot;</span>,</span>
<span id="cb70-4"><a href="#cb70-4" tabindex="-1"></a>  <span class="st">&quot;JUL&quot;</span>, <span class="st">&quot;AUG&quot;</span>, <span class="st">&quot;SEP&quot;</span>, <span class="st">&quot;OCT&quot;</span>, <span class="st">&quot;NOV&quot;</span>, <span class="st">&quot;DEC&quot;</span></span>
<span id="cb70-5"><a href="#cb70-5" tabindex="-1"></a>) <span class="co"># labels</span></span></code></pre></div>
<p>Let’s add these value labels. First, we’ll demo
<code>add_val1()</code>, then <code>add_val_labs()</code>, then
<code>add_quant_labs()</code>.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">add_val1</span>(df,</span>
<span id="cb71-2"><a href="#cb71-2" tabindex="-1"></a>  <span class="at">var =</span> carrier, <span class="at">vals =</span> ny_val,</span>
<span id="cb71-3"><a href="#cb71-3" tabindex="-1"></a>  <span class="at">labs =</span> ny_lab,</span>
<span id="cb71-4"><a href="#cb71-4" tabindex="-1"></a>  <span class="at">max.unique.vals =</span> <span class="dv">20</span></span>
<span id="cb71-5"><a href="#cb71-5" tabindex="-1"></a>)</span>
<span id="cb71-6"><a href="#cb71-6" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb71-7"><a href="#cb71-7" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb71-8"><a href="#cb71-8" tabindex="-1"></a><span class="do">### &gt; Note: labelr is not optimized for data.frames this large.</span></span>
<span id="cb71-9"><a href="#cb71-9" tabindex="-1"></a><span class="do">### &gt; Labeling variable --carrier--:</span></span>
<span id="cb71-10"><a href="#cb71-10" tabindex="-1"></a><span class="do">### &gt;        var vals                        labs</span></span>
<span id="cb71-11"><a href="#cb71-11" tabindex="-1"></a><span class="do">### &gt; 1  carrier   9E           Endeavor Air Inc.</span></span>
<span id="cb71-12"><a href="#cb71-12" tabindex="-1"></a><span class="do">### &gt; 2  carrier   AA      American Airlines Inc.</span></span>
<span id="cb71-13"><a href="#cb71-13" tabindex="-1"></a><span class="do">### &gt; 3  carrier   AS        Alaska Airlines Inc.</span></span>
<span id="cb71-14"><a href="#cb71-14" tabindex="-1"></a><span class="do">### &gt; 4  carrier   B6             JetBlue Airways</span></span>
<span id="cb71-15"><a href="#cb71-15" tabindex="-1"></a><span class="do">### &gt; 5  carrier   DL        Delta Air Lines Inc.</span></span>
<span id="cb71-16"><a href="#cb71-16" tabindex="-1"></a><span class="do">### &gt; 6  carrier   EV    ExpressJet Airlines Inc.</span></span>
<span id="cb71-17"><a href="#cb71-17" tabindex="-1"></a><span class="do">### &gt; 7  carrier   F9      Frontier Airlines Inc.</span></span>
<span id="cb71-18"><a href="#cb71-18" tabindex="-1"></a><span class="do">### &gt; 8  carrier   FL AirTran Airways Corporation</span></span>
<span id="cb71-19"><a href="#cb71-19" tabindex="-1"></a><span class="do">### &gt; 9  carrier   HA      Hawaiian Airlines Inc.</span></span>
<span id="cb71-20"><a href="#cb71-20" tabindex="-1"></a><span class="do">### &gt; 10 carrier   MQ                   Envoy Air</span></span>
<span id="cb71-21"><a href="#cb71-21" tabindex="-1"></a><span class="do">### &gt; 11 carrier   OO       SkyWest Airlines Inc.</span></span>
<span id="cb71-22"><a href="#cb71-22" tabindex="-1"></a><span class="do">### &gt; 12 carrier   UA       United Air Lines Inc.</span></span>
<span id="cb71-23"><a href="#cb71-23" tabindex="-1"></a><span class="do">### &gt; 13 carrier   US             US Airways Inc.</span></span>
<span id="cb71-24"><a href="#cb71-24" tabindex="-1"></a><span class="do">### &gt; 14 carrier   VX              Virgin America</span></span>
<span id="cb71-25"><a href="#cb71-25" tabindex="-1"></a><span class="do">### &gt; 15 carrier   WN      Southwest Airlines Co.</span></span>
<span id="cb71-26"><a href="#cb71-26" tabindex="-1"></a><span class="do">### &gt; 16 carrier   YV          Mesa Airlines Inc.</span></span>
<span id="cb71-27"><a href="#cb71-27" tabindex="-1"></a><span class="do">### &gt; 17 carrier   NA                          NA</span></span></code></pre></div>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">add_val_labs</span>(df,</span>
<span id="cb72-2"><a href="#cb72-2" tabindex="-1"></a>  <span class="at">vars =</span> <span class="st">&quot;month&quot;</span>,</span>
<span id="cb72-3"><a href="#cb72-3" tabindex="-1"></a>  <span class="at">vals =</span> ny_month_vals,</span>
<span id="cb72-4"><a href="#cb72-4" tabindex="-1"></a>  <span class="at">labs =</span> ny_month_labs,</span>
<span id="cb72-5"><a href="#cb72-5" tabindex="-1"></a>  <span class="at">max.unique.vals =</span> <span class="dv">20</span></span>
<span id="cb72-6"><a href="#cb72-6" tabindex="-1"></a>)</span>
<span id="cb72-7"><a href="#cb72-7" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb72-8"><a href="#cb72-8" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb72-9"><a href="#cb72-9" tabindex="-1"></a><span class="do">### &gt; Note: labelr is not optimized for data.frames this large.</span></span>
<span id="cb72-10"><a href="#cb72-10" tabindex="-1"></a><span class="do">### &gt; Labeling variable --month--:</span></span>
<span id="cb72-11"><a href="#cb72-11" tabindex="-1"></a><span class="do">### &gt;      var vals labs</span></span>
<span id="cb72-12"><a href="#cb72-12" tabindex="-1"></a><span class="do">### &gt; 18 month    1  JAN</span></span>
<span id="cb72-13"><a href="#cb72-13" tabindex="-1"></a><span class="do">### &gt; 19 month    2  FEB</span></span>
<span id="cb72-14"><a href="#cb72-14" tabindex="-1"></a><span class="do">### &gt; 20 month    3  MAR</span></span>
<span id="cb72-15"><a href="#cb72-15" tabindex="-1"></a><span class="do">### &gt; 21 month    4  APR</span></span>
<span id="cb72-16"><a href="#cb72-16" tabindex="-1"></a><span class="do">### &gt; 22 month    5  MAY</span></span>
<span id="cb72-17"><a href="#cb72-17" tabindex="-1"></a><span class="do">### &gt; 23 month    6  JUN</span></span>
<span id="cb72-18"><a href="#cb72-18" tabindex="-1"></a><span class="do">### &gt; 24 month    7  JUL</span></span>
<span id="cb72-19"><a href="#cb72-19" tabindex="-1"></a><span class="do">### &gt; 25 month    8  AUG</span></span>
<span id="cb72-20"><a href="#cb72-20" tabindex="-1"></a><span class="do">### &gt; 26 month    9  SEP</span></span>
<span id="cb72-21"><a href="#cb72-21" tabindex="-1"></a><span class="do">### &gt; 27 month   10  OCT</span></span>
<span id="cb72-22"><a href="#cb72-22" tabindex="-1"></a><span class="do">### &gt; 28 month   11  NOV</span></span>
<span id="cb72-23"><a href="#cb72-23" tabindex="-1"></a><span class="do">### &gt; 29 month   12  DEC</span></span>
<span id="cb72-24"><a href="#cb72-24" tabindex="-1"></a><span class="do">### &gt; 30 month   NA   NA</span></span></code></pre></div>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">add_quant_labs</span>(df, <span class="st">&quot;dep_time&quot;</span>, <span class="at">qtiles =</span> <span class="dv">5</span>)</span>
<span id="cb73-2"><a href="#cb73-2" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb73-3"><a href="#cb73-3" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb73-4"><a href="#cb73-4" tabindex="-1"></a><span class="do">### &gt; Note: labelr is not optimized for data.frames this large.</span></span>
<span id="cb73-5"><a href="#cb73-5" tabindex="-1"></a><span class="do">### &gt; Labeling variable --dep_time--:</span></span>
<span id="cb73-6"><a href="#cb73-6" tabindex="-1"></a><span class="do">### &gt;         var vals labs</span></span>
<span id="cb73-7"><a href="#cb73-7" tabindex="-1"></a><span class="do">### &gt; 31 dep_time  827 q020</span></span>
<span id="cb73-8"><a href="#cb73-8" tabindex="-1"></a><span class="do">### &gt; 32 dep_time 1200 q040</span></span>
<span id="cb73-9"><a href="#cb73-9" tabindex="-1"></a><span class="do">### &gt; 33 dep_time 1536 q060</span></span>
<span id="cb73-10"><a href="#cb73-10" tabindex="-1"></a><span class="do">### &gt; 34 dep_time 1830 q080</span></span>
<span id="cb73-11"><a href="#cb73-11" tabindex="-1"></a><span class="do">### &gt; 35 dep_time 2400 q100</span></span>
<span id="cb73-12"><a href="#cb73-12" tabindex="-1"></a><span class="do">### &gt; 36 dep_time   NA   NA</span></span></code></pre></div>
<p>Let’s see where this leaves us.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" tabindex="-1"></a><span class="fu">get_val_labs</span>(df)</span>
<span id="cb74-2"><a href="#cb74-2" tabindex="-1"></a><span class="do">### &gt;         var vals                        labs</span></span>
<span id="cb74-3"><a href="#cb74-3" tabindex="-1"></a><span class="do">### &gt; 1     month    1                         JAN</span></span>
<span id="cb74-4"><a href="#cb74-4" tabindex="-1"></a><span class="do">### &gt; 2     month    2                         FEB</span></span>
<span id="cb74-5"><a href="#cb74-5" tabindex="-1"></a><span class="do">### &gt; 3     month    3                         MAR</span></span>
<span id="cb74-6"><a href="#cb74-6" tabindex="-1"></a><span class="do">### &gt; 4     month    4                         APR</span></span>
<span id="cb74-7"><a href="#cb74-7" tabindex="-1"></a><span class="do">### &gt; 5     month    5                         MAY</span></span>
<span id="cb74-8"><a href="#cb74-8" tabindex="-1"></a><span class="do">### &gt; 6     month    6                         JUN</span></span>
<span id="cb74-9"><a href="#cb74-9" tabindex="-1"></a><span class="do">### &gt; 7     month    7                         JUL</span></span>
<span id="cb74-10"><a href="#cb74-10" tabindex="-1"></a><span class="do">### &gt; 8     month    8                         AUG</span></span>
<span id="cb74-11"><a href="#cb74-11" tabindex="-1"></a><span class="do">### &gt; 9     month    9                         SEP</span></span>
<span id="cb74-12"><a href="#cb74-12" tabindex="-1"></a><span class="do">### &gt; 10    month   10                         OCT</span></span>
<span id="cb74-13"><a href="#cb74-13" tabindex="-1"></a><span class="do">### &gt; 11    month   11                         NOV</span></span>
<span id="cb74-14"><a href="#cb74-14" tabindex="-1"></a><span class="do">### &gt; 12    month   12                         DEC</span></span>
<span id="cb74-15"><a href="#cb74-15" tabindex="-1"></a><span class="do">### &gt; 13    month   NA                          NA</span></span>
<span id="cb74-16"><a href="#cb74-16" tabindex="-1"></a><span class="do">### &gt; 14 dep_time  827                        q020</span></span>
<span id="cb74-17"><a href="#cb74-17" tabindex="-1"></a><span class="do">### &gt; 15 dep_time 1200                        q040</span></span>
<span id="cb74-18"><a href="#cb74-18" tabindex="-1"></a><span class="do">### &gt; 16 dep_time 1536                        q060</span></span>
<span id="cb74-19"><a href="#cb74-19" tabindex="-1"></a><span class="do">### &gt; 17 dep_time 1830                        q080</span></span>
<span id="cb74-20"><a href="#cb74-20" tabindex="-1"></a><span class="do">### &gt; 18 dep_time 2400                        q100</span></span>
<span id="cb74-21"><a href="#cb74-21" tabindex="-1"></a><span class="do">### &gt; 19 dep_time   NA                          NA</span></span>
<span id="cb74-22"><a href="#cb74-22" tabindex="-1"></a><span class="do">### &gt; 20  carrier   9E           Endeavor Air Inc.</span></span>
<span id="cb74-23"><a href="#cb74-23" tabindex="-1"></a><span class="do">### &gt; 21  carrier   AA      American Airlines Inc.</span></span>
<span id="cb74-24"><a href="#cb74-24" tabindex="-1"></a><span class="do">### &gt; 22  carrier   AS        Alaska Airlines Inc.</span></span>
<span id="cb74-25"><a href="#cb74-25" tabindex="-1"></a><span class="do">### &gt; 23  carrier   B6             JetBlue Airways</span></span>
<span id="cb74-26"><a href="#cb74-26" tabindex="-1"></a><span class="do">### &gt; 24  carrier   DL        Delta Air Lines Inc.</span></span>
<span id="cb74-27"><a href="#cb74-27" tabindex="-1"></a><span class="do">### &gt; 25  carrier   EV    ExpressJet Airlines Inc.</span></span>
<span id="cb74-28"><a href="#cb74-28" tabindex="-1"></a><span class="do">### &gt; 26  carrier   F9      Frontier Airlines Inc.</span></span>
<span id="cb74-29"><a href="#cb74-29" tabindex="-1"></a><span class="do">### &gt; 27  carrier   FL AirTran Airways Corporation</span></span>
<span id="cb74-30"><a href="#cb74-30" tabindex="-1"></a><span class="do">### &gt; 28  carrier   HA      Hawaiian Airlines Inc.</span></span>
<span id="cb74-31"><a href="#cb74-31" tabindex="-1"></a><span class="do">### &gt; 29  carrier   MQ                   Envoy Air</span></span>
<span id="cb74-32"><a href="#cb74-32" tabindex="-1"></a><span class="do">### &gt; 30  carrier   OO       SkyWest Airlines Inc.</span></span>
<span id="cb74-33"><a href="#cb74-33" tabindex="-1"></a><span class="do">### &gt; 31  carrier   UA       United Air Lines Inc.</span></span>
<span id="cb74-34"><a href="#cb74-34" tabindex="-1"></a><span class="do">### &gt; 32  carrier   US             US Airways Inc.</span></span>
<span id="cb74-35"><a href="#cb74-35" tabindex="-1"></a><span class="do">### &gt; 33  carrier   VX              Virgin America</span></span>
<span id="cb74-36"><a href="#cb74-36" tabindex="-1"></a><span class="do">### &gt; 34  carrier   WN      Southwest Airlines Co.</span></span>
<span id="cb74-37"><a href="#cb74-37" tabindex="-1"></a><span class="do">### &gt; 35  carrier   YV          Mesa Airlines Inc.</span></span>
<span id="cb74-38"><a href="#cb74-38" tabindex="-1"></a><span class="do">### &gt; 36  carrier   NA                          NA</span></span></code></pre></div>
<p>We can use <code>head()</code> to get a baseline look at select rows
and variables</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" tabindex="-1"></a><span class="fu">head</span>(df[<span class="fu">c</span>(<span class="st">&quot;origin&quot;</span>, <span class="st">&quot;dep_time&quot;</span>, <span class="st">&quot;dest&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;carrier&quot;</span>)])</span>
<span id="cb75-2"><a href="#cb75-2" tabindex="-1"></a><span class="do">### &gt;   origin dep_time dest year month carrier</span></span>
<span id="cb75-3"><a href="#cb75-3" tabindex="-1"></a><span class="do">### &gt; 1    EWR      517  IAH 2013     1      UA</span></span>
<span id="cb75-4"><a href="#cb75-4" tabindex="-1"></a><span class="do">### &gt; 2    LGA      533  IAH 2013     1      UA</span></span>
<span id="cb75-5"><a href="#cb75-5" tabindex="-1"></a><span class="do">### &gt; 3    JFK      542  MIA 2013     1      AA</span></span>
<span id="cb75-6"><a href="#cb75-6" tabindex="-1"></a><span class="do">### &gt; 4    JFK      544  BQN 2013     1      B6</span></span>
<span id="cb75-7"><a href="#cb75-7" tabindex="-1"></a><span class="do">### &gt; 5    LGA      554  ATL 2013     1      DL</span></span>
<span id="cb75-8"><a href="#cb75-8" tabindex="-1"></a><span class="do">### &gt; 6    EWR      554  ORD 2013     1      UA</span></span></code></pre></div>
<p>Now, let’s do the same for a version we modified with
<code>use_val_labs()</code>. Note that this cannot be “undone” (except
for the usual clunky way of re-running our script up to this point and
not doing this!).</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" tabindex="-1"></a>df_swapd <span class="ot">&lt;-</span> <span class="fu">use_val_labs</span>(df)</span>
<span id="cb76-2"><a href="#cb76-2" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb76-3"><a href="#cb76-3" tabindex="-1"></a><span class="do">### &gt; Note: labelr is not optimized for data.frames this large.</span></span>
<span id="cb76-4"><a href="#cb76-4" tabindex="-1"></a></span>
<span id="cb76-5"><a href="#cb76-5" tabindex="-1"></a><span class="fu">head</span>(df_swapd[<span class="fu">c</span>(<span class="st">&quot;origin&quot;</span>, <span class="st">&quot;dep_time&quot;</span>, <span class="st">&quot;dest&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;carrier&quot;</span>)])</span>
<span id="cb76-6"><a href="#cb76-6" tabindex="-1"></a><span class="do">### &gt;   origin dep_time dest year month                carrier</span></span>
<span id="cb76-7"><a href="#cb76-7" tabindex="-1"></a><span class="do">### &gt; 1    EWR     q020  IAH 2013   JAN  United Air Lines Inc.</span></span>
<span id="cb76-8"><a href="#cb76-8" tabindex="-1"></a><span class="do">### &gt; 2    LGA     q020  IAH 2013   JAN  United Air Lines Inc.</span></span>
<span id="cb76-9"><a href="#cb76-9" tabindex="-1"></a><span class="do">### &gt; 3    JFK     q020  MIA 2013   JAN American Airlines Inc.</span></span>
<span id="cb76-10"><a href="#cb76-10" tabindex="-1"></a><span class="do">### &gt; 4    JFK     q020  BQN 2013   JAN        JetBlue Airways</span></span>
<span id="cb76-11"><a href="#cb76-11" tabindex="-1"></a><span class="do">### &gt; 5    LGA     q020  ATL 2013   JAN   Delta Air Lines Inc.</span></span>
<span id="cb76-12"><a href="#cb76-12" tabindex="-1"></a><span class="do">### &gt; 6    EWR     q020  ORD 2013   JAN  United Air Lines Inc.</span></span></code></pre></div>
<p>Instead of replacing values (which we can’t undo), it might be safer
to simply add “value-labels-on” character variables to the data.frame.
This adds nearly 675K new cells, but let’s throw caution to the wind
with <code>add_lab_cols()</code>.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" tabindex="-1"></a>df_plus <span class="ot">&lt;-</span> <span class="fu">add_lab_cols</span>(df, <span class="at">vars =</span> <span class="fu">c</span>(<span class="st">&quot;carrier&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;dep_time&quot;</span>))</span>
<span id="cb77-2"><a href="#cb77-2" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb77-3"><a href="#cb77-3" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb77-4"><a href="#cb77-4" tabindex="-1"></a><span class="do">### &gt; Note: labelr is not optimized for data.frames this large.</span></span>
<span id="cb77-5"><a href="#cb77-5" tabindex="-1"></a></span>
<span id="cb77-6"><a href="#cb77-6" tabindex="-1"></a><span class="fu">head</span>(df_plus[<span class="fu">c</span>(</span>
<span id="cb77-7"><a href="#cb77-7" tabindex="-1"></a>  <span class="st">&quot;origin&quot;</span>, <span class="st">&quot;dest&quot;</span>, <span class="st">&quot;year&quot;</span>,</span>
<span id="cb77-8"><a href="#cb77-8" tabindex="-1"></a>  <span class="st">&quot;month&quot;</span>, <span class="st">&quot;month_lab&quot;</span>,</span>
<span id="cb77-9"><a href="#cb77-9" tabindex="-1"></a>  <span class="st">&quot;dep_time&quot;</span>, <span class="st">&quot;dep_time_lab&quot;</span>,</span>
<span id="cb77-10"><a href="#cb77-10" tabindex="-1"></a>  <span class="st">&quot;carrier&quot;</span>, <span class="st">&quot;carrier_lab&quot;</span></span>
<span id="cb77-11"><a href="#cb77-11" tabindex="-1"></a>)])</span>
<span id="cb77-12"><a href="#cb77-12" tabindex="-1"></a><span class="do">### &gt;   origin dest year month month_lab dep_time dep_time_lab carrier            carrier_lab</span></span>
<span id="cb77-13"><a href="#cb77-13" tabindex="-1"></a><span class="do">### &gt; 1    EWR  IAH 2013     1       JAN      517         q020      UA  United Air Lines Inc.</span></span>
<span id="cb77-14"><a href="#cb77-14" tabindex="-1"></a><span class="do">### &gt; 2    LGA  IAH 2013     1       JAN      533         q020      UA  United Air Lines Inc.</span></span>
<span id="cb77-15"><a href="#cb77-15" tabindex="-1"></a><span class="do">### &gt; 3    JFK  MIA 2013     1       JAN      542         q020      AA American Airlines Inc.</span></span>
<span id="cb77-16"><a href="#cb77-16" tabindex="-1"></a><span class="do">### &gt; 4    JFK  BQN 2013     1       JAN      544         q020      B6        JetBlue Airways</span></span>
<span id="cb77-17"><a href="#cb77-17" tabindex="-1"></a><span class="do">### &gt; 5    LGA  ATL 2013     1       JAN      554         q020      DL   Delta Air Lines Inc.</span></span>
<span id="cb77-18"><a href="#cb77-18" tabindex="-1"></a><span class="do">### &gt; 6    EWR  ORD 2013     1       JAN      554         q020      UA  United Air Lines Inc.</span></span></code></pre></div>
<p>We can use <code>flab()</code> to filter df based on month and
carrier, even when value labels are “invisible” (i.e., existing only as
attributes() meta-data.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" tabindex="-1"></a><span class="co"># labels are not visible (they exist only as attributes() meta-data)</span></span>
<span id="cb78-2"><a href="#cb78-2" tabindex="-1"></a><span class="fu">head</span>(df[<span class="fu">c</span>(<span class="st">&quot;carrier&quot;</span>, <span class="st">&quot;arr_delay&quot;</span>)])</span>
<span id="cb78-3"><a href="#cb78-3" tabindex="-1"></a><span class="do">### &gt;   carrier arr_delay</span></span>
<span id="cb78-4"><a href="#cb78-4" tabindex="-1"></a><span class="do">### &gt; 1      UA        11</span></span>
<span id="cb78-5"><a href="#cb78-5" tabindex="-1"></a><span class="do">### &gt; 2      UA        20</span></span>
<span id="cb78-6"><a href="#cb78-6" tabindex="-1"></a><span class="do">### &gt; 3      AA        33</span></span>
<span id="cb78-7"><a href="#cb78-7" tabindex="-1"></a><span class="do">### &gt; 4      B6       -18</span></span>
<span id="cb78-8"><a href="#cb78-8" tabindex="-1"></a><span class="do">### &gt; 5      DL       -25</span></span>
<span id="cb78-9"><a href="#cb78-9" tabindex="-1"></a><span class="do">### &gt; 6      UA        12</span></span>
<span id="cb78-10"><a href="#cb78-10" tabindex="-1"></a></span>
<span id="cb78-11"><a href="#cb78-11" tabindex="-1"></a><span class="co"># we still can use them to filter (note: we&#39;re filtering on &quot;JetBlue Airways&quot;,</span></span>
<span id="cb78-12"><a href="#cb78-12" tabindex="-1"></a><span class="co"># ...NOT its obscure code &quot;B6&quot;)</span></span>
<span id="cb78-13"><a href="#cb78-13" tabindex="-1"></a>df_fl <span class="ot">&lt;-</span> <span class="fu">flab</span>(df, carrier <span class="sc">==</span> <span class="st">&quot;JetBlue Airways&quot;</span> <span class="sc">&amp;</span> arr_delay <span class="sc">&gt;</span> <span class="dv">20</span>)</span>
<span id="cb78-14"><a href="#cb78-14" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb78-15"><a href="#cb78-15" tabindex="-1"></a><span class="do">### &gt; Remember: Any filtering conditions involving value-labeled variables must be expressed</span></span>
<span id="cb78-16"><a href="#cb78-16" tabindex="-1"></a><span class="do">### &gt; in terms of the (quoted character) value labels, not the variable values themselves. </span></span>
<span id="cb78-17"><a href="#cb78-17" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb78-18"><a href="#cb78-18" tabindex="-1"></a><span class="do">### &gt; To filter using values (not labels) of value-labeled variables, try, e.g., sfilter().</span></span>
<span id="cb78-19"><a href="#cb78-19" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb78-20"><a href="#cb78-20" tabindex="-1"></a><span class="do">### &gt; Note: labelr is not optimized for data.frames this large.</span></span>
<span id="cb78-21"><a href="#cb78-21" tabindex="-1"></a></span>
<span id="cb78-22"><a href="#cb78-22" tabindex="-1"></a><span class="co"># here&#39;s what&#39;s returned when we filtered on &quot;JetBlue Airways&quot; using flab()</span></span>
<span id="cb78-23"><a href="#cb78-23" tabindex="-1"></a><span class="fu">head</span>(df_fl[<span class="fu">c</span>(<span class="st">&quot;carrier&quot;</span>, <span class="st">&quot;arr_delay&quot;</span>)])</span>
<span id="cb78-24"><a href="#cb78-24" tabindex="-1"></a><span class="do">### &gt;     carrier arr_delay</span></span>
<span id="cb78-25"><a href="#cb78-25" tabindex="-1"></a><span class="do">### &gt; 70       B6        44</span></span>
<span id="cb78-26"><a href="#cb78-26" tabindex="-1"></a><span class="do">### &gt; 129      B6        24</span></span>
<span id="cb78-27"><a href="#cb78-27" tabindex="-1"></a><span class="do">### &gt; 174      B6        40</span></span>
<span id="cb78-28"><a href="#cb78-28" tabindex="-1"></a><span class="do">### &gt; 203      B6        42</span></span>
<span id="cb78-29"><a href="#cb78-29" tabindex="-1"></a><span class="do">### &gt; 292      B6        29</span></span>
<span id="cb78-30"><a href="#cb78-30" tabindex="-1"></a><span class="do">### &gt; 314      B6        38</span></span>
<span id="cb78-31"><a href="#cb78-31" tabindex="-1"></a></span>
<span id="cb78-32"><a href="#cb78-32" tabindex="-1"></a><span class="co"># double-check that this is JetBlue</span></span>
<span id="cb78-33"><a href="#cb78-33" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">use_val_labs</span>(df_fl)[<span class="fu">c</span>(<span class="st">&quot;carrier&quot;</span>, <span class="st">&quot;arr_delay&quot;</span>)])</span>
<span id="cb78-34"><a href="#cb78-34" tabindex="-1"></a><span class="do">### &gt;             carrier arr_delay</span></span>
<span id="cb78-35"><a href="#cb78-35" tabindex="-1"></a><span class="do">### &gt; 70  JetBlue Airways        44</span></span>
<span id="cb78-36"><a href="#cb78-36" tabindex="-1"></a><span class="do">### &gt; 129 JetBlue Airways        24</span></span>
<span id="cb78-37"><a href="#cb78-37" tabindex="-1"></a><span class="do">### &gt; 174 JetBlue Airways        40</span></span>
<span id="cb78-38"><a href="#cb78-38" tabindex="-1"></a><span class="do">### &gt; 203 JetBlue Airways        42</span></span>
<span id="cb78-39"><a href="#cb78-39" tabindex="-1"></a><span class="do">### &gt; 292 JetBlue Airways        29</span></span>
<span id="cb78-40"><a href="#cb78-40" tabindex="-1"></a><span class="do">### &gt; 314 JetBlue Airways        38</span></span></code></pre></div>
<p>How long did this entire NYC Flights session take (results will
vary)?</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" tabindex="-1"></a>the_buzzer <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb79-2"><a href="#cb79-2" tabindex="-1"></a>the_buzzer <span class="sc">-</span> opening_ding</span>
<span id="cb79-3"><a href="#cb79-3" tabindex="-1"></a><span class="do">### &gt; Time difference of 1.383699 mins</span></span></code></pre></div>
</div>
<div id="value-labeling-many-variables-at-once" class="section level2">
<h2>Value-Labeling Many Variables at Once</h2>
<p>As shown earlier, functions for adding value labels (e.g.,
<code>add_val_labs</code>, <code>add_quant_labs</code> and
<code>add_m1_lab</code>) will do partial matching if the partial
argument is set to TRUE. Let’s use labelr’s
<code>make_likert_data()</code> function to generate some fake Likert
scale-style survey data to demonstrate this more fully.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">272</span>) <span class="co"># for reproducibility</span></span>
<span id="cb80-2"><a href="#cb80-2" tabindex="-1"></a>dflik <span class="ot">&lt;-</span> <span class="fu">make_likert_data</span>(<span class="at">scale =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>) <span class="co"># another labelr function</span></span>
<span id="cb80-3"><a href="#cb80-3" tabindex="-1"></a><span class="fu">head</span>(dflik)</span>
<span id="cb80-4"><a href="#cb80-4" tabindex="-1"></a><span class="do">### &gt;     id x1 x2 x3 x4 x5 y1 y2 y3 y4 y5</span></span>
<span id="cb80-5"><a href="#cb80-5" tabindex="-1"></a><span class="do">### &gt; U-1  1  5  7  2  2  2  7  1  1  4  2</span></span>
<span id="cb80-6"><a href="#cb80-6" tabindex="-1"></a><span class="do">### &gt; O-2  2  6  2  7  6  2  3  5  4  1  4</span></span>
<span id="cb80-7"><a href="#cb80-7" tabindex="-1"></a><span class="do">### &gt; H-3  3  7  7  5  5  6  6  4  1  5  7</span></span>
<span id="cb80-8"><a href="#cb80-8" tabindex="-1"></a><span class="do">### &gt; Z-4  4  4  5  5  4  5  6  3  7  3  4</span></span>
<span id="cb80-9"><a href="#cb80-9" tabindex="-1"></a><span class="do">### &gt; C-5  5  3  3  3  1  6  2  7  6  3  5</span></span>
<span id="cb80-10"><a href="#cb80-10" tabindex="-1"></a><span class="do">### &gt; P-6  6  7  3  5  3  7  5  7  1  6  2</span></span></code></pre></div>
<p>We’ll put the values we wish to label and the labels we wish to use
in stand-alone vectors, which we will supply to
<code>add_val_labs</code> in a moment.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" tabindex="-1"></a>vals2label <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span></span>
<span id="cb81-2"><a href="#cb81-2" tabindex="-1"></a>labs2use <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb81-3"><a href="#cb81-3" tabindex="-1"></a>  <span class="st">&quot;VSD&quot;</span>,</span>
<span id="cb81-4"><a href="#cb81-4" tabindex="-1"></a>  <span class="st">&quot;SD&quot;</span>,</span>
<span id="cb81-5"><a href="#cb81-5" tabindex="-1"></a>  <span class="st">&quot;D&quot;</span>,</span>
<span id="cb81-6"><a href="#cb81-6" tabindex="-1"></a>  <span class="st">&quot;N&quot;</span>,</span>
<span id="cb81-7"><a href="#cb81-7" tabindex="-1"></a>  <span class="st">&quot;A&quot;</span>,</span>
<span id="cb81-8"><a href="#cb81-8" tabindex="-1"></a>  <span class="st">&quot;SA&quot;</span>,</span>
<span id="cb81-9"><a href="#cb81-9" tabindex="-1"></a>  <span class="st">&quot;VSA&quot;</span></span>
<span id="cb81-10"><a href="#cb81-10" tabindex="-1"></a>)</span></code></pre></div>
<p>Now, let’s associate/apply the value labels to ALL vars with “x” in
their name and also to var “y3.” Note: partial = TRUE.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" tabindex="-1"></a>dflik <span class="ot">&lt;-</span> <span class="fu">add_val_labs</span>(</span>
<span id="cb82-2"><a href="#cb82-2" tabindex="-1"></a>  <span class="at">data =</span> dflik, <span class="at">vars =</span> <span class="fu">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y3&quot;</span>), <span class="do">###  note the vars args</span></span>
<span id="cb82-3"><a href="#cb82-3" tabindex="-1"></a>  <span class="at">vals =</span> vals2label,</span>
<span id="cb82-4"><a href="#cb82-4" tabindex="-1"></a>  <span class="at">labs =</span> labs2use,</span>
<span id="cb82-5"><a href="#cb82-5" tabindex="-1"></a>  <span class="at">partial =</span> <span class="cn">TRUE</span> <span class="co"># applying to all cols with &quot;x&quot; or &quot;y3&quot; substring in names</span></span>
<span id="cb82-6"><a href="#cb82-6" tabindex="-1"></a>)</span>
<span id="cb82-7"><a href="#cb82-7" tabindex="-1"></a><span class="do">### &gt; Labeling variable --x1--:</span></span>
<span id="cb82-8"><a href="#cb82-8" tabindex="-1"></a><span class="do">### &gt;   var vals labs</span></span>
<span id="cb82-9"><a href="#cb82-9" tabindex="-1"></a><span class="do">### &gt; 1  x1    1  VSD</span></span>
<span id="cb82-10"><a href="#cb82-10" tabindex="-1"></a><span class="do">### &gt; 2  x1    2   SD</span></span>
<span id="cb82-11"><a href="#cb82-11" tabindex="-1"></a><span class="do">### &gt; 3  x1    3    D</span></span>
<span id="cb82-12"><a href="#cb82-12" tabindex="-1"></a><span class="do">### &gt; 4  x1    4    N</span></span>
<span id="cb82-13"><a href="#cb82-13" tabindex="-1"></a><span class="do">### &gt; 5  x1    5    A</span></span>
<span id="cb82-14"><a href="#cb82-14" tabindex="-1"></a><span class="do">### &gt; 6  x1    6   SA</span></span>
<span id="cb82-15"><a href="#cb82-15" tabindex="-1"></a><span class="do">### &gt; 7  x1    7  VSA</span></span>
<span id="cb82-16"><a href="#cb82-16" tabindex="-1"></a><span class="do">### &gt; 8  x1   NA   NA</span></span>
<span id="cb82-17"><a href="#cb82-17" tabindex="-1"></a><span class="do">### &gt; Labeling variable --x2--:</span></span>
<span id="cb82-18"><a href="#cb82-18" tabindex="-1"></a><span class="do">### &gt;    var vals labs</span></span>
<span id="cb82-19"><a href="#cb82-19" tabindex="-1"></a><span class="do">### &gt; 9   x2    1  VSD</span></span>
<span id="cb82-20"><a href="#cb82-20" tabindex="-1"></a><span class="do">### &gt; 10  x2    2   SD</span></span>
<span id="cb82-21"><a href="#cb82-21" tabindex="-1"></a><span class="do">### &gt; 11  x2    3    D</span></span>
<span id="cb82-22"><a href="#cb82-22" tabindex="-1"></a><span class="do">### &gt; 12  x2    4    N</span></span>
<span id="cb82-23"><a href="#cb82-23" tabindex="-1"></a><span class="do">### &gt; 13  x2    5    A</span></span>
<span id="cb82-24"><a href="#cb82-24" tabindex="-1"></a><span class="do">### &gt; 14  x2    6   SA</span></span>
<span id="cb82-25"><a href="#cb82-25" tabindex="-1"></a><span class="do">### &gt; 15  x2    7  VSA</span></span>
<span id="cb82-26"><a href="#cb82-26" tabindex="-1"></a><span class="do">### &gt; 16  x2   NA   NA</span></span>
<span id="cb82-27"><a href="#cb82-27" tabindex="-1"></a><span class="do">### &gt; Labeling variable --x3--:</span></span>
<span id="cb82-28"><a href="#cb82-28" tabindex="-1"></a><span class="do">### &gt;    var vals labs</span></span>
<span id="cb82-29"><a href="#cb82-29" tabindex="-1"></a><span class="do">### &gt; 17  x3    1  VSD</span></span>
<span id="cb82-30"><a href="#cb82-30" tabindex="-1"></a><span class="do">### &gt; 18  x3    2   SD</span></span>
<span id="cb82-31"><a href="#cb82-31" tabindex="-1"></a><span class="do">### &gt; 19  x3    3    D</span></span>
<span id="cb82-32"><a href="#cb82-32" tabindex="-1"></a><span class="do">### &gt; 20  x3    4    N</span></span>
<span id="cb82-33"><a href="#cb82-33" tabindex="-1"></a><span class="do">### &gt; 21  x3    5    A</span></span>
<span id="cb82-34"><a href="#cb82-34" tabindex="-1"></a><span class="do">### &gt; 22  x3    6   SA</span></span>
<span id="cb82-35"><a href="#cb82-35" tabindex="-1"></a><span class="do">### &gt; 23  x3    7  VSA</span></span>
<span id="cb82-36"><a href="#cb82-36" tabindex="-1"></a><span class="do">### &gt; 24  x3   NA   NA</span></span>
<span id="cb82-37"><a href="#cb82-37" tabindex="-1"></a><span class="do">### &gt; Labeling variable --x4--:</span></span>
<span id="cb82-38"><a href="#cb82-38" tabindex="-1"></a><span class="do">### &gt;    var vals labs</span></span>
<span id="cb82-39"><a href="#cb82-39" tabindex="-1"></a><span class="do">### &gt; 25  x4    1  VSD</span></span>
<span id="cb82-40"><a href="#cb82-40" tabindex="-1"></a><span class="do">### &gt; 26  x4    2   SD</span></span>
<span id="cb82-41"><a href="#cb82-41" tabindex="-1"></a><span class="do">### &gt; 27  x4    3    D</span></span>
<span id="cb82-42"><a href="#cb82-42" tabindex="-1"></a><span class="do">### &gt; 28  x4    4    N</span></span>
<span id="cb82-43"><a href="#cb82-43" tabindex="-1"></a><span class="do">### &gt; 29  x4    5    A</span></span>
<span id="cb82-44"><a href="#cb82-44" tabindex="-1"></a><span class="do">### &gt; 30  x4    6   SA</span></span>
<span id="cb82-45"><a href="#cb82-45" tabindex="-1"></a><span class="do">### &gt; 31  x4    7  VSA</span></span>
<span id="cb82-46"><a href="#cb82-46" tabindex="-1"></a><span class="do">### &gt; 32  x4   NA   NA</span></span>
<span id="cb82-47"><a href="#cb82-47" tabindex="-1"></a><span class="do">### &gt; Labeling variable --x5--:</span></span>
<span id="cb82-48"><a href="#cb82-48" tabindex="-1"></a><span class="do">### &gt;    var vals labs</span></span>
<span id="cb82-49"><a href="#cb82-49" tabindex="-1"></a><span class="do">### &gt; 33  x5    1  VSD</span></span>
<span id="cb82-50"><a href="#cb82-50" tabindex="-1"></a><span class="do">### &gt; 34  x5    2   SD</span></span>
<span id="cb82-51"><a href="#cb82-51" tabindex="-1"></a><span class="do">### &gt; 35  x5    3    D</span></span>
<span id="cb82-52"><a href="#cb82-52" tabindex="-1"></a><span class="do">### &gt; 36  x5    4    N</span></span>
<span id="cb82-53"><a href="#cb82-53" tabindex="-1"></a><span class="do">### &gt; 37  x5    5    A</span></span>
<span id="cb82-54"><a href="#cb82-54" tabindex="-1"></a><span class="do">### &gt; 38  x5    6   SA</span></span>
<span id="cb82-55"><a href="#cb82-55" tabindex="-1"></a><span class="do">### &gt; 39  x5    7  VSA</span></span>
<span id="cb82-56"><a href="#cb82-56" tabindex="-1"></a><span class="do">### &gt; 40  x5   NA   NA</span></span>
<span id="cb82-57"><a href="#cb82-57" tabindex="-1"></a><span class="do">### &gt; Labeling variable --y3--:</span></span>
<span id="cb82-58"><a href="#cb82-58" tabindex="-1"></a><span class="do">### &gt;    var vals labs</span></span>
<span id="cb82-59"><a href="#cb82-59" tabindex="-1"></a><span class="do">### &gt; 41  y3    1  VSD</span></span>
<span id="cb82-60"><a href="#cb82-60" tabindex="-1"></a><span class="do">### &gt; 42  y3    2   SD</span></span>
<span id="cb82-61"><a href="#cb82-61" tabindex="-1"></a><span class="do">### &gt; 43  y3    3    D</span></span>
<span id="cb82-62"><a href="#cb82-62" tabindex="-1"></a><span class="do">### &gt; 44  y3    4    N</span></span>
<span id="cb82-63"><a href="#cb82-63" tabindex="-1"></a><span class="do">### &gt; 45  y3    5    A</span></span>
<span id="cb82-64"><a href="#cb82-64" tabindex="-1"></a><span class="do">### &gt; 46  y3    6   SA</span></span>
<span id="cb82-65"><a href="#cb82-65" tabindex="-1"></a><span class="do">### &gt; 47  y3    7  VSA</span></span>
<span id="cb82-66"><a href="#cb82-66" tabindex="-1"></a><span class="do">### &gt; 48  y3   NA   NA</span></span>
<span id="cb82-67"><a href="#cb82-67" tabindex="-1"></a><span class="do">### &gt; Remember: This command uses partial vars arg matching.</span></span>
<span id="cb82-68"><a href="#cb82-68" tabindex="-1"></a><span class="do">### &gt; Use a more specific vars argument or set partial = FALSE</span></span>
<span id="cb82-69"><a href="#cb82-69" tabindex="-1"></a><span class="do">### &gt; ...if you want to restrict labeling to fewer/more specific variables.</span></span></code></pre></div>
<p>That’s a lot of information! For a more compact sense of things,
let’s compare dflik with value labels present but “off” to labels
“on.”</p>
<p>First, present but “off.”</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" tabindex="-1"></a><span class="fu">head</span>(dflik)</span>
<span id="cb83-2"><a href="#cb83-2" tabindex="-1"></a><span class="do">### &gt;     id x1 x2 x3 x4 x5 y1 y2 y3 y4 y5</span></span>
<span id="cb83-3"><a href="#cb83-3" tabindex="-1"></a><span class="do">### &gt; U-1  1  5  7  2  2  2  7  1  1  4  2</span></span>
<span id="cb83-4"><a href="#cb83-4" tabindex="-1"></a><span class="do">### &gt; O-2  2  6  2  7  6  2  3  5  4  1  4</span></span>
<span id="cb83-5"><a href="#cb83-5" tabindex="-1"></a><span class="do">### &gt; H-3  3  7  7  5  5  6  6  4  1  5  7</span></span>
<span id="cb83-6"><a href="#cb83-6" tabindex="-1"></a><span class="do">### &gt; Z-4  4  4  5  5  4  5  6  3  7  3  4</span></span>
<span id="cb83-7"><a href="#cb83-7" tabindex="-1"></a><span class="do">### &gt; C-5  5  3  3  3  1  6  2  7  6  3  5</span></span>
<span id="cb83-8"><a href="#cb83-8" tabindex="-1"></a><span class="do">### &gt; P-6  6  7  3  5  3  7  5  7  1  6  2</span></span></code></pre></div>
<p>Now, let’s “turn on” (use) these value labels.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" tabindex="-1"></a>lik1 <span class="ot">&lt;-</span> <span class="fu">uvl</span>(dflik) <span class="co"># assign to new object, since we can&#39;t &quot;undo&quot;</span></span>
<span id="cb84-2"><a href="#cb84-2" tabindex="-1"></a><span class="fu">head</span>(lik1) <span class="co"># we could have skipped previous call by using labelr::headl(dflik)</span></span>
<span id="cb84-3"><a href="#cb84-3" tabindex="-1"></a><span class="do">### &gt;     id  x1  x2  x3  x4  x5 y1 y2  y3 y4 y5</span></span>
<span id="cb84-4"><a href="#cb84-4" tabindex="-1"></a><span class="do">### &gt; U-1  1   A VSA  SD  SD  SD  7  1 VSD  4  2</span></span>
<span id="cb84-5"><a href="#cb84-5" tabindex="-1"></a><span class="do">### &gt; O-2  2  SA  SD VSA  SA  SD  3  5   N  1  4</span></span>
<span id="cb84-6"><a href="#cb84-6" tabindex="-1"></a><span class="do">### &gt; H-3  3 VSA VSA   A   A  SA  6  4 VSD  5  7</span></span>
<span id="cb84-7"><a href="#cb84-7" tabindex="-1"></a><span class="do">### &gt; Z-4  4   N   A   A   N   A  6  3 VSA  3  4</span></span>
<span id="cb84-8"><a href="#cb84-8" tabindex="-1"></a><span class="do">### &gt; C-5  5   D   D   D VSD  SA  2  7  SA  3  5</span></span>
<span id="cb84-9"><a href="#cb84-9" tabindex="-1"></a><span class="do">### &gt; P-6  6 VSA   D   A   D VSA  5  7 VSD  6  2</span></span></code></pre></div>
<p>Yea, verily: All variables with “x” in their name (and “y3”) got the
labels!</p>
<p>Suppose we want to drop these value labels for a select few, but not
all, of these variables. <code>drop_val_labs</code> can get the job
done.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" tabindex="-1"></a>dfdrop <span class="ot">&lt;-</span> <span class="fu">drop_val_labs</span>(dflik,</span>
<span id="cb85-2"><a href="#cb85-2" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">&quot;x2&quot;</span>, <span class="st">&quot;y3&quot;</span>),</span>
<span id="cb85-3"><a href="#cb85-3" tabindex="-1"></a>  <span class="at">partial =</span> <span class="cn">FALSE</span></span>
<span id="cb85-4"><a href="#cb85-4" tabindex="-1"></a>)</span>
<span id="cb85-5"><a href="#cb85-5" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb85-6"><a href="#cb85-6" tabindex="-1"></a><span class="do">### &gt;   Dropping all value labels from variable --x2--.</span></span>
<span id="cb85-7"><a href="#cb85-7" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb85-8"><a href="#cb85-8" tabindex="-1"></a><span class="do">### &gt;   Dropping all value labels from variable --y3--.</span></span></code></pre></div>
<p>Most of our previously labeled columns remain so; but not “x2” and
“y3.”</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" tabindex="-1"></a><span class="fu">get_val_labs</span>(dfdrop, <span class="st">&quot;x2&quot;</span>)</span>
<span id="cb86-2"><a href="#cb86-2" tabindex="-1"></a><span class="do">### &gt; Warning in get_val_labs(dfdrop, &quot;x2&quot;): </span></span>
<span id="cb86-3"><a href="#cb86-3" tabindex="-1"></a><span class="do">### &gt;  </span></span>
<span id="cb86-4"><a href="#cb86-4" tabindex="-1"></a><span class="do">### &gt;   No val.labs found.</span></span>
<span id="cb86-5"><a href="#cb86-5" tabindex="-1"></a><span class="do">### &gt; [1] var  vals labs</span></span>
<span id="cb86-6"><a href="#cb86-6" tabindex="-1"></a><span class="do">### &gt; &lt;0 rows&gt; (or 0-length row.names)</span></span></code></pre></div>
<p>Compare to values for variable “x1” (we did not drop value labels
from this one)</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" tabindex="-1"></a><span class="fu">get_val_labs</span>(dfdrop, <span class="st">&quot;x1&quot;</span>)</span>
<span id="cb87-2"><a href="#cb87-2" tabindex="-1"></a><span class="do">### &gt;   var vals labs</span></span>
<span id="cb87-3"><a href="#cb87-3" tabindex="-1"></a><span class="do">### &gt; 1  x1    1  VSD</span></span>
<span id="cb87-4"><a href="#cb87-4" tabindex="-1"></a><span class="do">### &gt; 2  x1    2   SD</span></span>
<span id="cb87-5"><a href="#cb87-5" tabindex="-1"></a><span class="do">### &gt; 3  x1    3    D</span></span>
<span id="cb87-6"><a href="#cb87-6" tabindex="-1"></a><span class="do">### &gt; 4  x1    4    N</span></span>
<span id="cb87-7"><a href="#cb87-7" tabindex="-1"></a><span class="do">### &gt; 5  x1    5    A</span></span>
<span id="cb87-8"><a href="#cb87-8" tabindex="-1"></a><span class="do">### &gt; 6  x1    6   SA</span></span>
<span id="cb87-9"><a href="#cb87-9" tabindex="-1"></a><span class="do">### &gt; 7  x1    7  VSA</span></span>
<span id="cb87-10"><a href="#cb87-10" tabindex="-1"></a><span class="do">### &gt; 8  x1   NA   NA</span></span></code></pre></div>
<p>Just like we did with <code>add_val_labs()</code>, we also can use a
single command to drop value labels from all variables with “x” in their
variable names.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" tabindex="-1"></a>dfxgone <span class="ot">&lt;-</span> <span class="fu">drop_val_labs</span>(dflik,</span>
<span id="cb88-2"><a href="#cb88-2" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">&quot;x&quot;</span>),</span>
<span id="cb88-3"><a href="#cb88-3" tabindex="-1"></a>  <span class="at">partial =</span> <span class="cn">TRUE</span> <span class="co"># note</span></span>
<span id="cb88-4"><a href="#cb88-4" tabindex="-1"></a>)</span>
<span id="cb88-5"><a href="#cb88-5" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb88-6"><a href="#cb88-6" tabindex="-1"></a><span class="do">### &gt; Remember: This command uses partial var arg matching.</span></span>
<span id="cb88-7"><a href="#cb88-7" tabindex="-1"></a><span class="do">### &gt; Use specific var argument or drop_val1() to restrict this operation to fewer/more specific variables.</span></span>
<span id="cb88-8"><a href="#cb88-8" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb88-9"><a href="#cb88-9" tabindex="-1"></a><span class="do">### &gt;   Dropping all value labels from variable --x1--.</span></span>
<span id="cb88-10"><a href="#cb88-10" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb88-11"><a href="#cb88-11" tabindex="-1"></a><span class="do">### &gt;   Dropping all value labels from variable --x2--.</span></span>
<span id="cb88-12"><a href="#cb88-12" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb88-13"><a href="#cb88-13" tabindex="-1"></a><span class="do">### &gt;   Dropping all value labels from variable --x3--.</span></span>
<span id="cb88-14"><a href="#cb88-14" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb88-15"><a href="#cb88-15" tabindex="-1"></a><span class="do">### &gt;   Dropping all value labels from variable --x4--.</span></span>
<span id="cb88-16"><a href="#cb88-16" tabindex="-1"></a><span class="do">### &gt; </span></span>
<span id="cb88-17"><a href="#cb88-17" tabindex="-1"></a><span class="do">### &gt;   Dropping all value labels from variable --x5--.</span></span></code></pre></div>
<p>“y3” still has value labels, but now <strong>all</strong> “x” var
value labels are gone.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" tabindex="-1"></a><span class="fu">get_val_labs</span>(dfxgone)</span>
<span id="cb89-2"><a href="#cb89-2" tabindex="-1"></a><span class="do">### &gt;   var vals labs</span></span>
<span id="cb89-3"><a href="#cb89-3" tabindex="-1"></a><span class="do">### &gt; 1  y3    1  VSD</span></span>
<span id="cb89-4"><a href="#cb89-4" tabindex="-1"></a><span class="do">### &gt; 2  y3    2   SD</span></span>
<span id="cb89-5"><a href="#cb89-5" tabindex="-1"></a><span class="do">### &gt; 3  y3    3    D</span></span>
<span id="cb89-6"><a href="#cb89-6" tabindex="-1"></a><span class="do">### &gt; 4  y3    4    N</span></span>
<span id="cb89-7"><a href="#cb89-7" tabindex="-1"></a><span class="do">### &gt; 5  y3    5    A</span></span>
<span id="cb89-8"><a href="#cb89-8" tabindex="-1"></a><span class="do">### &gt; 6  y3    6   SA</span></span>
<span id="cb89-9"><a href="#cb89-9" tabindex="-1"></a><span class="do">### &gt; 7  y3    7  VSA</span></span>
<span id="cb89-10"><a href="#cb89-10" tabindex="-1"></a><span class="do">### &gt; 8  y3   NA   NA</span></span></code></pre></div>
</div>
<div id="alias-functions-and-conclusion" class="section level2">
<h2>Alias Functions and Conclusion</h2>
<p>This concludes our whirlwind tour of labelr functionalities. You’ve
graduated.</p>
<p>Well, almost. Before you go, here is a list of aliases for common
functions. Aside from having a different name, each alias function is
identical to (i.e., performs the same operations, returning the same
result as) the parent function that it aliases. More concise and more
cryptic, these alias functions will save you some typing at the console
(and some characters in your scripts).</p>
<p>The available aliases are as follows:</p>
<ul>
<li><p><code>add_val_labs</code> alias is <code>avl</code></p></li>
<li><p><code>get_val_labs</code> alias is <code>gvl</code></p></li>
<li><p><code>drop_val_labs</code> alias is <code>dvl</code></p></li>
<li><p><code>add_val1</code> alias is <code>avl1</code></p></li>
<li><p><code>drop_val1</code> alias is <code>dvl1</code></p></li>
<li><p><code>add_quant_labs</code> alias is <code>aql</code></p></li>
<li><p><code>add_quant1</code> alias is <code>aq1</code></p></li>
<li><p><code>add_m1_lab</code> alias is <code>am1l</code></p></li>
<li><p><code>use_val_labs</code> alias is <code>uvl</code></p></li>
<li><p><code>with_val_labs</code> alias is <code>wvl</code></p></li>
<li><p><code>add_name_labs</code> is <code>anl</code></p></li>
<li><p><code>get_name_labs</code> alias is <code>gnl</code></p></li>
<li><p><code>drop_name_labs</code> alias is <code>dnl</code></p></li>
<li><p><code>use_name_labs</code> alias is <code>unl</code></p></li>
<li><p><code>use_var_names</code> alias is <code>uvn</code></p></li>
<li><p><code>with_name_labs</code> alias is <code>wnl</code></p></li>
<li><p><code>with_both_labs</code> alias is <code>wbl</code></p></li>
<li><p><code>add_frame_lab</code> alias is <code>afl</code></p></li>
<li><p><code>get_frame_lab</code> alias is <code>gfl</code></p></li>
<li><p><code>drop_frame_lab</code> alias is <code>dfl</code></p></li>
</ul>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
